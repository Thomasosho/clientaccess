function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,c=new Array(t);i<t;i++)c[i]=e[i];return c}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var c=t[i];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{LnEg:function(e,t,i){"use strict";i.r(t),i.d(t,"DocumentsModule",(function(){return ie}));var c=i("ofXK"),o=i("tyNb"),n=i("fXoL"),r=i("SiJz"),a=i("rvnR"),s=i("1LjI"),d=i("K3ix"),l=i("IkSl");function u(e,t){if(1&e&&n.Ub(0,"img",3),2&e){var i=n.jc();n.qc("src",i.document.imageUrl,n.Ac)}}function b(e,t){if(1&e&&(n.Zb(0,"div",4),n.Ub(1,"pdf-viewer",5),n.Yb()),2&e){var i=n.jc();n.Hb(1),n.qc("src",i.document.imageUrl)("render-text",!0)}}var p,m=((p=function(){function e(t){_classCallCheck(this,e),this.companyService=t,this.doctype="audit",this.document=this.companyService.getDocument()}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||p)(n.Tb(s.a))},p.\u0275cmp=n.Nb({type:p,selectors:[["app-view"]],inputs:{doctype:"doctype"},decls:3,vars:2,consts:[[1,"container","overflow-auto"],["width","100%","height","100%","alt","document","srcset","",3,"src",4,"ngIf"],["class","pdf-viewer overflow-auto",4,"ngIf"],["width","100%","height","100%","alt","document","srcset","",3,"src"],[1,"pdf-viewer","overflow-auto"],[2,"display","block",3,"src","render-text"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Fc(1,u,1,1,"img",1),n.Fc(2,b,2,2,"div",2),n.Yb()),2&e&&(n.Hb(1),n.qc("ngIf","audit"!==t.doctype),n.Hb(1),n.qc("ngIf","audit"===t.doctype))},directives:[c.t,l.a],styles:[".pdf-viewer[_ngcontent-%COMP%]{height:600px;width:100%}"]}),p);function f(e,t){if(1&e){var i=n.ac();n.Zb(0,"tr"),n.Zb(1,"td"),n.Zb(2,"div"),n.Ub(3,"img",13),n.Yb(),n.Yb(),n.Zb(4,"td"),n.Zb(5,"div"),n.Hc(6),n.Yb(),n.Yb(),n.Zb(7,"td"),n.Zb(8,"div"),n.Hc(9),n.Yb(),n.Yb(),n.Zb(10,"td"),n.Zb(11,"div"),n.Hc(12),n.Yb(),n.Yb(),n.Zb(13,"td"),n.Zb(14,"div"),n.Hc(15),n.Yb(),n.Yb(),n.Zb(16,"td",14),n.Zb(17,"button",15),n.hc("click",(function(){n.yc(i);var e=t.$implicit;return n.jc().setDocument(e)})),n.Hc(18,"Edit"),n.Yb(),n.Zb(19,"button",16),n.hc("click",(function(){n.yc(i);var e=t.$implicit,c=n.jc(),o=n.wc(31);return c.openModal(o,e)})),n.Hc(20,"View"),n.Yb(),n.Yb(),n.Yb()}if(2&e){var c=t.$implicit;n.Hb(3),n.qc("src",c.imageUrl,n.Ac),n.Hb(3),n.Jc(" ",c.type," "),n.Hb(3),n.Jc(" ",c.description||"Description not available"," "),n.Hb(3),n.Jc(" ",c.certificateNum," "),n.Hb(3),n.Jc(" ",c.year," ")}}function h(e,t){if(1&e){var i=n.ac();n.Zb(0,"div",17),n.Zb(1,"h4",18),n.Hc(2,"Document"),n.Yb(),n.Zb(3,"button",19),n.hc("click",(function(){return n.yc(i),n.jc().modalRef.hide()})),n.Zb(4,"span",20),n.Hc(5,"\xd7"),n.Yb(),n.Yb(),n.Yb(),n.Zb(6,"div",21),n.Ub(7,"app-view",22),n.Yb(),n.Zb(8,"div",23),n.Zb(9,"button",24),n.hc("click",(function(){return n.yc(i),n.jc().modalRef.hide()})),n.Hc(10,"Close"),n.Yb(),n.Yb()}if(2&e){var c=n.jc();n.Hb(7),n.qc("doctype",c.docType)}}var g,v=((g=function(){function e(t,i,c,o,n){_classCallCheck(this,e),this.crudService=t,this.utilService=i,this.companyService=c,this.modalService=o,this.router=n}return _createClass(e,[{key:"ngOnInit",value:function(){this.getAllDocuments()}},{key:"getAllDocuments",value:function(){var e=this;this.loading=!0;var t=this.utilService.getCompany().id;this.crudService.getRequest("api/companyprofile/getByCompanyId/"+t).subscribe((function(t){console.log(t),e.documents=t,e.loading=!1}),(function(t){console.log(t),e.loading=!1}))}},{key:"setDocument",value:function(e){var t=e.type.toLowerCase();this.companyService.setDocument(e),this.router.navigate(["/contractor/documents/edit/"+t])}},{key:"openModal",value:function(e,t){this.docType=t.type,this.companyService.setDocument(t),this.modalRef=this.modalService.show(e,Object.assign({},{class:"gray modal-lg"}))}}]),e}()).\u0275fac=function(e){return new(e||g)(n.Tb(r.a),n.Tb(a.a),n.Tb(s.a),n.Tb(d.a),n.Tb(o.c))},g.\u0275cmp=n.Nb({type:g,selectors:[["app-documents"]],decls:32,vars:1,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","d-flex","justify-content-between"],[1,"card-body"],["summary","List of projects","aria-role","table",1,"table","stripped","table-responsive-sm","table-xs-responsive","table-hover","table-outline","mb-0"],["span","1",2,"width","20%"],["span","1",2,"width","35%"],["span","1",2,"width","15%"],[1,"thead-light"],[1,""],[4,"ngFor","ngForOf"],["template",""],["width","150","height","150","alt","","srcset","",3,"src"],[1,"text-center"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-theme-primary","m-2",3,"click"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"doctype"],[1,"modal-footer"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"div",2),n.Zb(3,"div",3),n.Zb(4,"h2"),n.Hc(5,"All Documents(2)"),n.Yb(),n.Yb(),n.Zb(6,"div",4),n.Zb(7,"table",5),n.Zb(8,"colgroup"),n.Ub(9,"col",6),n.Ub(10,"col",7),n.Ub(11,"col",8),n.Ub(12,"col",8),n.Ub(13,"col",8),n.Yb(),n.Zb(14,"thead",9),n.Zb(15,"tr"),n.Zb(16,"th"),n.Hc(17,"Document"),n.Yb(),n.Zb(18,"th"),n.Hc(19,"Type"),n.Yb(),n.Zb(20,"th"),n.Hc(21,"Document Description"),n.Yb(),n.Zb(22,"th"),n.Hc(23,"Certificate Number"),n.Yb(),n.Zb(24,"th"),n.Hc(25,"Year"),n.Yb(),n.Zb(26,"th"),n.Hc(27,"Action"),n.Yb(),n.Yb(),n.Yb(),n.Zb(28,"tbody",10),n.Fc(29,f,21,5,"tr",11),n.Yb(),n.Yb(),n.Yb(),n.Fc(30,h,11,1,"ng-template",null,12,n.Gc),n.Yb(),n.Yb(),n.Yb()),2&e&&(n.Hb(29),n.qc("ngForOf",t.documents))},directives:[c.s,m],styles:[""]}),g),y=i("3Pt+"),Y=i("DaGL");function Z(e,t){if(1&e&&(n.Zb(0,"option",27),n.Hc(1),n.Yb()),2&e){var i=t.$implicit;n.qc("value",i),n.Hb(1),n.Jc(" ",i," ")}}function w(e,t){1&e&&(n.Zb(0,"div",28),n.Zb(1,"div",29),n.Zb(2,"span",30),n.Hc(3,"Loading..."),n.Yb(),n.Yb(),n.Zb(4,"div",31),n.Zb(5,"span",30),n.Hc(6,"Loading..."),n.Yb(),n.Yb(),n.Zb(7,"div",32),n.Zb(8,"span",30),n.Hc(9,"Loading..."),n.Yb(),n.Yb(),n.Yb())}function H(e,t){if(1&e&&n.Ub(0,"img",33),2&e){var i=n.jc();n.qc("src",i.fileUrl,n.Ac)}}function S(e,t){1&e&&n.Ub(0,"img",34)}function T(e,t){1&e&&(n.Zb(0,"button",35),n.Ub(1,"span",36),n.Hc(2," Loading... "),n.Yb())}function U(e,t){if(1&e){var i=n.ac();n.Zb(0,"button",37),n.hc("click",(function(){return n.yc(i),n.jc().uploadDocument()})),n.Hc(1,"Upload"),n.Yb()}}var C,k=((C=function(){function e(t,i,c,o,n,r){_classCallCheck(this,e),this.crudService=t,this.utilService=i,this.swalService=c,this.route=o,this.router=n,this.form=r,this.uploadType={cac:"/api/cac/add",irr:"/api/irr/add",itf:"/api/itf/add",nsitf:"/api/nsitf/add",pencomm:"/api/pension/add",tax:"/api/taxclearance/add"},this.loading=!1,this.fileUrl="../../../../../assets/img/no-image-available.jpg",this.selectedYear="2020",this.uploadLoading=!1,this.docType="",this.years=this.getYear(25)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this.route.snapshot.params.doc;this.docType=e,this.postUrl=this.uploadType[e],this.documentForm=this.form.group({description:["",y.C.required],certificateNum:["",y.C.required],year:["",y.C.required]})}},{key:"getYear",value:function(e){var t=(new Date).getFullYear();return _toConsumableArray(Array(e).keys()).map((function(e){return t-e}))}},{key:"uploadDocument",value:function(){var e=this;this.loading=!0,this.fileUrl?(this.documentForm.value.imageUrl=this.fileUrl,this.documentForm.value.id=0,this.documentForm.value.companyId=this.utilService.getCompany().id,this.crudService.postRequest(this.postUrl,this.documentForm.value).subscribe((function(t){0===t.code?(console.log(t),e.loading=!1,e.swalService.success("Uploaded Successfully"),e.router.navigate(["/contractor/documents/"+e.docType])):e.swalService.error("An error occured")}),(function(t){console.log(t),e.loading=!1,e.swalService.error(t.message)}))):(this.loading=!1,this.swalService.error("Could not upload file, file path is empty."))}},{key:"getUploadUrl",value:function(e){var t=this;this.uploadLoading=!0;var i=e.target.files[0],c=new FormData;c.append("file",i,i.name);var o="uploadMe";"audit"===this.docType&&(o="uploadMePdf"),this.crudService.postRequestFile(o,c).subscribe((function(e){0===e.code?(t.uploadLoading=!1,t.fileUrl=e.message,t.swalService.success("File path saved.")):t.swalService.error("An error occured")}),(function(e){console.log(e),t.uploadLoading=!1,t.swalService.error("Could not get file path.")}))}}]),e}()).\u0275fac=function(e){return new(e||C)(n.Tb(r.a),n.Tb(a.a),n.Tb(Y.a),n.Tb(o.a),n.Tb(o.c),n.Tb(y.f))},C.\u0275cmp=n.Nb({type:C,selectors:[["app-doc-upload"]],decls:40,vars:11,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-10"],[1,"card"],[1,"card-header","font-weight-bold"],[1,"card-body"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","text-input",1,"col-md-3","col-form-label"],[1,"col-md-9"],["type","text","id","description","formControlName","description","name","description","placeholder","Document Description",1,"form-control"],["type","text","id","certificateNum","formControlName","certificateNum","name","certificateNum","placeholder","Certificate Number",1,"form-control"],["for","year",1,"col-md-3","col-form-label"],["id","year","name","year","formControlName","year",1,"form-control",3,"ngModel","ngModelChange"],["value","select year"],[3,"value",4,"ngFor","ngForOf"],["class","row d-flex justify-content-center my-2",4,"ngIf"],[1,"col-md-4"],[1,"mx-auto","my-1"],["width","80%","height","120","alt","","srcset","",3,"src",4,"ngIf"],["src","../../../../../assets/img/pdf.png","width","80%","height","120","alt","","srcset","",4,"ngIf"],[1,"col-md-8","my-auto"],["type","file","id","file-input","name","file-input",3,"change"],[1,"mt-1"],[1,"text-danger"],[1,"card-footer"],["class","btn btn-success mx-3","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-success mx-3",3,"click",4,"ngIf"],[3,"value"],[1,"row","d-flex","justify-content-center","my-2"],["role","status",1,"spinner-grow","text-success"],[1,"sr-only"],["role","status",1,"spinner-grow","text-primary"],["role","status",1,"spinner-grow","text-info"],["width","80%","height","120","alt","","srcset","",3,"src"],["src","../../../../../assets/img/pdf.png","width","80%","height","120","alt","","srcset",""],["type","button","disabled","",1,"btn","btn-success","mx-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-success","mx-3",3,"click"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"div",2),n.Zb(3,"div",3),n.Hc(4),n.kc(5,"uppercase"),n.Yb(),n.Zb(6,"div",4),n.Zb(7,"form",5),n.hc("ngSubmit",(function(){return t.uploadDocument()})),n.Zb(8,"div",6),n.Zb(9,"label",7),n.Hc(10,"Document Description"),n.Yb(),n.Zb(11,"div",8),n.Ub(12,"input",9),n.Yb(),n.Yb(),n.Zb(13,"div",6),n.Zb(14,"label",7),n.Hc(15,"Certificate Number"),n.Yb(),n.Zb(16,"div",8),n.Ub(17,"input",10),n.Yb(),n.Yb(),n.Zb(18,"div",6),n.Zb(19,"label",11),n.Hc(20,"Year"),n.Yb(),n.Zb(21,"div",8),n.Zb(22,"select",12),n.hc("ngModelChange",(function(e){return t.selectedYear=e})),n.Zb(23,"option",13),n.Hc(24,"--- Select Year ---"),n.Yb(),n.Fc(25,Z,2,2,"option",14),n.Yb(),n.Yb(),n.Yb(),n.Fc(26,w,10,0,"div",15),n.Zb(27,"div",6),n.Zb(28,"div",16),n.Zb(29,"div",17),n.Fc(30,H,1,1,"img",18),n.Fc(31,S,1,0,"img",19),n.Yb(),n.Yb(),n.Zb(32,"div",20),n.Zb(33,"input",21),n.hc("change",(function(e){return t.getUploadUrl(e)})),n.Yb(),n.Zb(34,"div",22),n.Zb(35,"small",23),n.Hc(36," (Document should be in jpeg/jpg/png format and not more than 4MB)."),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Zb(37,"div",24),n.Fc(38,T,3,0,"button",25),n.Fc(39,U,2,0,"button",26),n.Yb(),n.Yb(),n.Yb(),n.Yb()),2&e&&(n.Hb(4),n.Jc(" Upload ",n.lc(5,9,t.docType)," Document "),n.Hb(3),n.qc("formGroup",t.documentForm),n.Hb(15),n.qc("ngModel",t.selectedYear),n.Hb(3),n.qc("ngForOf",t.years),n.Hb(1),n.qc("ngIf",t.uploadLoading),n.Hb(4),n.qc("ngIf","audit"!==t.docType),n.Hb(1),n.qc("ngIf","audit"===t.docType),n.Hb(7),n.qc("ngIf",t.loading),n.Hb(1),n.qc("ngIf",!t.loading))},directives:[y.E,y.p,y.i,y.c,y.o,y.h,y.A,y.t,y.D,c.s,c.t],pipes:[c.G],styles:[""]}),C),F=function(e){return[e]};function I(e,t){if(1&e&&(n.Zb(0,"button",17),n.Hc(1),n.kc(2,"uppercase"),n.Yb()),2&e){var i=n.jc();n.qc("routerLink",n.tc(4,F,"/contractor/documents/upload/"+i.docType)),n.Hb(1),n.Jc(" UPLOAD ",n.lc(2,2,i.docType)," DOCUMENT ")}}var D=function(){return["/contractor/documents/audit/add"]};function x(e,t){1&e&&(n.Zb(0,"button",17),n.Hc(1," UPLOAD AUDIT DOCUMENT "),n.Yb()),2&e&&n.qc("routerLink",n.sc(1,D))}function q(e,t){1&e&&(n.Zb(0,"th"),n.Hc(1,"Certificate Number"),n.Yb())}function j(e,t){1&e&&(n.Zb(0,"th"),n.Hc(1,"Year"),n.Yb())}function A(e,t){if(1&e&&n.Ub(0,"img",23),2&e){var i=n.jc().$implicit;n.qc("src",i.imageUrl,n.Ac)}}function L(e,t){1&e&&n.Ub(0,"img",24)}function _(e,t){if(1&e&&(n.Zb(0,"td"),n.Zb(1,"div"),n.Hc(2),n.Yb(),n.Yb()),2&e){var i=n.jc().$implicit;n.Hb(2),n.Jc(" ",i.certificateNum," ")}}function N(e,t){if(1&e&&(n.Zb(0,"td"),n.Zb(1,"div"),n.Hc(2),n.Yb(),n.Yb()),2&e){var i=n.jc().$implicit;n.Hb(2),n.Jc(" ",i.year," ")}}function O(e,t){if(1&e){var i=n.ac();n.Zb(0,"tr"),n.Zb(1,"td"),n.Zb(2,"div"),n.Fc(3,A,1,1,"img",18),n.Fc(4,L,1,0,"img",19),n.Yb(),n.Yb(),n.Zb(5,"td"),n.Zb(6,"div"),n.Hc(7),n.Yb(),n.Yb(),n.Fc(8,_,3,1,"td",12),n.Fc(9,N,3,1,"td",12),n.Zb(10,"td",20),n.Zb(11,"button",21),n.hc("click",(function(){n.yc(i);var e=t.$implicit;return n.jc().setDocument(e)})),n.Hc(12,"Edit"),n.Yb(),n.Zb(13,"button",22),n.hc("click",(function(){n.yc(i);var e=t.$implicit,c=n.jc(),o=n.wc(31);return c.openModal(o,e)})),n.Hc(14,"View"),n.Yb(),n.Yb(),n.Yb()}if(2&e){var c=t.$implicit,o=n.jc();n.Hb(3),n.qc("ngIf","audit"!==o.docType),n.Hb(1),n.qc("ngIf","audit"===o.docType),n.Hb(3),n.Jc(" ",c.description||"Description not available"," "),n.Hb(1),n.qc("ngIf","audit"!==o.docType),n.Hb(1),n.qc("ngIf","audit"!==o.docType)}}function M(e,t){1&e&&(n.Zb(0,"div",25),n.Zb(1,"span"),n.Hc(2,"No documents added, add documents to view them here."),n.Yb(),n.Yb())}function R(e,t){if(1&e){var i=n.ac();n.Zb(0,"div",26),n.Zb(1,"h4",27),n.Hc(2,"Document"),n.Yb(),n.Zb(3,"button",28),n.hc("click",(function(){return n.yc(i),n.jc().modalRef.hide()})),n.Zb(4,"span",29),n.Hc(5,"\xd7"),n.Yb(),n.Yb(),n.Yb(),n.Zb(6,"div",30),n.Ub(7,"app-view",31),n.Yb(),n.Zb(8,"div",32),n.Zb(9,"button",33),n.hc("click",(function(){return n.yc(i),n.jc().modalRef.hide()})),n.Hc(10,"Close"),n.Yb(),n.Yb()}if(2&e){var c=n.jc();n.Hb(7),n.qc("doctype",c.docType)}}function J(e,t){if(1&e&&(n.Zb(0,"option",26),n.Hc(1),n.Yb()),2&e){var i=t.$implicit;n.qc("value",i),n.Hb(1),n.Jc(" ",i," ")}}function G(e,t){1&e&&(n.Zb(0,"div",27),n.Zb(1,"div",28),n.Zb(2,"span",29),n.Hc(3,"Loading..."),n.Yb(),n.Yb(),n.Zb(4,"div",30),n.Zb(5,"span",29),n.Hc(6,"Loading..."),n.Yb(),n.Yb(),n.Zb(7,"div",31),n.Zb(8,"span",29),n.Hc(9,"Loading..."),n.Yb(),n.Yb(),n.Yb())}function P(e,t){1&e&&(n.Zb(0,"button",32),n.Ub(1,"span",33),n.Hc(2," Loading... "),n.Yb())}function $(e,t){if(1&e){var i=n.ac();n.Zb(0,"button",34),n.hc("click",(function(){return n.yc(i),n.jc().updateDocument()})),n.Hc(1,"Update Document"),n.Yb()}}function B(e,t){1&e&&(n.Zb(0,"div",24),n.Zb(1,"div",25),n.Zb(2,"span",26),n.Hc(3,"Loading..."),n.Yb(),n.Yb(),n.Zb(4,"div",27),n.Zb(5,"span",26),n.Hc(6,"Loading..."),n.Yb(),n.Yb(),n.Zb(7,"div",28),n.Zb(8,"span",26),n.Hc(9,"Loading..."),n.Yb(),n.Yb(),n.Yb())}function E(e,t){1&e&&(n.Zb(0,"button",29),n.Ub(1,"span",30),n.Hc(2," Loading... "),n.Yb())}function z(e,t){if(1&e){var i=n.ac();n.Zb(0,"button",31),n.hc("click",(function(){return n.yc(i),n.jc().updateDocument()})),n.Hc(1),n.kc(2,"titlecase"),n.Yb()}if(2&e){var c=n.jc();n.Hb(1),n.Jc(" ",n.lc(2,1,c.docType)," Document ")}}var K,W,Q,V,X,ee=[{path:"",component:v},{path:":doc",component:(Q=function(){function e(t,i,c,n,r,a){var s=this;_classCallCheck(this,e),this.crudService=t,this.utilService=i,this.route=c,this.modalService=n,this.companyService=r,this.router=a,this.viewType={cac:"api/cac/allByCompanyId",irr:"api/irr/allIrrByCompanyId",itf:"api/itf/allIrrByCompanyId",nsitf:"api/nsitf/allIrrByCompanyId",pencomm:"api/pension/allIrrByCompanyId",tax:"api/taxclearance/allByCompanyId",audit:"api/auditedaccount/allByCompanyId"},this.documents=[],this.docType="",this.getUrl="",this.loading=!1,this.navigationSubscription=this.router.events.subscribe((function(e){var t=s.route.snapshot.params.doc;s.docType=t;var i=s.utilService.getCompany().id;s.getUrl="".concat(s.viewType[t],"/").concat(i),s.documents=[],e instanceof o.b&&s.getAllDocuments()}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"getAllDocuments",value:function(){var e=this;this.loading=!0,this.crudService.getRequest(this.getUrl).subscribe((function(t){console.log(t),e.documents=t,e.loading=!1}),(function(t){console.log(t),e.loading=!1}))}},{key:"setDocument",value:function(e){this.companyService.setDocument(e),this.router.navigate("audit"===this.docType?["/contractor/documents/audit/edit"]:["/contractor/documents/edit/"+this.docType])}},{key:"openModal",value:function(e,t){this.companyService.setDocument(t),this.modalRef=this.modalService.show(e,Object.assign({},{class:"gray modal-lg"}))}},{key:"ngOnDestroy",value:function(){this.navigationSubscription&&this.navigationSubscription.unsubscribe()}}]),e}(),Q.\u0275fac=function(e){return new(e||Q)(n.Tb(r.a),n.Tb(a.a),n.Tb(o.a),n.Tb(d.a),n.Tb(s.a),n.Tb(o.c))},Q.\u0275cmp=n.Nb({type:Q,selectors:[["app-doc-view"]],decls:32,vars:10,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","d-flex","justify-content-between"],[1,"col-sm-12","col-md-8"],["class","btn bg-theme-primary text-white m-2 my-sm-0 col-sm-12 col-md-4",3,"routerLink",4,"ngIf"],[1,"card-body"],["summary","List of projects","aria-role","table",1,"table","stripped","table-responsive-sm","table-xs-responsive","table-hover","table-outline","mb-0"],["span","1",2,"width","20%"],["span","1",2,"width","35%"],["span","1",2,"width","15%"],[1,"thead-light"],[4,"ngIf"],[1,""],[4,"ngFor","ngForOf"],["class","my-5 text-center",4,"ngIf"],["template",""],[1,"btn","bg-theme-primary","text-white","m-2","my-sm-0","col-sm-12","col-md-4",3,"routerLink"],["width","150","height","150","alt","","srcset","",3,"src",4,"ngIf"],["src","../../../../../assets/img/pdf.png","width","150","height","150","alt","","srcset","",4,"ngIf"],[1,"text-center"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-theme-primary","m-2",3,"click"],["width","150","height","150","alt","","srcset","",3,"src"],["src","../../../../../assets/img/pdf.png","width","150","height","150","alt","","srcset",""],[1,"my-5","text-center"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"doctype"],[1,"modal-footer"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"div",2),n.Zb(3,"div",3),n.Zb(4,"h2",4),n.Hc(5),n.kc(6,"uppercase"),n.Yb(),n.Fc(7,I,3,6,"button",5),n.Fc(8,x,2,2,"button",5),n.Yb(),n.Zb(9,"div",6),n.Zb(10,"table",7),n.Zb(11,"colgroup"),n.Ub(12,"col",8),n.Ub(13,"col",9),n.Ub(14,"col",10),n.Ub(15,"col",10),n.Ub(16,"col",10),n.Yb(),n.Zb(17,"thead",11),n.Zb(18,"tr"),n.Zb(19,"th"),n.Hc(20,"Document"),n.Yb(),n.Zb(21,"th"),n.Hc(22,"Document Description"),n.Yb(),n.Fc(23,q,2,0,"th",12),n.Fc(24,j,2,0,"th",12),n.Zb(25,"th"),n.Hc(26,"Action"),n.Yb(),n.Yb(),n.Yb(),n.Zb(27,"tbody",13),n.Fc(28,O,15,5,"tr",14),n.Yb(),n.Yb(),n.Fc(29,M,3,0,"div",15),n.Yb(),n.Fc(30,R,11,1,"ng-template",null,16,n.Gc),n.Yb(),n.Yb(),n.Yb()),2&e&&(n.Hb(5),n.Kc("",n.lc(6,8,t.docType)," DOCUMENTS(",t.documents.length,")"),n.Hb(2),n.qc("ngIf","audit"!==t.docType),n.Hb(1),n.qc("ngIf","audit"===t.docType),n.Hb(15),n.qc("ngIf","audit"!==t.docType),n.Hb(1),n.qc("ngIf","audit"!==t.docType),n.Hb(4),n.qc("ngForOf",t.documents),n.Hb(1),n.qc("ngIf",!t.loading&&0===t.documents.length))},directives:[c.t,c.s,o.d,m],pipes:[c.G],styles:[""]}),Q)},{path:"upload/:doc",component:k},{path:"edit/:doc",component:(W=function(){function e(t,i,c,o,n,r,a){_classCallCheck(this,e),this.crudService=t,this.utilService=i,this.swalService=c,this.companyService=o,this.route=n,this.router=r,this.form=a,this.uploadType={cac:"api/cac/edit",irr:"api/irr/edit",itf:"api/itf/edit",nsitf:"api/nsitf/edit",pencomm:"api/pension/edit",tax:"api/taxclearance/edit"},this.document=this.companyService.getDocument(),this.loading=!1,this.uploadLoading=!1,this.docType="",this.years=this.getYear(25)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this.route.snapshot.params.doc;this.docType=e,this.postUrl=this.uploadType[e],this.documentForm=this.form.group({description:[this.document.description,y.C.required],certificateNum:[this.document.certificateNum,y.C.required],year:[this.document.year,y.C.required]})}},{key:"getYear",value:function(e){var t=(new Date).getFullYear();return _toConsumableArray(Array(e).keys()).map((function(e){return t-e}))}},{key:"updateDocument",value:function(){var e=this;this.loading=!0,this.documentForm.value.imageUrl=this.document.imageUrl,this.documentForm.value.id=this.document.id,this.documentForm.value.companyId=this.utilService.getCompany().id,this.crudService.putRequest(this.postUrl,this.documentForm.value).subscribe((function(t){0===t.code?(console.log(t),e.loading=!1,e.swalService.success("Updated Successfully"),e.router.navigate(["/contractor/documents/"+e.docType])):e.swalService.error("An error occured")}),(function(t){console.log(t),e.loading=!1,e.swalService.error(t.message)}))}},{key:"getUploadUrl",value:function(e){var t=this;this.uploadLoading=!0;var i=e.target.files[0],c=new FormData;c.append("file",i,i.name),this.crudService.postRequestFile("uploadMe",c).subscribe((function(e){0===e.code?(t.uploadLoading=!1,t.document.imageUrl=e.message,t.swalService.success("File path saved.")):t.swalService.error("An error occured")}),(function(e){console.log(e),t.uploadLoading=!1,t.swalService.error("Could not get file path.")}))}}]),e}(),W.\u0275fac=function(e){return new(e||W)(n.Tb(r.a),n.Tb(a.a),n.Tb(Y.a),n.Tb(s.a),n.Tb(o.a),n.Tb(o.c),n.Tb(y.f))},W.\u0275cmp=n.Nb({type:W,selectors:[["app-doc-edit"]],decls:39,vars:9,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-10"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","text-input",1,"col-md-3","col-form-label"],[1,"col-md-9"],["type","text","id","description","formControlName","description","name","description","placeholder","Document Description",1,"form-control"],["type","text","id","certificateNum","formControlName","certificateNum","name","certificateNum","placeholder","Certificate Number",1,"form-control"],["for","year",1,"col-md-3","col-form-label"],["id","year","name","year","formControlName","year",1,"form-control"],["value","select year"],[3,"value",4,"ngFor","ngForOf"],["class","row d-flex justify-content-center my-2",4,"ngIf"],[1,"col-md-4"],[1,"mx-auto","my-1"],["width","80%","height","120","alt","","srcset","",3,"src"],[1,"col-md-8","my-auto"],["type","file","id","file-input","name","file-input",3,"change"],[1,"mt-1"],[1,"text-danger"],[1,"card-footer"],["class","btn btn-success mx-3","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-success mx-3",3,"click",4,"ngIf"],[3,"value"],[1,"row","d-flex","justify-content-center","my-2"],["role","status",1,"spinner-grow","text-success"],[1,"sr-only"],["role","status",1,"spinner-grow","text-primary"],["role","status",1,"spinner-grow","text-info"],["type","button","disabled","",1,"btn","btn-success","mx-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-success","mx-3",3,"click"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"div",2),n.Zb(3,"div",3),n.Hc(4),n.kc(5,"uppercase"),n.Yb(),n.Zb(6,"div",4),n.Zb(7,"form",5),n.hc("ngSubmit",(function(){return t.updateDocument()})),n.Zb(8,"div",6),n.Zb(9,"label",7),n.Hc(10,"Document Description"),n.Yb(),n.Zb(11,"div",8),n.Ub(12,"input",9),n.Yb(),n.Yb(),n.Zb(13,"div",6),n.Zb(14,"label",7),n.Hc(15,"Certificate Number"),n.Yb(),n.Zb(16,"div",8),n.Ub(17,"input",10),n.Yb(),n.Yb(),n.Zb(18,"div",6),n.Zb(19,"label",11),n.Hc(20,"Year"),n.Yb(),n.Zb(21,"div",8),n.Zb(22,"select",12),n.Zb(23,"option",13),n.Hc(24,"--- Select Year ---"),n.Yb(),n.Fc(25,J,2,2,"option",14),n.Yb(),n.Yb(),n.Yb(),n.Fc(26,G,10,0,"div",15),n.Zb(27,"div",6),n.Zb(28,"div",16),n.Zb(29,"div",17),n.Ub(30,"img",18),n.Yb(),n.Yb(),n.Zb(31,"div",19),n.Zb(32,"input",20),n.hc("change",(function(e){return t.getUploadUrl(e)})),n.Yb(),n.Zb(33,"div",21),n.Zb(34,"small",22),n.Hc(35," (Document should be in jpeg/jpg/png format and not more than 4MB)."),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Zb(36,"div",23),n.Fc(37,P,3,0,"button",24),n.Fc(38,$,2,0,"button",25),n.Yb(),n.Yb(),n.Yb(),n.Yb()),2&e&&(n.Hb(4),n.Jc(" Update ",n.lc(5,7,t.docType)," Document "),n.Hb(3),n.qc("formGroup",t.documentForm),n.Hb(18),n.qc("ngForOf",t.years),n.Hb(1),n.qc("ngIf",t.uploadLoading),n.Hb(4),n.qc("src",t.document.imageUrl,n.Ac),n.Hb(7),n.qc("ngIf",t.loading),n.Hb(1),n.qc("ngIf",!t.loading))},directives:[y.E,y.p,y.i,y.c,y.o,y.h,y.A,y.t,y.D,c.s,c.t],pipes:[c.G],styles:["input[type=file][_ngcontent-%COMP%]{width:80%}"]}),W)},{path:"audit/:type",component:(K=function(){function e(t,i,c,o,n,r,a){_classCallCheck(this,e),this.crudService=t,this.utilService=i,this.swalService=c,this.companyService=o,this.route=n,this.router=r,this.form=a,this.uploadType={add:"api/auditedaccount/add",edit:"api/auditedaccount/edit"},this.loading=!1,this.uploadLoading=!1,this.docType="",this.document={id:0,description:"",imageUrl:""},this.years=this.getYear(25)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this.route.snapshot.params.type;this.docType=e,this.postUrl=this.uploadType[e],"edit"===this.docType&&(document=this.companyService.getDocument()),this.documentForm=this.form.group({description:[this.document.description,y.C.required]})}},{key:"getYear",value:function(e){var t=(new Date).getFullYear();return _toConsumableArray(Array(e).keys()).map((function(e){return t-e}))}},{key:"updateDocument",value:function(){var e=this;this.loading=!0,this.documentForm.value.id=this.document.id,this.documentForm.value.imageUrl=this.document.imageUrl,this.documentForm.value.companyId=this.utilService.getCompany().id,"add"===this.docType?this.crudService.postRequest(this.postUrl,this.documentForm.value).subscribe((function(t){0===t.code?(console.log(t),e.loading=!1,e.swalService.success("Uploaded Successfully"),e.router.navigate(["/contractor/documents/audit"])):(e.loading=!1,e.swalService.error("An error occured"))}),(function(t){console.log(t),e.loading=!1,e.swalService.error(t.message)})):this.crudService.putRequest(this.postUrl,this.documentForm.value).subscribe((function(t){0===t.code?(console.log(t),e.loading=!1,e.swalService.success("Updated Successfully"),e.router.navigate(["/contractor/documents/audit"])):(e.loading=!1,e.swalService.error("An error occured"))}),(function(t){console.log(t),e.loading=!1,e.swalService.error(t.message)}))}},{key:"getUploadUrl",value:function(e){var t=this;this.uploadLoading=!0;var i=e.target.files[0],c=new FormData;c.append("file",i,i.name),this.crudService.postRequestFile("uploadMePdf",c).subscribe((function(e){0===e.code?(t.uploadLoading=!1,t.document.imageUrl=e.message,t.swalService.success("File path saved.")):t.swalService.error("An error occured")}),(function(e){console.log(e),t.uploadLoading=!1,t.swalService.error("Could not get file path.")}))}}]),e}(),K.\u0275fac=function(e){return new(e||K)(n.Tb(r.a),n.Tb(a.a),n.Tb(Y.a),n.Tb(s.a),n.Tb(o.a),n.Tb(o.c),n.Tb(y.f))},K.\u0275cmp=n.Nb({type:K,selectors:[["app-audit"]],decls:33,vars:7,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-10"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","text-input",1,"col-md-3","col-form-label"],[1,"col-md-9"],["type","text","id","description","formControlName","description","name","description","placeholder","2019.2018.2017 Audited Account",1,"form-control"],["class","row d-flex justify-content-center my-2",4,"ngIf"],[1,"col-md-4"],[1,"mx-auto","my-1"],["src","../../../../../assets/img/pdf.png","width","80%","height","120","alt","","srcset",""],[1,"col-md-8","my-auto"],["type","file","id","file-input","name","file-input",3,"change"],[1,"mt-1"],[1,"text-danger"],[1,"col-md-12","my-3"],[1,"col-md-12"],["width","100%","height","300","src","https://www.youtube.com/embed/vMzJWzmiYZU","frameborder","0","allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture","allowfullscreen",""],[1,"card-footer"],["class","btn btn-success mx-3","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-success mx-3",3,"click",4,"ngIf"],[1,"row","d-flex","justify-content-center","my-2"],["role","status",1,"spinner-grow","text-success"],[1,"sr-only"],["role","status",1,"spinner-grow","text-primary"],["role","status",1,"spinner-grow","text-info"],["type","button","disabled","",1,"btn","btn-success","mx-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-success","mx-3",3,"click"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"div",2),n.Zb(3,"div",3),n.Hc(4),n.kc(5,"titlecase"),n.Yb(),n.Zb(6,"div",4),n.Zb(7,"form",5),n.hc("ngSubmit",(function(){return t.updateDocument()})),n.Zb(8,"div",6),n.Zb(9,"label",7),n.Hc(10,"Document Description"),n.Yb(),n.Zb(11,"div",8),n.Ub(12,"input",9),n.Yb(),n.Yb(),n.Fc(13,B,10,0,"div",10),n.Zb(14,"div",6),n.Zb(15,"div",11),n.Zb(16,"div",12),n.Ub(17,"img",13),n.Yb(),n.Yb(),n.Zb(18,"div",14),n.Zb(19,"input",15),n.hc("change",(function(e){return t.getUploadUrl(e)})),n.Yb(),n.Zb(20,"div",16),n.Zb(21,"small",17),n.Hc(22," Audited account for last 3 years, Document should be in pdf format and not more than 16MB."),n.Yb(),n.Zb(23,"div",18),n.Zb(24,"div",19),n.Zb(25,"details"),n.Zb(26,"summary"),n.Hc(27,"How to convert pictures to pdf"),n.Yb(),n.Zb(28,"div"),n.Ub(29,"iframe",20),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Zb(30,"div",21),n.Fc(31,E,3,0,"button",22),n.Fc(32,z,3,3,"button",23),n.Yb(),n.Yb(),n.Yb(),n.Yb()),2&e&&(n.Hb(4),n.Jc("",n.lc(5,5,t.docType)," Audit Document"),n.Hb(3),n.qc("formGroup",t.documentForm),n.Hb(6),n.qc("ngIf",t.uploadLoading),n.Hb(18),n.qc("ngIf",t.loading),n.Hb(1),n.qc("ngIf",!t.loading))},directives:[y.E,y.p,y.i,y.c,y.o,y.h,c.t],pipes:[c.F],styles:["[_ngcontent-%COMP%]:focus{outline:none}"]}),K)}],te=((X=function e(){_classCallCheck(this,e)}).\u0275mod=n.Rb({type:X}),X.\u0275inj=n.Qb({factory:function(e){return new(e||X)},imports:[[o.g.forChild(ee)],o.g]}),X),ie=((V=function e(){_classCallCheck(this,e)}).\u0275mod=n.Rb({type:V}),V.\u0275inj=n.Qb({factory:function(e){return new(e||V)},imports:[[c.c,te,y.k,y.y,d.b.forRoot(),l.b]]}),V)}}]);