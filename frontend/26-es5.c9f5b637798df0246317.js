function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{C6zd:function(e,t,i){"use strict";i.r(t),i.d(t,"StaffModule",(function(){return B}));var a,o=i("ofXK"),r=i("tyNb"),n=i("fXoL"),c=i("SiJz"),l=i("rvnR"),b=i("DaGL"),s=i("1LjI"),f=i("K3ix"),d=((a=function(){function e(t,i){_classCallCheck(this,e),this.companyService=t,this.router=i,this.staff=this.companyService.getStaff()}return _createClass(e,[{key:"ngOnInit",value:function(){console.log(this.staff)}},{key:"setStaff",value:function(e){this.companyService.setStaff(e),this.router.navigate(["/contractor/staff/edit-staff"])}}]),e}()).\u0275fac=function(e){return new(e||a)(n.Tb(s.a),n.Tb(r.c))},a.\u0275cmp=n.Nb({type:a,selectors:[["app-view-staff"]],decls:27,vars:11,consts:[[1,"row"],[1,"col-md-12"],["summary","List of projects","aria-role","table",1,"table","table-responsive-sm","table-xs-responsive","table-hover","table-outline","mb-0"],[1,"mx-auto"],[1,"d-flex","justify-content-center"],["width","200","height","200","alt","","srcset","",3,"src"],[1,"profile-header","bg-theme-primary","text-white"],[1,"font-weight-bold","text-theme-primary","py-2","text-left"],[1,"py-2"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"table",2),n.Zb(3,"tbody",3),n.Ub(4,"tr"),n.Zb(5,"tr"),n.Zb(6,"td"),n.Zb(7,"div",4),n.Ub(8,"img",5),n.Yb(),n.Yb(),n.Zb(9,"td"),n.Zb(10,"div",6),n.Hc(11),n.Yb(),n.Zb(12,"div",7),n.Hc(13),n.Yb(),n.Zb(14,"div",7),n.Hc(15),n.Yb(),n.Zb(16,"div"),n.Zb(17,"div",8),n.Zb(18,"h3"),n.Hc(19,"Profile"),n.Yb(),n.Zb(20,"div"),n.Hc(21),n.Yb(),n.Yb(),n.Zb(22,"div",8),n.Zb(23,"h3"),n.Hc(24,"Qualification"),n.Yb(),n.Zb(25,"div"),n.Hc(26),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb()),2&e&&(n.Hb(8),n.qc("src",t.staff.imageUrl,n.Ac),n.Hb(3),n.Lc(" ",t.staff.firstName," ",t.staff.lastName," - ",t.staff.designation," "),n.Hb(2),n.Kc(" Phone No: ",t.staff.phoneNumber," | Email: ",t.staff.email," "),n.Hb(2),n.Lc(" Experience: ",t.staff.yearsOfExperience," ",t.staff.yearsOfExperience>1?"years":"year"," | Sex: ",t.staff.gender," "),n.Hb(6),n.Ic(t.staff.profile),n.Hb(5),n.Ic(t.staff.qualification))},styles:[".profile-header[_ngcontent-%COMP%]{padding:.5rem 1rem;margin-bottom:0;border-bottom:1px solid #c8ced3;font-size:1.3rem}"]}),a);function m(e,t){if(1&e){var i=n.ac();n.Zb(0,"div",11),n.Zb(1,"div",12),n.Zb(2,"div",13),n.Zb(3,"div",14),n.Ub(4,"img",15),n.Zb(5,"div",16),n.Zb(6,"div",17),n.Hc(7),n.Yb(),n.Yb(),n.Yb(),n.Zb(8,"div",18),n.Zb(9,"strong",19),n.Hc(10,"Designation:"),n.Yb(),n.Hc(11),n.Yb(),n.Zb(12,"div",20),n.Zb(13,"div",21),n.Zb(14,"strong",19),n.Hc(15,"Email:"),n.Yb(),n.Hc(16),n.Yb(),n.Yb(),n.Zb(17,"div",20),n.Zb(18,"div",21),n.Zb(19,"strong",19),n.Hc(20,"Phone Number:"),n.Yb(),n.Hc(21),n.Yb(),n.Yb(),n.Zb(22,"div",22),n.Zb(23,"div",23),n.Zb(24,"button",24),n.hc("click",(function(){n.yc(i);var e=t.$implicit;return n.jc().setStaff(e,"edit")})),n.Hc(25,"Edit Profile"),n.Yb(),n.Yb(),n.Zb(26,"div",25),n.Zb(27,"button",26),n.hc("click",(function(){n.yc(i);var e=t.$implicit;return n.jc().setStaff(e)})),n.Hc(28,"View Profile"),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb()}if(2&e){var a=t.$implicit;n.Hb(4),n.qc("src",a.imageUrl,n.Ac),n.Hb(3),n.Kc("",a.firstName," ",a.lastName,""),n.Hb(4),n.Jc(" ",a.designation," "),n.Hb(5),n.Jc(" ",a.email," "),n.Hb(5),n.Jc(" 0",a.phoneNumber," ")}}function u(e,t){1&e&&(n.Zb(0,"div",27),n.Ub(1,"i",28),n.Hc(2," fetching staff... "),n.Yb())}function p(e,t){1&e&&(n.Zb(0,"div",27),n.Zb(1,"span"),n.Hc(2,"No staff added, please add staff profiles to view them here."),n.Yb(),n.Yb())}function g(e,t){if(1&e){var i=n.ac();n.Zb(0,"div",29),n.Zb(1,"h4",30),n.Hc(2,"Staff Profile"),n.Yb(),n.Zb(3,"button",31),n.hc("click",(function(){return n.yc(i),n.jc().modalRef.hide()})),n.Zb(4,"span",32),n.Hc(5,"\xd7"),n.Yb(),n.Yb(),n.Yb(),n.Zb(6,"div",33),n.Ub(7,"app-view-staff"),n.Yb(),n.Zb(8,"div",34),n.Zb(9,"button",35),n.hc("click",(function(){return n.yc(i),n.jc().modalRef.hide()})),n.Hc(10,"Close"),n.Yb(),n.Yb()}}var v,h=function(){return["/contractor/staff/create-staff"]},Y=((v=function(){function e(t,i,a,o,r,n){_classCallCheck(this,e),this.crudService=t,this.utilService=i,this.swalService=a,this.companyService=o,this.router=r,this.modalService=n,this.staffProfiles=[],this.loading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.getAllStaffProfile()}},{key:"getAllStaffProfile",value:function(){var e=this;this.loading=!0;var t=this.utilService.getCompany().id,i=this.utilService.getToken();this.crudService.getRequestImAuth("api/staffprofile/allByCompanyId/"+t,i).subscribe((function(t){console.log(t),e.loading=!1,e.staffProfiles=t}),(function(t){console.log(t),e.loading=!1,e.swalService.error("An Error occured, Couldn't fetch staff profile")}))}},{key:"setStaff",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"view";return this.companyService.setStaff(e),this.router.navigate("edit"===t?["/contractor/staff/edit-staff"]:["/contractor/staff/profile"])}},{key:"openModal",value:function(e,t){this.companyService.setStaff(t),this.modalRef=this.modalService.show(e,Object.assign({},{class:"gray modal-lg"}))}}]),e}()).\u0275fac=function(e){return new(e||v)(n.Tb(c.a),n.Tb(l.a),n.Tb(b.a),n.Tb(s.a),n.Tb(r.c),n.Tb(f.a))},v.\u0275cmp=n.Nb({type:v,selectors:[["app-staff"]],decls:16,vars:6,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-12"],[1,"card"],[1,"card-header","d-flex","justify-content-between"],[1,"btn","bg-theme-primary","text-white","m-2","my-sm-0",3,"routerLink"],[1,"card-body"],[1,"py-3","my-2"],[1,"row"],["class","col-md-4 my-3",4,"ngFor","ngForOf"],["class","my-5 text-center",4,"ngIf"],["template",""],[1,"col-md-4","my-3"],[1,"container"],[1,"card-inner","p-2"],[1,"card-img"],["alt","staff image","srcset","",3,"src"],[1,"card-img-content"],[1,"title","p-2"],[1,"mt-3","px-2","my-1"],[1,"mr-1"],[1,"d-flex"],[1,"px-2"],[1,"d-flex","my-2","p-2"],[1,""],[1,"btn","btn-warning",3,"click"],[1,"ml-auto"],[1,"btn","btn-theme-primary",3,"click"],[1,"my-5","text-center"],[1,"fa","fa-spinner","fa-spin","mr-2"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"div",2),n.Zb(3,"div",3),n.Zb(4,"h2"),n.Hc(5),n.Yb(),n.Zb(6,"button",4),n.Hc(7," Create Staff "),n.Yb(),n.Yb(),n.Zb(8,"div",5),n.Zb(9,"div",6),n.Zb(10,"div",7),n.Fc(11,m,29,6,"div",8),n.Yb(),n.Yb(),n.Fc(12,u,3,0,"div",9),n.Fc(13,p,3,0,"div",9),n.Yb(),n.Fc(14,g,11,0,"ng-template",null,10,n.Gc),n.Yb(),n.Yb(),n.Yb()),2&e&&(n.Hb(5),n.Jc("Staff(",t.staffProfiles.length,")"),n.Hb(1),n.qc("routerLink",n.sc(5,h)),n.Hb(5),n.qc("ngForOf",t.staffProfiles),n.Hb(1),n.qc("ngIf",t.loading),n.Hb(1),n.qc("ngIf",!t.loading&&0===t.staffProfiles.length))},directives:[r.d,o.s,o.t,d],styles:[".card-inner[_ngcontent-%COMP%]{border:none;border-radius:5px;background-color:#fff;box-shadow:0 4px 20px rgba(0,0,0,.1);min-height:250px}.card-inner[_ngcontent-%COMP%]:hover{transform:scale(1.015)}.card-img[_ngcontent-%COMP%]{position:relative}.card-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:250px;background:linear-gradient(rgba(0,0,0,.3),rgba(0,0,0,.3))}.card-img[_ngcontent-%COMP%]   .card-img-content[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;color:#fff;width:100%;font-size:1.5rem;background:linear-gradient(rgba(128,92,92,.7),rgba(0,0,0,.7))}"]}),v),Z=i("3Pt+");function y(e,t){1&e&&(n.Zb(0,"div",37),n.Zb(1,"div",38),n.Zb(2,"span",39),n.Hc(3,"Loading..."),n.Yb(),n.Yb(),n.Zb(4,"div",40),n.Zb(5,"span",39),n.Hc(6,"Loading..."),n.Yb(),n.Yb(),n.Zb(7,"div",41),n.Zb(8,"span",39),n.Hc(9,"Loading..."),n.Yb(),n.Yb(),n.Yb())}function H(e,t){1&e&&(n.Zb(0,"button",42),n.Ub(1,"span",43),n.Hc(2," Loading... "),n.Yb())}function C(e,t){if(1&e){var i=n.ac();n.Zb(0,"button",44),n.hc("click",(function(){return n.yc(i),n.jc().addStaff()})),n.Hc(1,"Add Staff"),n.Yb()}}function x(e,t){1&e&&(n.Zb(0,"div",37),n.Zb(1,"div",38),n.Zb(2,"span",39),n.Hc(3,"Loading..."),n.Yb(),n.Yb(),n.Zb(4,"div",40),n.Zb(5,"span",39),n.Hc(6,"Loading..."),n.Yb(),n.Yb(),n.Zb(7,"div",41),n.Zb(8,"span",39),n.Hc(9,"Loading..."),n.Yb(),n.Yb(),n.Yb())}function S(e,t){1&e&&(n.Zb(0,"button",42),n.Ub(1,"span",43),n.Hc(2," Loading... "),n.Yb())}function w(e,t){if(1&e){var i=n.ac();n.Zb(0,"button",44),n.hc("click",(function(){return n.yc(i),n.jc().updateStaff()})),n.Hc(1,"Update Staff"),n.Yb()}}function q(e,t){if(1&e&&(n.Zb(0,"div",21),n.Zb(1,"h4"),n.Hc(2),n.Yb(),n.Zb(3,"p"),n.Hc(4),n.Yb(),n.Yb()),2&e){var i=n.jc(2);n.Hb(2),n.Kc("",i.profile.firstName," ",i.profile.lastName,""),n.Hb(2),n.Ic(i.profile.designation)}}function N(e,t){if(1&e&&(n.Xb(0),n.Zb(1,"div",5),n.Zb(2,"div",6),n.Zb(3,"div",7),n.Zb(4,"div",8),n.Ub(5,"img",9),n.Yb(),n.Fc(6,q,5,3,"div",10),n.Yb(),n.Yb(),n.Yb(),n.Zb(7,"div",11),n.Zb(8,"div",6),n.Zb(9,"div",12),n.Zb(10,"div",13),n.Zb(11,"div",14),n.Zb(12,"div",15),n.Zb(13,"h4"),n.Ub(14,"i",16),n.Hc(15," Email "),n.Yb(),n.Zb(16,"p"),n.Hc(17),n.Yb(),n.Yb(),n.Zb(18,"div",15),n.Zb(19,"h4"),n.Ub(20,"i",17),n.Hc(21," Phone "),n.Yb(),n.Zb(22,"p"),n.Hc(23),n.Yb(),n.Yb(),n.Zb(24,"div",15),n.Zb(25,"h4"),n.Ub(26,"i",18),n.Hc(27," Gender "),n.Yb(),n.Zb(28,"p"),n.Hc(29),n.Yb(),n.Yb(),n.Zb(30,"div",15),n.Zb(31,"h4"),n.Ub(32,"i",19),n.Hc(33," Years of Experience "),n.Yb(),n.Zb(34,"p"),n.Hc(35),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Zb(36,"div",6),n.Zb(37,"div",12),n.Zb(38,"div",20),n.Zb(39,"h4"),n.Hc(40," Profile "),n.Yb(),n.Zb(41,"p"),n.Hc(42),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Wb()),2&e){var i=n.jc();n.Hb(5),n.qc("src",i.profile.imageUrl,n.Ac),n.Hb(1),n.qc("ngIf",i.profile.firstName||i.profile.lastName),n.Hb(11),n.Ic(i.profile.email||"not available"),n.Hb(6),n.Ic(i.profile.phoneNumber||"not available"),n.Hb(6),n.Ic(i.profile.gender||"not available"),n.Hb(6),n.Jc(" ",i.profile.yearsOfExperience>1?i.profile.yearsOfExperience+" years":i.profile.yearsOfExperience+" year"||!1," "),n.Hb(7),n.Jc(" ",i.profile.profile||"Profile not available"," ")}}function _(e,t){1&e&&(n.Zb(0,"div",28),n.Hc(1," No qualifications available "),n.Yb())}function U(e,t){if(1&e&&(n.Zb(0,"div",33),n.Zb(1,"div",34),n.Ub(2,"img",35),n.Yb(),n.Yb()),2&e){var i=n.jc().$implicit;n.Hb(2),n.qc("src",i.imageUrl||i.logoUrl,n.Ac)}}function O(e,t){if(1&e&&(n.Zb(0,"div",36),n.Zb(1,"h4"),n.Hc(2," Name of Qualification "),n.Yb(),n.Zb(3,"p"),n.Hc(4),n.Yb(),n.Yb()),2&e){var i=n.jc().$implicit;n.Hb(4),n.Ic(i.name||i.clientName)}}function F(e,t){if(1&e&&(n.Zb(0,"div",36),n.Zb(1,"h4"),n.Hc(2," Start Year "),n.Yb(),n.Hc(3),n.Yb()),2&e){var i=n.jc().$implicit;n.Hb(3),n.Jc(" ",i.startYear||""," ")}}function I(e,t){if(1&e&&(n.Zb(0,"div",36),n.Zb(1,"h4"),n.Hc(2," End Year "),n.Yb(),n.Hc(3),n.Yb()),2&e){var i=n.jc().$implicit;n.Hb(3),n.Jc(" ",i.endYear||""," ")}}function P(e,t){if(1&e&&(n.Zb(0,"div",29),n.Zb(1,"div",30),n.Fc(2,U,3,1,"div",31),n.Fc(3,O,5,1,"div",32),n.Fc(4,F,4,1,"div",32),n.Fc(5,I,4,1,"div",32),n.Yb(),n.Yb()),2&e){var i=t.$implicit;n.Hb(2),n.qc("ngIf",i.imageUrl),n.Hb(1),n.qc("ngIf",i.name||i.clientName),n.Hb(1),n.qc("ngIf",i.startYear),n.Hb(1),n.qc("ngIf",i.endYear)}}var k=function(){return["/contractor/staff/qualification/upload"]};function E(e,t){if(1&e&&(n.Xb(0),n.Zb(1,"div",6),n.Zb(2,"div",22),n.Zb(3,"h4"),n.Hc(4," Qualifications "),n.Yb(),n.Zb(5,"a",23),n.Hc(6," Add Qualification "),n.Ub(7,"i",24),n.Yb(),n.Yb(),n.Zb(8,"div",25),n.Fc(9,_,2,0,"div",26),n.Fc(10,P,6,4,"div",27),n.Yb(),n.Yb(),n.Wb()),2&e){var i=t.ngIf;n.Hb(5),n.qc("routerLink",n.sc(3,k)),n.Hb(4),n.qc("ngIf",0===i.length),n.Hb(1),n.qc("ngForOf",i)}}function L(e,t){1&e&&(n.Ub(0,"i",37),n.Hc(1," fetching...\n"))}function j(e,t){1&e&&(n.Zb(0,"div",20),n.Zb(1,"div",21),n.Zb(2,"span",22),n.Hc(3,"Loading..."),n.Yb(),n.Yb(),n.Zb(4,"div",23),n.Zb(5,"span",22),n.Hc(6,"Loading..."),n.Yb(),n.Yb(),n.Zb(7,"div",24),n.Zb(8,"span",22),n.Hc(9,"Loading..."),n.Yb(),n.Yb(),n.Yb())}function M(e,t){1&e&&(n.Zb(0,"button",25),n.Ub(1,"span",26),n.Hc(2," Loading... "),n.Yb())}function T(e,t){if(1&e){var i=n.ac();n.Zb(0,"button",27),n.hc("click",(function(){return n.yc(i),n.jc().uploadQualification()})),n.Hc(1),n.kc(2,"titlecase"),n.Yb()}if(2&e){var a=n.jc();n.Hb(1),n.Jc("",n.lc(2,1,a.docType)," Qualification")}}var A,D,Q,R,J,G,z=[{path:"",data:{title:"Staff"},children:[{path:"",component:Y},{path:"create-staff",component:(R=function(){function e(t,i,a,o,r){_classCallCheck(this,e),this.crudService=t,this.utilService=i,this.swalService=a,this.router=o,this.form=r,this.uploadLoading=!1,this.loading=!1,this.fileUrl="../../../../../assets/img/no-image-available.jpg"}return _createClass(e,[{key:"ngOnInit",value:function(){this.staffForm=this.form.group({firstName:["",Z.C.required],lastName:["",Z.C.required],phoneNumber:["",Z.C.required],email:["",Z.C.required],gender:["",Z.C.required],designation:["",Z.C.required],qualification:["",Z.C.required],yearsOfExperience:["",Z.C.required],profile:["",Z.C.required]})}},{key:"getUploadUrl",value:function(e){var t=this,i=e.target.files[0],a=new FormData;a.append("file",i,i.name),this.uploadLoading=!0,this.crudService.postRequestFile("uploadMe",a).subscribe((function(e){0===e.code?(t.fileUrl=e.message,t.uploadLoading=!1,t.swalService.success("File path saved.")):(t.swalService.error("An error occured"),t.uploadLoading=!1)}),(function(e){console.log(e),t.uploadLoading=!1,t.swalService.error("Could not get file path.")}))}},{key:"addStaff",value:function(){var e=this;this.loading=!0,this.staffForm.value.id=0,this.staffForm.value.companyId=this.utilService.getCompany().id,this.staffForm.value.imageUrl=this.fileUrl,this.crudService.postRequest("/api/staffprofile/add",this.staffForm.value).subscribe((function(t){console.log(t),e.loading=!1,0===t.code?(e.swalService.success(t.message),e.router.navigate(["/contractor/staff/"])):e.swalService.error("An Error Occured")}),(function(t){console.log(t),e.loading=!1,e.swalService.error("An Error Occured")}))}}]),e}(),R.\u0275fac=function(e){return new(e||R)(n.Tb(c.a),n.Tb(l.a),n.Tb(b.a),n.Tb(r.c),n.Tb(Z.f))},R.\u0275cmp=n.Nb({type:R,selectors:[["app-create-staff"]],decls:68,vars:5,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-10"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","firstName",1,"col-md-3","col-form-label"],[1,"col-md-9"],["type","text","id","firstName","formControlName","firstName","name","firstName","placeholder","First Name",1,"form-control"],["for","lastName",1,"col-md-3","col-form-label"],["type","text","id","lastName","formControlName","lastName","name","lastName","placeholder","Last Name",1,"form-control"],["for","phoneNumber",1,"col-md-3","col-form-label"],["type","number","id","phoneNumber","formControlName","phoneNumber","name","phoneNumber","placeholder","Phone Number",1,"form-control"],["for","email",1,"col-md-3","col-form-label"],["type","email","id","email","formControlName","email","name","email","placeholder","name@mail.com",1,"form-control"],["for","gender",1,"col-md-3","col-form-label"],["id","gender","formControlName","gender",1,"form-control"],["value","male"],["value","female"],["for","designation",1,"col-md-3","col-form-label"],["type","text","id","designation","formControlName","designation","name","designation","placeholder","Designation",1,"form-control"],["for","qualification",1,"col-md-3","col-form-label"],["type","text","id","qualification","formControlName","qualification","name","qualification","placeholder","Qualification (SSCE, Bsc, B'Eng, M'Eng, PHD)",1,"form-control"],["for","yearsOfExperience",1,"col-md-3","col-form-label"],["type","number","id","yearsOfExperience","formControlName","yearsOfExperience","name","yearsOfExperience","placeholder","Year(s) Of Experience",1,"form-control"],["for","profile",1,"col-md-3","col-form-label"],["type","text","id","profile","formControlName","profile","name","profile","placeholder","User Profile",1,"form-control"],["class","row d-flex justify-content-center my-2",4,"ngIf"],["for","file-input",1,"col-md-4","col-form-label","my-auto"],[1,"col-md-2"],["width","100%","height","100","alt","","srcset","",3,"src"],[1,"col-md-6","my-auto"],["type","file","id","file-input","name","file-input",3,"change"],[1,"card-footer"],["class","btn btn-success mx-3","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-success mx-3",3,"click",4,"ngIf"],[1,"row","d-flex","justify-content-center","my-2"],["role","status",1,"spinner-grow","text-success"],[1,"sr-only"],["role","status",1,"spinner-grow","text-primary"],["role","status",1,"spinner-grow","text-info"],["type","button","disabled","",1,"btn","btn-success","mx-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-success","mx-3",3,"click"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"div",2),n.Zb(3,"div",3),n.Zb(4,"strong"),n.Hc(5,"Add Staff"),n.Yb(),n.Yb(),n.Zb(6,"div",4),n.Zb(7,"form",5),n.hc("ngSubmit",(function(){return t.addStaff()})),n.Zb(8,"div",6),n.Zb(9,"label",7),n.Hc(10,"First Name"),n.Yb(),n.Zb(11,"div",8),n.Ub(12,"input",9),n.Yb(),n.Yb(),n.Zb(13,"div",6),n.Zb(14,"label",10),n.Hc(15,"Last Name"),n.Yb(),n.Zb(16,"div",8),n.Ub(17,"input",11),n.Yb(),n.Yb(),n.Zb(18,"div",6),n.Zb(19,"label",12),n.Hc(20,"Phone Number"),n.Yb(),n.Zb(21,"div",8),n.Ub(22,"input",13),n.Yb(),n.Yb(),n.Zb(23,"div",6),n.Zb(24,"label",14),n.Hc(25,"Email"),n.Yb(),n.Zb(26,"div",8),n.Ub(27,"input",15),n.Yb(),n.Yb(),n.Zb(28,"div",6),n.Zb(29,"label",16),n.Hc(30,"Gender"),n.Yb(),n.Zb(31,"div",8),n.Zb(32,"select",17),n.Zb(33,"option",18),n.Hc(34,"Male"),n.Yb(),n.Zb(35,"option",19),n.Hc(36,"Female"),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Zb(37,"div",6),n.Zb(38,"label",20),n.Hc(39,"Designation"),n.Yb(),n.Zb(40,"div",8),n.Ub(41,"input",21),n.Yb(),n.Yb(),n.Zb(42,"div",6),n.Zb(43,"label",22),n.Hc(44,"Qualification"),n.Yb(),n.Zb(45,"div",8),n.Ub(46,"input",23),n.Yb(),n.Yb(),n.Zb(47,"div",6),n.Zb(48,"label",24),n.Hc(49,"Year(s) of Experience"),n.Yb(),n.Zb(50,"div",8),n.Ub(51,"input",25),n.Yb(),n.Yb(),n.Zb(52,"div",6),n.Zb(53,"label",26),n.Hc(54,"Profile"),n.Yb(),n.Zb(55,"div",8),n.Ub(56,"textarea",27),n.Yb(),n.Yb(),n.Fc(57,y,10,0,"div",28),n.Zb(58,"div",6),n.Zb(59,"label",29),n.Hc(60,"Staff Image (Optional)"),n.Yb(),n.Zb(61,"div",30),n.Ub(62,"img",31),n.Yb(),n.Zb(63,"div",32),n.Zb(64,"input",33),n.hc("change",(function(e){return t.getUploadUrl(e)})),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Zb(65,"div",34),n.Fc(66,H,3,0,"button",35),n.Fc(67,C,2,0,"button",36),n.Yb(),n.Yb(),n.Yb(),n.Yb()),2&e&&(n.Hb(7),n.qc("formGroup",t.staffForm),n.Hb(50),n.qc("ngIf",t.uploadLoading),n.Hb(5),n.qc("src",t.fileUrl,n.Ac),n.Hb(4),n.qc("ngIf",t.loading),n.Hb(1),n.qc("ngIf",!t.loading))},directives:[Z.E,Z.p,Z.i,Z.c,Z.o,Z.h,Z.u,Z.A,Z.t,Z.D,o.t],styles:[""]}),R),data:{title:"create staff"}},{path:"edit-staff",component:(Q=function(){function e(t,i,a,o,r,n){_classCallCheck(this,e),this.crudService=t,this.utilService=i,this.swalService=a,this.router=o,this.companyService=r,this.form=n,this.uploadLoading=!1,this.loading=!1,this.staff=this.companyService.getStaff()}return _createClass(e,[{key:"ngOnInit",value:function(){this.staffForm=this.form.group({firstName:[this.staff.firstName,Z.C.required],lastName:[this.staff.lastName,Z.C.required],phoneNumber:[this.staff.phoneNumber,Z.C.required],email:[this.staff.email,Z.C.required],gender:[this.staff.gender,Z.C.required],designation:[this.staff.designation,Z.C.required],qualification:[this.staff.qualification,Z.C.required],yearsOfExperience:[this.staff.yearsOfExperience,Z.C.required],profile:[this.staff.profile,Z.C.required]})}},{key:"getUploadUrl",value:function(e){var t=this,i=e.target.files[0],a=new FormData;a.append("file",i,i.name),this.uploadLoading=!0,this.crudService.postRequestFile("uploadMe",a).subscribe((function(e){0===e.code?(t.staff.imageUrl=e.message,t.uploadLoading=!1,t.swalService.success("File path saved.")):(t.swalService.error("An error occured"),t.uploadLoading=!1)}),(function(e){console.log(e),t.uploadLoading=!1,t.swalService.error("Could not get file path.")}))}},{key:"updateStaff",value:function(){var e=this;this.loading=!0,this.staffForm.value.id=this.staff.id,this.staffForm.value.companyId=this.utilService.getCompany().id,this.staffForm.value.imageUrl=this.staff.imageUrl,this.crudService.putRequest("api/staffprofile/edit",this.staffForm.value).subscribe((function(t){console.log(t),e.loading=!1,0===t.code?(e.swalService.success(t.message),e.router.navigate(["/contractor/staff/"])):e.swalService.error("An Error Occured")}),(function(t){console.log(t),e.loading=!1,e.swalService.error("An Error Occured")}))}}]),e}(),Q.\u0275fac=function(e){return new(e||Q)(n.Tb(c.a),n.Tb(l.a),n.Tb(b.a),n.Tb(r.c),n.Tb(s.a),n.Tb(Z.f))},Q.\u0275cmp=n.Nb({type:Q,selectors:[["app-edit-staff"]],decls:68,vars:5,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-10"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","firstName",1,"col-md-3","col-form-label"],[1,"col-md-9"],["type","text","id","firstName","formControlName","firstName","name","firstName","placeholder","First Name",1,"form-control"],["for","lastName",1,"col-md-3","col-form-label"],["type","text","id","lastName","formControlName","lastName","name","lastName","placeholder","Last Name",1,"form-control"],["for","phoneNumber",1,"col-md-3","col-form-label"],["type","number","id","phoneNumber","formControlName","phoneNumber","name","phoneNumber","placeholder","Phone Number",1,"form-control"],["for","email",1,"col-md-3","col-form-label"],["type","email","id","email","formControlName","email","name","email","placeholder","name@mail.com",1,"form-control"],["for","gender",1,"col-md-3","col-form-label"],["id","gender","formControlName","gender",1,"form-control"],["value","male"],["value","female"],["for","designation",1,"col-md-3","col-form-label"],["type","text","id","designation","formControlName","designation","name","designation","placeholder","Designation",1,"form-control"],["for","qualification",1,"col-md-3","col-form-label"],["type","text","id","qualification","formControlName","qualification","name","qualification","placeholder","Qualification (SSCE, Bsc, B'Eng, M'Eng, PHD)",1,"form-control"],["for","yearsOfExperience",1,"col-md-3","col-form-label"],["type","number","id","yearsOfExperience","formControlName","yearsOfExperience","name","yearsOfExperience","placeholder","Year(s) Of Experience",1,"form-control"],["for","profile",1,"col-md-3","col-form-label"],["type","text","id","profile","formControlName","profile","name","profile","placeholder","User Profile",1,"form-control"],["class","row d-flex justify-content-center my-2",4,"ngIf"],["for","file-input",1,"col-md-4","col-form-label","my-auto"],[1,"col-md-2"],["width","100%","height","100","alt","","srcset","",3,"src"],[1,"col-md-6","my-auto"],["type","file","id","file-input","name","file-input",3,"change"],[1,"card-footer"],["class","btn btn-success mx-3","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-success mx-3",3,"click",4,"ngIf"],[1,"row","d-flex","justify-content-center","my-2"],["role","status",1,"spinner-grow","text-success"],[1,"sr-only"],["role","status",1,"spinner-grow","text-primary"],["role","status",1,"spinner-grow","text-info"],["type","button","disabled","",1,"btn","btn-success","mx-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-success","mx-3",3,"click"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"div",2),n.Zb(3,"div",3),n.Zb(4,"strong"),n.Hc(5,"Add Staff"),n.Yb(),n.Yb(),n.Zb(6,"div",4),n.Zb(7,"form",5),n.hc("ngSubmit",(function(){return t.updateStaff()})),n.Zb(8,"div",6),n.Zb(9,"label",7),n.Hc(10,"First Name"),n.Yb(),n.Zb(11,"div",8),n.Ub(12,"input",9),n.Yb(),n.Yb(),n.Zb(13,"div",6),n.Zb(14,"label",10),n.Hc(15,"Last Name"),n.Yb(),n.Zb(16,"div",8),n.Ub(17,"input",11),n.Yb(),n.Yb(),n.Zb(18,"div",6),n.Zb(19,"label",12),n.Hc(20,"Phone Number"),n.Yb(),n.Zb(21,"div",8),n.Ub(22,"input",13),n.Yb(),n.Yb(),n.Zb(23,"div",6),n.Zb(24,"label",14),n.Hc(25,"Email"),n.Yb(),n.Zb(26,"div",8),n.Ub(27,"input",15),n.Yb(),n.Yb(),n.Zb(28,"div",6),n.Zb(29,"label",16),n.Hc(30,"Gender"),n.Yb(),n.Zb(31,"div",8),n.Zb(32,"select",17),n.Zb(33,"option",18),n.Hc(34,"Male"),n.Yb(),n.Zb(35,"option",19),n.Hc(36,"Female"),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Zb(37,"div",6),n.Zb(38,"label",20),n.Hc(39,"Designation"),n.Yb(),n.Zb(40,"div",8),n.Ub(41,"input",21),n.Yb(),n.Yb(),n.Zb(42,"div",6),n.Zb(43,"label",22),n.Hc(44,"Qualification"),n.Yb(),n.Zb(45,"div",8),n.Ub(46,"input",23),n.Yb(),n.Yb(),n.Zb(47,"div",6),n.Zb(48,"label",24),n.Hc(49,"Year(s) of Experience"),n.Yb(),n.Zb(50,"div",8),n.Ub(51,"input",25),n.Yb(),n.Yb(),n.Zb(52,"div",6),n.Zb(53,"label",26),n.Hc(54,"Profile"),n.Yb(),n.Zb(55,"div",8),n.Ub(56,"textarea",27),n.Yb(),n.Yb(),n.Fc(57,x,10,0,"div",28),n.Zb(58,"div",6),n.Zb(59,"label",29),n.Hc(60,"Staff Image (Optional)"),n.Yb(),n.Zb(61,"div",30),n.Ub(62,"img",31),n.Yb(),n.Zb(63,"div",32),n.Zb(64,"input",33),n.hc("change",(function(e){return t.getUploadUrl(e)})),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Zb(65,"div",34),n.Fc(66,S,3,0,"button",35),n.Fc(67,w,2,0,"button",36),n.Yb(),n.Yb(),n.Yb(),n.Yb()),2&e&&(n.Hb(7),n.qc("formGroup",t.staffForm),n.Hb(50),n.qc("ngIf",t.uploadLoading),n.Hb(5),n.qc("src",t.staff.imageUrl,n.Ac),n.Hb(4),n.qc("ngIf",t.loading),n.Hb(1),n.qc("ngIf",!t.loading))},directives:[Z.E,Z.p,Z.i,Z.c,Z.o,Z.h,Z.u,Z.A,Z.t,Z.D,o.t],styles:[""]}),Q),data:{title:"edit staff"}},{path:"profile",component:(D=function(){function e(t,i){_classCallCheck(this,e),this.companyService=t,this.crud=i,this.profile={companyId:0,dateCreated:"",designation:"",email:"",firstName:"",gender:"",id:0,imageUrl:"",lastName:"",phoneNumber:"",profile:"",qualification:"",yearsOfExperience:0}}return _createClass(e,[{key:"ngOnInit",value:function(){this.profile=this.companyService.getStaff(),this.qualifications$=this.getStaffQualification(this.profile.id)}},{key:"getStaffQualification",value:function(e){return this.crud.getRequest("api/professionalqualification/allIrrByStaffProfileId/"+e)}}]),e}(),D.\u0275fac=function(e){return new(e||D)(n.Tb(s.a),n.Tb(c.a))},D.\u0275cmp=n.Nb({type:D,selectors:[["app-profile"]],decls:8,vars:5,consts:[[1,"row"],[4,"ngIf","ngIfElse"],[1,"col-md-9"],[4,"ngIf"],["loading",""],[1,"col-md-3","order-1","order-md-2"],[1,"card"],[1,"card-body"],[1,"card__image"],["width","100%","height","100%","alt","","onerror","this.src='../../../../assets/img/no-image-available.jpg'",3,"src"],["class","w-100 text-center mt-4",4,"ngIf"],[1,"col-md-9","order-2","order-md-1"],[1,"card-body","p-1"],[1,"card__profile","px-2","py-4","rounded"],[1,"row","profile"],[1,"col-md-4"],[1,"fa","fa-envelope-o","mr-2"],[1,"fa","fa-phone","mr-2"],[1,"fa","fa-user","mr-2"],[1,"fa","fa-briefcase","mr-2"],[1,"p-2","mt-3"],[1,"w-100","text-center","mt-4"],[1,"card-header","px-3","d-flex","justify-content-between"],[1,"ca-text-primary",3,"routerLink"],[1,"ml-2","fa","fa-long-arrow-right"],[1,"card-body","pt-0","px-2"],["class","w-100 p-2",4,"ngIf"],["class","card__products p-2",4,"ngFor","ngForOf"],[1,"w-100","p-2"],[1,"card__products","p-2"],[1,"row","align-items-center"],["class","col-auto mt-2 mt-md-0",4,"ngIf"],["class","col-md-3 mt-2 mt-md-0",4,"ngIf"],[1,"col-auto","mt-2","mt-md-0"],[1,"product__image"],["width","100%","height","100%","alt","","onerror","this.src='../../../../../assets/img/no-image-available.jpg'",3,"src"],[1,"col-md-3","mt-2","mt-md-0"],[1,"fa","fa-spinner","fa-spin","mr-2"]],template:function(e,t){if(1&e&&(n.Zb(0,"section",0),n.Fc(1,N,43,7,"ng-container",1),n.Yb(),n.Zb(2,"section",0),n.Zb(3,"div",2),n.Fc(4,E,11,4,"ng-container",3),n.kc(5,"async"),n.Yb(),n.Yb(),n.Fc(6,L,2,0,"ng-template",null,4,n.Gc)),2&e){var i=n.wc(7);n.Hb(1),n.qc("ngIf",t.profile)("ngIfElse",i),n.Hb(3),n.qc("ngIf",n.lc(5,3,t.qualifications$))}},directives:[o.t,r.f,o.s],pipes:[o.b],styles:["h4[_ngcontent-%COMP%]{font-size:12px}h4[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}p[_ngcontent-%COMP%]{font-size:13px}.card[_ngcontent-%COMP%]{font-size:14px}.card-header[_ngcontent-%COMP%]{border-bottom:1px solid #f3f3f3;margin-bottom:.5em}.card__image[_ngcontent-%COMP%]{border-radius:50%;-o-object-fit:cover;object-fit:cover;margin:auto;width:120px;height:120px;border:2px solid #c74923;overflow:hidden;transition:all .6s ease}.card__image[_ngcontent-%COMP%]:hover{cursor:pointer}.card__image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.4)}.card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:13px;font-weight:bolder;color:#c74923}.card__profile[_ngcontent-%COMP%]{background-color:#fdf8f6;border:1px solid #fbede9}.card__profile[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]{margin-bottom:1em}.card__profile[_ngcontent-%COMP%]:hover{background-color:#fcf1ed}.card__products[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #fbede9}.product__image[_ngcontent-%COMP%]{border-radius:5px;-o-object-fit:cover;object-fit:cover;width:80px;height:80px;border:2px solid #c74923;overflow:hidden;transition:all .6s ease}.product__image[_ngcontent-%COMP%]:hover{cursor:pointer}.product__image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.4)}"]}),D),data:{title:"staff profile"}},{path:"qualification/:type",component:(A=function(){function e(t,i,a,o,r,n){_classCallCheck(this,e),this.crudService=t,this.util=i,this.swalService=a,this.companyService=o,this.route=r,this.form=n,this.type={upload:"",update:""},this.docType="",this.postUrl="",this.uploadLoading=!1,this.loading=!1,this.fileUrl="",this.qualification={id:0,endDate:"",imageUrl:"",name:"",staffId:0,startDate:""}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this.route.snapshot.params.type;this.docType=e,this.postUrl=this.type[e],this.qualificationForm=this.form.group({name:[this.qualification.name,Z.C.required],endDate:[this.qualification.endDate,Z.C.required],startDate:[this.qualification.startDate,Z.C.required]}),"update"===this.docType&&(this.qualification=this.companyService.getDocument())}},{key:"getUploadUrl",value:function(e){var t=this,i=e.target.files[0],a=new FormData;a.append("file",i,i.name),this.uploadLoading=!0,this.crudService.postRequestFile("uploadMe",a).subscribe((function(e){0===e.code?(t.qualification.imageUrl=e.message,t.swalService.success("File path saved.")):t.swalService.error("An error occured"),t.uploadLoading=!1}),(function(e){console.log(e),t.uploadLoading=!1,t.swalService.error("Could not get file path.")}))}},{key:"uploadQualification",value:function(){var e=this;this.qualificationForm.value.id=this.qualification.id,this.qualificationForm.value.staffId=this.qualification.staffId||Number(this.companyService.getStaff().id),this.qualificationForm.value.imageUrl=this.qualification.imageUrl;var t=this.crudService.postRequest("api/professionalqualification/add",this.qualificationForm.value);"edit"===this.docType&&(t=this.crudService.putRequest("api/professionalqualification/edit",this.qualificationForm.value)),t.subscribe((function(t){console.log(t),0===t.code?e.swalService.success(t.message):e.swalService.error("An Error Occured")}),(function(t){console.log(t),e.swalService.error("An Error Occured")}))}}]),e}(),A.\u0275fac=function(e){return new(e||A)(n.Tb(c.a),n.Tb(l.a),n.Tb(b.a),n.Tb(s.a),n.Tb(r.a),n.Tb(Z.f))},A.\u0275cmp=n.Nb({type:A,selectors:[["app-add-qualification"]],decls:33,vars:7,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-10"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","name",1,"col-md-3","col-form-label"],[1,"col-md-9"],["type","text","id","name","formControlName","name","name","name","placeholder","Name",1,"form-control"],["class","row d-flex justify-content-center my-2",4,"ngIf"],["for","file-input",1,"col-md-3","col-form-label"],[1,"col-md-9","my-auto"],["type","file","id","file-input","name","file-input",3,"change"],["for","date-input",1,"col-md-3","col-form-label"],["formControlName","startDate","id","date-input","type","date","name","date-input","placeholder","date",1,"form-control"],["formControlName","endDate","id","date-input","type","date","name","date-input","placeholder","date",1,"form-control"],[1,"card-footer"],["class","btn btn-success mx-3","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-success mx-3",3,"click",4,"ngIf"],[1,"row","d-flex","justify-content-center","my-2"],["role","status",1,"spinner-grow","text-success"],[1,"sr-only"],["role","status",1,"spinner-grow","text-primary"],["role","status",1,"spinner-grow","text-info"],["type","button","disabled","",1,"btn","btn-success","mx-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-success","mx-3",3,"click"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"div",2),n.Zb(3,"div",3),n.Zb(4,"strong"),n.Hc(5),n.kc(6,"titlecase"),n.Yb(),n.Yb(),n.Zb(7,"div",4),n.Zb(8,"form",5),n.hc("ngSubmit",(function(){return t.uploadQualification()})),n.Zb(9,"div",6),n.Zb(10,"label",7),n.Hc(11,"Name"),n.Yb(),n.Zb(12,"div",8),n.Ub(13,"input",9),n.Yb(),n.Yb(),n.Fc(14,j,10,0,"div",10),n.Zb(15,"div",6),n.Zb(16,"label",11),n.Hc(17,"Certificate (Optional)"),n.Yb(),n.Zb(18,"div",12),n.Zb(19,"input",13),n.hc("change",(function(e){return t.getUploadUrl(e)})),n.Yb(),n.Yb(),n.Yb(),n.Zb(20,"div",6),n.Zb(21,"label",14),n.Hc(22,"Start Date"),n.Yb(),n.Zb(23,"div",8),n.Ub(24,"input",15),n.Yb(),n.Yb(),n.Zb(25,"div",6),n.Zb(26,"label",14),n.Hc(27,"End Date"),n.Yb(),n.Zb(28,"div",8),n.Ub(29,"input",16),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Zb(30,"div",17),n.Fc(31,M,3,0,"button",18),n.Fc(32,T,3,3,"button",19),n.Yb(),n.Yb(),n.Yb(),n.Yb()),2&e&&(n.Hb(5),n.Jc("",n.lc(6,5,t.docType)," Qualification"),n.Hb(3),n.qc("formGroup",t.qualificationForm),n.Hb(6),n.qc("ngIf",t.uploadLoading),n.Hb(17),n.qc("ngIf",t.loading),n.Hb(1),n.qc("ngIf",!t.loading))},directives:[Z.E,Z.p,Z.i,Z.c,Z.o,Z.h,o.t],pipes:[o.F],styles:[""]}),A),data:{title:"qualification"}}]}],$=((G=function e(){_classCallCheck(this,e)}).\u0275mod=n.Rb({type:G}),G.\u0275inj=n.Qb({factory:function(e){return new(e||G)},imports:[[r.g.forChild(z)],r.g]}),G),B=((J=function e(){_classCallCheck(this,e)}).\u0275mod=n.Rb({type:J}),J.\u0275inj=n.Qb({factory:function(e){return new(e||J)},imports:[[o.c,$,Z.y,f.b.forRoot()]]}),J)}}]);