(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{C6zd:function(e,t,i){"use strict";i.r(t),i.d(t,"StaffModule",(function(){return A}));var o=i("ofXK"),r=i("tyNb"),a=i("fXoL"),n=i("SiJz"),c=i("rvnR"),l=i("DaGL"),b=i("1LjI"),s=i("K3ix");let f=(()=>{class e{constructor(e,t){this.companyService=e,this.router=t,this.staff=this.companyService.getStaff()}ngOnInit(){console.log(this.staff)}setStaff(e){this.companyService.setStaff(e),this.router.navigate(["/contractor/staff/edit-staff"])}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(b.a),a.Tb(r.c))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-view-staff"]],decls:27,vars:11,consts:[[1,"row"],[1,"col-md-12"],["summary","List of projects","aria-role","table",1,"table","table-responsive-sm","table-xs-responsive","table-hover","table-outline","mb-0"],[1,"mx-auto"],[1,"d-flex","justify-content-center"],["width","200","height","200","alt","","srcset","",3,"src"],[1,"profile-header","bg-theme-primary","text-white"],[1,"font-weight-bold","text-theme-primary","py-2","text-left"],[1,"py-2"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"table",2),a.Zb(3,"tbody",3),a.Ub(4,"tr"),a.Zb(5,"tr"),a.Zb(6,"td"),a.Zb(7,"div",4),a.Ub(8,"img",5),a.Yb(),a.Yb(),a.Zb(9,"td"),a.Zb(10,"div",6),a.Hc(11),a.Yb(),a.Zb(12,"div",7),a.Hc(13),a.Yb(),a.Zb(14,"div",7),a.Hc(15),a.Yb(),a.Zb(16,"div"),a.Zb(17,"div",8),a.Zb(18,"h3"),a.Hc(19,"Profile"),a.Yb(),a.Zb(20,"div"),a.Hc(21),a.Yb(),a.Yb(),a.Zb(22,"div",8),a.Zb(23,"h3"),a.Hc(24,"Qualification"),a.Yb(),a.Zb(25,"div"),a.Hc(26),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb()),2&e&&(a.Hb(8),a.qc("src",t.staff.imageUrl,a.Ac),a.Hb(3),a.Lc(" ",t.staff.firstName," ",t.staff.lastName," - ",t.staff.designation," "),a.Hb(2),a.Kc(" Phone No: ",t.staff.phoneNumber," | Email: ",t.staff.email," "),a.Hb(2),a.Lc(" Experience: ",t.staff.yearsOfExperience," ",t.staff.yearsOfExperience>1?"years":"year"," | Sex: ",t.staff.gender," "),a.Hb(6),a.Ic(t.staff.profile),a.Hb(5),a.Ic(t.staff.qualification))},styles:[".profile-header[_ngcontent-%COMP%]{padding:.5rem 1rem;margin-bottom:0;border-bottom:1px solid #c8ced3;font-size:1.3rem}"]}),e})();function d(e,t){if(1&e){const e=a.ac();a.Zb(0,"div",11),a.Zb(1,"div",12),a.Zb(2,"div",13),a.Zb(3,"div",14),a.Ub(4,"img",15),a.Zb(5,"div",16),a.Zb(6,"div",17),a.Hc(7),a.Yb(),a.Yb(),a.Yb(),a.Zb(8,"div",18),a.Zb(9,"strong",19),a.Hc(10,"Designation:"),a.Yb(),a.Hc(11),a.Yb(),a.Zb(12,"div",20),a.Zb(13,"div",21),a.Zb(14,"strong",19),a.Hc(15,"Email:"),a.Yb(),a.Hc(16),a.Yb(),a.Yb(),a.Zb(17,"div",20),a.Zb(18,"div",21),a.Zb(19,"strong",19),a.Hc(20,"Phone Number:"),a.Yb(),a.Hc(21),a.Yb(),a.Yb(),a.Zb(22,"div",22),a.Zb(23,"div",23),a.Zb(24,"button",24),a.hc("click",(function(){a.yc(e);const i=t.$implicit;return a.jc().setStaff(i,"edit")})),a.Hc(25,"Edit Profile"),a.Yb(),a.Yb(),a.Zb(26,"div",25),a.Zb(27,"button",26),a.hc("click",(function(){a.yc(e);const i=t.$implicit;return a.jc().setStaff(i)})),a.Hc(28,"View Profile"),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb()}if(2&e){const e=t.$implicit;a.Hb(4),a.qc("src",e.imageUrl,a.Ac),a.Hb(3),a.Kc("",e.firstName," ",e.lastName,""),a.Hb(4),a.Jc(" ",e.designation," "),a.Hb(5),a.Jc(" ",e.email," "),a.Hb(5),a.Jc(" 0",e.phoneNumber," ")}}function m(e,t){1&e&&(a.Zb(0,"div",27),a.Ub(1,"i",28),a.Hc(2," fetching staff... "),a.Yb())}function u(e,t){1&e&&(a.Zb(0,"div",27),a.Zb(1,"span"),a.Hc(2,"No staff added, please add staff profiles to view them here."),a.Yb(),a.Yb())}function p(e,t){if(1&e){const e=a.ac();a.Zb(0,"div",29),a.Zb(1,"h4",30),a.Hc(2,"Staff Profile"),a.Yb(),a.Zb(3,"button",31),a.hc("click",(function(){return a.yc(e),a.jc().modalRef.hide()})),a.Zb(4,"span",32),a.Hc(5,"\xd7"),a.Yb(),a.Yb(),a.Yb(),a.Zb(6,"div",33),a.Ub(7,"app-view-staff"),a.Yb(),a.Zb(8,"div",34),a.Zb(9,"button",35),a.hc("click",(function(){return a.yc(e),a.jc().modalRef.hide()})),a.Hc(10,"Close"),a.Yb(),a.Yb()}}const g=function(){return["/contractor/staff/create-staff"]};let h=(()=>{class e{constructor(e,t,i,o,r,a){this.crudService=e,this.utilService=t,this.swalService=i,this.companyService=o,this.router=r,this.modalService=a,this.staffProfiles=[],this.loading=!1}ngOnInit(){this.getAllStaffProfile()}getAllStaffProfile(){this.loading=!0;const e=this.utilService.getCompany().id,t=this.utilService.getToken();this.crudService.getRequestImAuth("api/staffprofile/allByCompanyId/"+e,t).subscribe(e=>{console.log(e),this.loading=!1,this.staffProfiles=e},e=>{console.log(e),this.loading=!1,this.swalService.error("An Error occured, Couldn't fetch staff profile")})}setStaff(e,t="view"){return this.companyService.setStaff(e),this.router.navigate("edit"===t?["/contractor/staff/edit-staff"]:["/contractor/staff/profile"])}openModal(e,t){this.companyService.setStaff(t),this.modalRef=this.modalService.show(e,Object.assign({},{class:"gray modal-lg"}))}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(n.a),a.Tb(c.a),a.Tb(l.a),a.Tb(b.a),a.Tb(r.c),a.Tb(s.a))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-staff"]],decls:16,vars:6,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-12"],[1,"card"],[1,"card-header","d-flex","justify-content-between"],[1,"btn","bg-theme-primary","text-white","m-2","my-sm-0",3,"routerLink"],[1,"card-body"],[1,"py-3","my-2"],[1,"row"],["class","col-md-4 my-3",4,"ngFor","ngForOf"],["class","my-5 text-center",4,"ngIf"],["template",""],[1,"col-md-4","my-3"],[1,"container"],[1,"card-inner","p-2"],[1,"card-img"],["alt","staff image","srcset","",3,"src"],[1,"card-img-content"],[1,"title","p-2"],[1,"mt-3","px-2","my-1"],[1,"mr-1"],[1,"d-flex"],[1,"px-2"],[1,"d-flex","my-2","p-2"],[1,""],[1,"btn","btn-warning",3,"click"],[1,"ml-auto"],[1,"btn","btn-theme-primary",3,"click"],[1,"my-5","text-center"],[1,"fa","fa-spinner","fa-spin","mr-2"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"div",2),a.Zb(3,"div",3),a.Zb(4,"h2"),a.Hc(5),a.Yb(),a.Zb(6,"button",4),a.Hc(7," Create Staff "),a.Yb(),a.Yb(),a.Zb(8,"div",5),a.Zb(9,"div",6),a.Zb(10,"div",7),a.Fc(11,d,29,6,"div",8),a.Yb(),a.Yb(),a.Fc(12,m,3,0,"div",9),a.Fc(13,u,3,0,"div",9),a.Yb(),a.Fc(14,p,11,0,"ng-template",null,10,a.Gc),a.Yb(),a.Yb(),a.Yb()),2&e&&(a.Hb(5),a.Jc("Staff(",t.staffProfiles.length,")"),a.Hb(1),a.qc("routerLink",a.sc(5,g)),a.Hb(5),a.qc("ngForOf",t.staffProfiles),a.Hb(1),a.qc("ngIf",t.loading),a.Hb(1),a.qc("ngIf",!t.loading&&0===t.staffProfiles.length))},directives:[r.d,o.s,o.t,f],styles:[".card-inner[_ngcontent-%COMP%]{border:none;border-radius:5px;background-color:#fff;box-shadow:0 4px 20px rgba(0,0,0,.1);min-height:250px}.card-inner[_ngcontent-%COMP%]:hover{transform:scale(1.015)}.card-img[_ngcontent-%COMP%]{position:relative}.card-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:250px;background:linear-gradient(rgba(0,0,0,.3),rgba(0,0,0,.3))}.card-img[_ngcontent-%COMP%]   .card-img-content[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;color:#fff;width:100%;font-size:1.5rem;background:linear-gradient(rgba(128,92,92,.7),rgba(0,0,0,.7))}"]}),e})();var v=i("3Pt+");function Y(e,t){1&e&&(a.Zb(0,"div",37),a.Zb(1,"div",38),a.Zb(2,"span",39),a.Hc(3,"Loading..."),a.Yb(),a.Yb(),a.Zb(4,"div",40),a.Zb(5,"span",39),a.Hc(6,"Loading..."),a.Yb(),a.Yb(),a.Zb(7,"div",41),a.Zb(8,"span",39),a.Hc(9,"Loading..."),a.Yb(),a.Yb(),a.Yb())}function Z(e,t){1&e&&(a.Zb(0,"button",42),a.Ub(1,"span",43),a.Hc(2," Loading... "),a.Yb())}function y(e,t){if(1&e){const e=a.ac();a.Zb(0,"button",44),a.hc("click",(function(){return a.yc(e),a.jc().addStaff()})),a.Hc(1,"Add Staff"),a.Yb()}}function H(e,t){1&e&&(a.Zb(0,"div",37),a.Zb(1,"div",38),a.Zb(2,"span",39),a.Hc(3,"Loading..."),a.Yb(),a.Yb(),a.Zb(4,"div",40),a.Zb(5,"span",39),a.Hc(6,"Loading..."),a.Yb(),a.Yb(),a.Zb(7,"div",41),a.Zb(8,"span",39),a.Hc(9,"Loading..."),a.Yb(),a.Yb(),a.Yb())}function x(e,t){1&e&&(a.Zb(0,"button",42),a.Ub(1,"span",43),a.Hc(2," Loading... "),a.Yb())}function S(e,t){if(1&e){const e=a.ac();a.Zb(0,"button",44),a.hc("click",(function(){return a.yc(e),a.jc().updateStaff()})),a.Hc(1,"Update Staff"),a.Yb()}}function q(e,t){if(1&e&&(a.Zb(0,"div",21),a.Zb(1,"h4"),a.Hc(2),a.Yb(),a.Zb(3,"p"),a.Hc(4),a.Yb(),a.Yb()),2&e){const e=a.jc(2);a.Hb(2),a.Kc("",e.profile.firstName," ",e.profile.lastName,""),a.Hb(2),a.Ic(e.profile.designation)}}function w(e,t){if(1&e&&(a.Xb(0),a.Zb(1,"div",5),a.Zb(2,"div",6),a.Zb(3,"div",7),a.Zb(4,"div",8),a.Ub(5,"img",9),a.Yb(),a.Fc(6,q,5,3,"div",10),a.Yb(),a.Yb(),a.Yb(),a.Zb(7,"div",11),a.Zb(8,"div",6),a.Zb(9,"div",12),a.Zb(10,"div",13),a.Zb(11,"div",14),a.Zb(12,"div",15),a.Zb(13,"h4"),a.Ub(14,"i",16),a.Hc(15," Email "),a.Yb(),a.Zb(16,"p"),a.Hc(17),a.Yb(),a.Yb(),a.Zb(18,"div",15),a.Zb(19,"h4"),a.Ub(20,"i",17),a.Hc(21," Phone "),a.Yb(),a.Zb(22,"p"),a.Hc(23),a.Yb(),a.Yb(),a.Zb(24,"div",15),a.Zb(25,"h4"),a.Ub(26,"i",18),a.Hc(27," Gender "),a.Yb(),a.Zb(28,"p"),a.Hc(29),a.Yb(),a.Yb(),a.Zb(30,"div",15),a.Zb(31,"h4"),a.Ub(32,"i",19),a.Hc(33," Years of Experience "),a.Yb(),a.Zb(34,"p"),a.Hc(35),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(36,"div",6),a.Zb(37,"div",12),a.Zb(38,"div",20),a.Zb(39,"h4"),a.Hc(40," Profile "),a.Yb(),a.Zb(41,"p"),a.Hc(42),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Wb()),2&e){const e=a.jc();a.Hb(5),a.qc("src",e.profile.imageUrl,a.Ac),a.Hb(1),a.qc("ngIf",e.profile.firstName||e.profile.lastName),a.Hb(11),a.Ic(e.profile.email||"not available"),a.Hb(6),a.Ic(e.profile.phoneNumber||"not available"),a.Hb(6),a.Ic(e.profile.gender||"not available"),a.Hb(6),a.Jc(" ",e.profile.yearsOfExperience>1?e.profile.yearsOfExperience+" years":e.profile.yearsOfExperience+" year"||!1," "),a.Hb(7),a.Jc(" ",e.profile.profile||"Profile not available"," ")}}function N(e,t){1&e&&(a.Zb(0,"div",28),a.Hc(1," No qualifications available "),a.Yb())}function C(e,t){if(1&e&&(a.Zb(0,"div",33),a.Zb(1,"div",34),a.Ub(2,"img",35),a.Yb(),a.Yb()),2&e){const e=a.jc().$implicit;a.Hb(2),a.qc("src",e.imageUrl||e.logoUrl,a.Ac)}}function U(e,t){if(1&e&&(a.Zb(0,"div",36),a.Zb(1,"h4"),a.Hc(2," Name of Qualification "),a.Yb(),a.Zb(3,"p"),a.Hc(4),a.Yb(),a.Yb()),2&e){const e=a.jc().$implicit;a.Hb(4),a.Ic(e.name||e.clientName)}}function O(e,t){if(1&e&&(a.Zb(0,"div",36),a.Zb(1,"h4"),a.Hc(2," Start Year "),a.Yb(),a.Hc(3),a.Yb()),2&e){const e=a.jc().$implicit;a.Hb(3),a.Jc(" ",e.startYear||""," ")}}function F(e,t){if(1&e&&(a.Zb(0,"div",36),a.Zb(1,"h4"),a.Hc(2," End Year "),a.Yb(),a.Hc(3),a.Yb()),2&e){const e=a.jc().$implicit;a.Hb(3),a.Jc(" ",e.endYear||""," ")}}function I(e,t){if(1&e&&(a.Zb(0,"div",29),a.Zb(1,"div",30),a.Fc(2,C,3,1,"div",31),a.Fc(3,U,5,1,"div",32),a.Fc(4,O,4,1,"div",32),a.Fc(5,F,4,1,"div",32),a.Yb(),a.Yb()),2&e){const e=t.$implicit;a.Hb(2),a.qc("ngIf",e.imageUrl),a.Hb(1),a.qc("ngIf",e.name||e.clientName),a.Hb(1),a.qc("ngIf",e.startYear),a.Hb(1),a.qc("ngIf",e.endYear)}}const _=function(){return["/contractor/staff/qualification/upload"]};function P(e,t){if(1&e&&(a.Xb(0),a.Zb(1,"div",6),a.Zb(2,"div",22),a.Zb(3,"h4"),a.Hc(4," Qualifications "),a.Yb(),a.Zb(5,"a",23),a.Hc(6," Add Qualification "),a.Ub(7,"i",24),a.Yb(),a.Yb(),a.Zb(8,"div",25),a.Fc(9,N,2,0,"div",26),a.Fc(10,I,6,4,"div",27),a.Yb(),a.Yb(),a.Wb()),2&e){const e=t.ngIf;a.Hb(5),a.qc("routerLink",a.sc(3,_)),a.Hb(4),a.qc("ngIf",0===e.length),a.Hb(1),a.qc("ngForOf",e)}}function E(e,t){1&e&&(a.Ub(0,"i",37),a.Hc(1," fetching...\n"))}function L(e,t){1&e&&(a.Zb(0,"div",20),a.Zb(1,"div",21),a.Zb(2,"span",22),a.Hc(3,"Loading..."),a.Yb(),a.Yb(),a.Zb(4,"div",23),a.Zb(5,"span",22),a.Hc(6,"Loading..."),a.Yb(),a.Yb(),a.Zb(7,"div",24),a.Zb(8,"span",22),a.Hc(9,"Loading..."),a.Yb(),a.Yb(),a.Yb())}function j(e,t){1&e&&(a.Zb(0,"button",25),a.Ub(1,"span",26),a.Hc(2," Loading... "),a.Yb())}function M(e,t){if(1&e){const e=a.ac();a.Zb(0,"button",27),a.hc("click",(function(){return a.yc(e),a.jc().uploadQualification()})),a.Hc(1),a.kc(2,"titlecase"),a.Yb()}if(2&e){const e=a.jc();a.Hb(1),a.Jc("",a.lc(2,1,e.docType)," Qualification")}}const T=[{path:"",data:{title:"Staff"},children:[{path:"",component:h},{path:"create-staff",component:(()=>{class e{constructor(e,t,i,o,r){this.crudService=e,this.utilService=t,this.swalService=i,this.router=o,this.form=r,this.uploadLoading=!1,this.loading=!1,this.fileUrl="../../../../../assets/img/no-image-available.jpg"}ngOnInit(){this.staffForm=this.form.group({firstName:["",v.C.required],lastName:["",v.C.required],phoneNumber:["",v.C.required],email:["",v.C.required],gender:["",v.C.required],designation:["",v.C.required],qualification:["",v.C.required],yearsOfExperience:["",v.C.required],profile:["",v.C.required]})}getUploadUrl(e){const t=e.target.files[0],i=new FormData;i.append("file",t,t.name),this.uploadLoading=!0,this.crudService.postRequestFile("uploadMe",i).subscribe(e=>{0===e.code?(this.fileUrl=e.message,this.uploadLoading=!1,this.swalService.success("File path saved.")):(this.swalService.error("An error occured"),this.uploadLoading=!1)},e=>{console.log(e),this.uploadLoading=!1,this.swalService.error("Could not get file path.")})}addStaff(){this.loading=!0,this.staffForm.value.id=0,this.staffForm.value.companyId=this.utilService.getCompany().id,this.staffForm.value.imageUrl=this.fileUrl,this.crudService.postRequest("/api/staffprofile/add",this.staffForm.value).subscribe(e=>{console.log(e),this.loading=!1,0===e.code?(this.swalService.success(e.message),this.router.navigate(["/contractor/staff/"])):this.swalService.error("An Error Occured")},e=>{console.log(e),this.loading=!1,this.swalService.error("An Error Occured")})}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(n.a),a.Tb(c.a),a.Tb(l.a),a.Tb(r.c),a.Tb(v.f))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-create-staff"]],decls:68,vars:5,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-10"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","firstName",1,"col-md-3","col-form-label"],[1,"col-md-9"],["type","text","id","firstName","formControlName","firstName","name","firstName","placeholder","First Name",1,"form-control"],["for","lastName",1,"col-md-3","col-form-label"],["type","text","id","lastName","formControlName","lastName","name","lastName","placeholder","Last Name",1,"form-control"],["for","phoneNumber",1,"col-md-3","col-form-label"],["type","number","id","phoneNumber","formControlName","phoneNumber","name","phoneNumber","placeholder","Phone Number",1,"form-control"],["for","email",1,"col-md-3","col-form-label"],["type","email","id","email","formControlName","email","name","email","placeholder","name@mail.com",1,"form-control"],["for","gender",1,"col-md-3","col-form-label"],["id","gender","formControlName","gender",1,"form-control"],["value","male"],["value","female"],["for","designation",1,"col-md-3","col-form-label"],["type","text","id","designation","formControlName","designation","name","designation","placeholder","Designation",1,"form-control"],["for","qualification",1,"col-md-3","col-form-label"],["type","text","id","qualification","formControlName","qualification","name","qualification","placeholder","Qualification (SSCE, Bsc, B'Eng, M'Eng, PHD)",1,"form-control"],["for","yearsOfExperience",1,"col-md-3","col-form-label"],["type","number","id","yearsOfExperience","formControlName","yearsOfExperience","name","yearsOfExperience","placeholder","Year(s) Of Experience",1,"form-control"],["for","profile",1,"col-md-3","col-form-label"],["type","text","id","profile","formControlName","profile","name","profile","placeholder","User Profile",1,"form-control"],["class","row d-flex justify-content-center my-2",4,"ngIf"],["for","file-input",1,"col-md-4","col-form-label","my-auto"],[1,"col-md-2"],["width","100%","height","100","alt","","srcset","",3,"src"],[1,"col-md-6","my-auto"],["type","file","id","file-input","name","file-input",3,"change"],[1,"card-footer"],["class","btn btn-success mx-3","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-success mx-3",3,"click",4,"ngIf"],[1,"row","d-flex","justify-content-center","my-2"],["role","status",1,"spinner-grow","text-success"],[1,"sr-only"],["role","status",1,"spinner-grow","text-primary"],["role","status",1,"spinner-grow","text-info"],["type","button","disabled","",1,"btn","btn-success","mx-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-success","mx-3",3,"click"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"div",2),a.Zb(3,"div",3),a.Zb(4,"strong"),a.Hc(5,"Add Staff"),a.Yb(),a.Yb(),a.Zb(6,"div",4),a.Zb(7,"form",5),a.hc("ngSubmit",(function(){return t.addStaff()})),a.Zb(8,"div",6),a.Zb(9,"label",7),a.Hc(10,"First Name"),a.Yb(),a.Zb(11,"div",8),a.Ub(12,"input",9),a.Yb(),a.Yb(),a.Zb(13,"div",6),a.Zb(14,"label",10),a.Hc(15,"Last Name"),a.Yb(),a.Zb(16,"div",8),a.Ub(17,"input",11),a.Yb(),a.Yb(),a.Zb(18,"div",6),a.Zb(19,"label",12),a.Hc(20,"Phone Number"),a.Yb(),a.Zb(21,"div",8),a.Ub(22,"input",13),a.Yb(),a.Yb(),a.Zb(23,"div",6),a.Zb(24,"label",14),a.Hc(25,"Email"),a.Yb(),a.Zb(26,"div",8),a.Ub(27,"input",15),a.Yb(),a.Yb(),a.Zb(28,"div",6),a.Zb(29,"label",16),a.Hc(30,"Gender"),a.Yb(),a.Zb(31,"div",8),a.Zb(32,"select",17),a.Zb(33,"option",18),a.Hc(34,"Male"),a.Yb(),a.Zb(35,"option",19),a.Hc(36,"Female"),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(37,"div",6),a.Zb(38,"label",20),a.Hc(39,"Designation"),a.Yb(),a.Zb(40,"div",8),a.Ub(41,"input",21),a.Yb(),a.Yb(),a.Zb(42,"div",6),a.Zb(43,"label",22),a.Hc(44,"Qualification"),a.Yb(),a.Zb(45,"div",8),a.Ub(46,"input",23),a.Yb(),a.Yb(),a.Zb(47,"div",6),a.Zb(48,"label",24),a.Hc(49,"Year(s) of Experience"),a.Yb(),a.Zb(50,"div",8),a.Ub(51,"input",25),a.Yb(),a.Yb(),a.Zb(52,"div",6),a.Zb(53,"label",26),a.Hc(54,"Profile"),a.Yb(),a.Zb(55,"div",8),a.Ub(56,"textarea",27),a.Yb(),a.Yb(),a.Fc(57,Y,10,0,"div",28),a.Zb(58,"div",6),a.Zb(59,"label",29),a.Hc(60,"Staff Image (Optional)"),a.Yb(),a.Zb(61,"div",30),a.Ub(62,"img",31),a.Yb(),a.Zb(63,"div",32),a.Zb(64,"input",33),a.hc("change",(function(e){return t.getUploadUrl(e)})),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(65,"div",34),a.Fc(66,Z,3,0,"button",35),a.Fc(67,y,2,0,"button",36),a.Yb(),a.Yb(),a.Yb(),a.Yb()),2&e&&(a.Hb(7),a.qc("formGroup",t.staffForm),a.Hb(50),a.qc("ngIf",t.uploadLoading),a.Hb(5),a.qc("src",t.fileUrl,a.Ac),a.Hb(4),a.qc("ngIf",t.loading),a.Hb(1),a.qc("ngIf",!t.loading))},directives:[v.E,v.p,v.i,v.c,v.o,v.h,v.u,v.A,v.t,v.D,o.t],styles:[""]}),e})(),data:{title:"create staff"}},{path:"edit-staff",component:(()=>{class e{constructor(e,t,i,o,r,a){this.crudService=e,this.utilService=t,this.swalService=i,this.router=o,this.companyService=r,this.form=a,this.uploadLoading=!1,this.loading=!1,this.staff=this.companyService.getStaff()}ngOnInit(){this.staffForm=this.form.group({firstName:[this.staff.firstName,v.C.required],lastName:[this.staff.lastName,v.C.required],phoneNumber:[this.staff.phoneNumber,v.C.required],email:[this.staff.email,v.C.required],gender:[this.staff.gender,v.C.required],designation:[this.staff.designation,v.C.required],qualification:[this.staff.qualification,v.C.required],yearsOfExperience:[this.staff.yearsOfExperience,v.C.required],profile:[this.staff.profile,v.C.required]})}getUploadUrl(e){const t=e.target.files[0],i=new FormData;i.append("file",t,t.name),this.uploadLoading=!0,this.crudService.postRequestFile("uploadMe",i).subscribe(e=>{0===e.code?(this.staff.imageUrl=e.message,this.uploadLoading=!1,this.swalService.success("File path saved.")):(this.swalService.error("An error occured"),this.uploadLoading=!1)},e=>{console.log(e),this.uploadLoading=!1,this.swalService.error("Could not get file path.")})}updateStaff(){this.loading=!0,this.staffForm.value.id=this.staff.id,this.staffForm.value.companyId=this.utilService.getCompany().id,this.staffForm.value.imageUrl=this.staff.imageUrl,this.crudService.putRequest("api/staffprofile/edit",this.staffForm.value).subscribe(e=>{console.log(e),this.loading=!1,0===e.code?(this.swalService.success(e.message),this.router.navigate(["/contractor/staff/"])):this.swalService.error("An Error Occured")},e=>{console.log(e),this.loading=!1,this.swalService.error("An Error Occured")})}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(n.a),a.Tb(c.a),a.Tb(l.a),a.Tb(r.c),a.Tb(b.a),a.Tb(v.f))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-edit-staff"]],decls:68,vars:5,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-10"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","firstName",1,"col-md-3","col-form-label"],[1,"col-md-9"],["type","text","id","firstName","formControlName","firstName","name","firstName","placeholder","First Name",1,"form-control"],["for","lastName",1,"col-md-3","col-form-label"],["type","text","id","lastName","formControlName","lastName","name","lastName","placeholder","Last Name",1,"form-control"],["for","phoneNumber",1,"col-md-3","col-form-label"],["type","number","id","phoneNumber","formControlName","phoneNumber","name","phoneNumber","placeholder","Phone Number",1,"form-control"],["for","email",1,"col-md-3","col-form-label"],["type","email","id","email","formControlName","email","name","email","placeholder","name@mail.com",1,"form-control"],["for","gender",1,"col-md-3","col-form-label"],["id","gender","formControlName","gender",1,"form-control"],["value","male"],["value","female"],["for","designation",1,"col-md-3","col-form-label"],["type","text","id","designation","formControlName","designation","name","designation","placeholder","Designation",1,"form-control"],["for","qualification",1,"col-md-3","col-form-label"],["type","text","id","qualification","formControlName","qualification","name","qualification","placeholder","Qualification (SSCE, Bsc, B'Eng, M'Eng, PHD)",1,"form-control"],["for","yearsOfExperience",1,"col-md-3","col-form-label"],["type","number","id","yearsOfExperience","formControlName","yearsOfExperience","name","yearsOfExperience","placeholder","Year(s) Of Experience",1,"form-control"],["for","profile",1,"col-md-3","col-form-label"],["type","text","id","profile","formControlName","profile","name","profile","placeholder","User Profile",1,"form-control"],["class","row d-flex justify-content-center my-2",4,"ngIf"],["for","file-input",1,"col-md-4","col-form-label","my-auto"],[1,"col-md-2"],["width","100%","height","100","alt","","srcset","",3,"src"],[1,"col-md-6","my-auto"],["type","file","id","file-input","name","file-input",3,"change"],[1,"card-footer"],["class","btn btn-success mx-3","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-success mx-3",3,"click",4,"ngIf"],[1,"row","d-flex","justify-content-center","my-2"],["role","status",1,"spinner-grow","text-success"],[1,"sr-only"],["role","status",1,"spinner-grow","text-primary"],["role","status",1,"spinner-grow","text-info"],["type","button","disabled","",1,"btn","btn-success","mx-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-success","mx-3",3,"click"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"div",2),a.Zb(3,"div",3),a.Zb(4,"strong"),a.Hc(5,"Add Staff"),a.Yb(),a.Yb(),a.Zb(6,"div",4),a.Zb(7,"form",5),a.hc("ngSubmit",(function(){return t.updateStaff()})),a.Zb(8,"div",6),a.Zb(9,"label",7),a.Hc(10,"First Name"),a.Yb(),a.Zb(11,"div",8),a.Ub(12,"input",9),a.Yb(),a.Yb(),a.Zb(13,"div",6),a.Zb(14,"label",10),a.Hc(15,"Last Name"),a.Yb(),a.Zb(16,"div",8),a.Ub(17,"input",11),a.Yb(),a.Yb(),a.Zb(18,"div",6),a.Zb(19,"label",12),a.Hc(20,"Phone Number"),a.Yb(),a.Zb(21,"div",8),a.Ub(22,"input",13),a.Yb(),a.Yb(),a.Zb(23,"div",6),a.Zb(24,"label",14),a.Hc(25,"Email"),a.Yb(),a.Zb(26,"div",8),a.Ub(27,"input",15),a.Yb(),a.Yb(),a.Zb(28,"div",6),a.Zb(29,"label",16),a.Hc(30,"Gender"),a.Yb(),a.Zb(31,"div",8),a.Zb(32,"select",17),a.Zb(33,"option",18),a.Hc(34,"Male"),a.Yb(),a.Zb(35,"option",19),a.Hc(36,"Female"),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(37,"div",6),a.Zb(38,"label",20),a.Hc(39,"Designation"),a.Yb(),a.Zb(40,"div",8),a.Ub(41,"input",21),a.Yb(),a.Yb(),a.Zb(42,"div",6),a.Zb(43,"label",22),a.Hc(44,"Qualification"),a.Yb(),a.Zb(45,"div",8),a.Ub(46,"input",23),a.Yb(),a.Yb(),a.Zb(47,"div",6),a.Zb(48,"label",24),a.Hc(49,"Year(s) of Experience"),a.Yb(),a.Zb(50,"div",8),a.Ub(51,"input",25),a.Yb(),a.Yb(),a.Zb(52,"div",6),a.Zb(53,"label",26),a.Hc(54,"Profile"),a.Yb(),a.Zb(55,"div",8),a.Ub(56,"textarea",27),a.Yb(),a.Yb(),a.Fc(57,H,10,0,"div",28),a.Zb(58,"div",6),a.Zb(59,"label",29),a.Hc(60,"Staff Image (Optional)"),a.Yb(),a.Zb(61,"div",30),a.Ub(62,"img",31),a.Yb(),a.Zb(63,"div",32),a.Zb(64,"input",33),a.hc("change",(function(e){return t.getUploadUrl(e)})),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(65,"div",34),a.Fc(66,x,3,0,"button",35),a.Fc(67,S,2,0,"button",36),a.Yb(),a.Yb(),a.Yb(),a.Yb()),2&e&&(a.Hb(7),a.qc("formGroup",t.staffForm),a.Hb(50),a.qc("ngIf",t.uploadLoading),a.Hb(5),a.qc("src",t.staff.imageUrl,a.Ac),a.Hb(4),a.qc("ngIf",t.loading),a.Hb(1),a.qc("ngIf",!t.loading))},directives:[v.E,v.p,v.i,v.c,v.o,v.h,v.u,v.A,v.t,v.D,o.t],styles:[""]}),e})(),data:{title:"edit staff"}},{path:"profile",component:(()=>{class e{constructor(e,t){this.companyService=e,this.crud=t,this.profile={companyId:0,dateCreated:"",designation:"",email:"",firstName:"",gender:"",id:0,imageUrl:"",lastName:"",phoneNumber:"",profile:"",qualification:"",yearsOfExperience:0}}ngOnInit(){this.profile=this.companyService.getStaff(),this.qualifications$=this.getStaffQualification(this.profile.id)}getStaffQualification(e){return this.crud.getRequest("api/professionalqualification/allIrrByStaffProfileId/"+e)}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(b.a),a.Tb(n.a))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-profile"]],decls:8,vars:5,consts:[[1,"row"],[4,"ngIf","ngIfElse"],[1,"col-md-9"],[4,"ngIf"],["loading",""],[1,"col-md-3","order-1","order-md-2"],[1,"card"],[1,"card-body"],[1,"card__image"],["width","100%","height","100%","alt","","onerror","this.src='../../../../assets/img/no-image-available.jpg'",3,"src"],["class","w-100 text-center mt-4",4,"ngIf"],[1,"col-md-9","order-2","order-md-1"],[1,"card-body","p-1"],[1,"card__profile","px-2","py-4","rounded"],[1,"row","profile"],[1,"col-md-4"],[1,"fa","fa-envelope-o","mr-2"],[1,"fa","fa-phone","mr-2"],[1,"fa","fa-user","mr-2"],[1,"fa","fa-briefcase","mr-2"],[1,"p-2","mt-3"],[1,"w-100","text-center","mt-4"],[1,"card-header","px-3","d-flex","justify-content-between"],[1,"ca-text-primary",3,"routerLink"],[1,"ml-2","fa","fa-long-arrow-right"],[1,"card-body","pt-0","px-2"],["class","w-100 p-2",4,"ngIf"],["class","card__products p-2",4,"ngFor","ngForOf"],[1,"w-100","p-2"],[1,"card__products","p-2"],[1,"row","align-items-center"],["class","col-auto mt-2 mt-md-0",4,"ngIf"],["class","col-md-3 mt-2 mt-md-0",4,"ngIf"],[1,"col-auto","mt-2","mt-md-0"],[1,"product__image"],["width","100%","height","100%","alt","","onerror","this.src='../../../../../assets/img/no-image-available.jpg'",3,"src"],[1,"col-md-3","mt-2","mt-md-0"],[1,"fa","fa-spinner","fa-spin","mr-2"]],template:function(e,t){if(1&e&&(a.Zb(0,"section",0),a.Fc(1,w,43,7,"ng-container",1),a.Yb(),a.Zb(2,"section",0),a.Zb(3,"div",2),a.Fc(4,P,11,4,"ng-container",3),a.kc(5,"async"),a.Yb(),a.Yb(),a.Fc(6,E,2,0,"ng-template",null,4,a.Gc)),2&e){const e=a.wc(7);a.Hb(1),a.qc("ngIf",t.profile)("ngIfElse",e),a.Hb(3),a.qc("ngIf",a.lc(5,3,t.qualifications$))}},directives:[o.t,r.f,o.s],pipes:[o.b],styles:["h4[_ngcontent-%COMP%]{font-size:12px}h4[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}p[_ngcontent-%COMP%]{font-size:13px}.card[_ngcontent-%COMP%]{font-size:14px}.card-header[_ngcontent-%COMP%]{border-bottom:1px solid #f3f3f3;margin-bottom:.5em}.card__image[_ngcontent-%COMP%]{border-radius:50%;-o-object-fit:cover;object-fit:cover;margin:auto;width:120px;height:120px;border:2px solid #c74923;overflow:hidden;transition:all .6s ease}.card__image[_ngcontent-%COMP%]:hover{cursor:pointer}.card__image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.4)}.card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:13px;font-weight:bolder;color:#c74923}.card__profile[_ngcontent-%COMP%]{background-color:#fdf8f6;border:1px solid #fbede9}.card__profile[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]{margin-bottom:1em}.card__profile[_ngcontent-%COMP%]:hover{background-color:#fcf1ed}.card__products[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #fbede9}.product__image[_ngcontent-%COMP%]{border-radius:5px;-o-object-fit:cover;object-fit:cover;width:80px;height:80px;border:2px solid #c74923;overflow:hidden;transition:all .6s ease}.product__image[_ngcontent-%COMP%]:hover{cursor:pointer}.product__image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.4)}"]}),e})(),data:{title:"staff profile"}},{path:"qualification/:type",component:(()=>{class e{constructor(e,t,i,o,r,a){this.crudService=e,this.util=t,this.swalService=i,this.companyService=o,this.route=r,this.form=a,this.type={upload:"",update:""},this.docType="",this.postUrl="",this.uploadLoading=!1,this.loading=!1,this.fileUrl="",this.qualification={id:0,endDate:"",imageUrl:"",name:"",staffId:0,startDate:""}}ngOnInit(){const e=this.route.snapshot.params.type;this.docType=e,this.postUrl=this.type[e],this.qualificationForm=this.form.group({name:[this.qualification.name,v.C.required],endDate:[this.qualification.endDate,v.C.required],startDate:[this.qualification.startDate,v.C.required]}),"update"===this.docType&&(this.qualification=this.companyService.getDocument())}getUploadUrl(e){const t=e.target.files[0],i=new FormData;i.append("file",t,t.name),this.uploadLoading=!0,this.crudService.postRequestFile("uploadMe",i).subscribe(e=>{0===e.code?(this.qualification.imageUrl=e.message,this.swalService.success("File path saved.")):this.swalService.error("An error occured"),this.uploadLoading=!1},e=>{console.log(e),this.uploadLoading=!1,this.swalService.error("Could not get file path.")})}uploadQualification(){this.qualificationForm.value.id=this.qualification.id,this.qualificationForm.value.staffId=this.qualification.staffId||Number(this.companyService.getStaff().id),this.qualificationForm.value.imageUrl=this.qualification.imageUrl;let e=this.crudService.postRequest("api/professionalqualification/add",this.qualificationForm.value);"edit"===this.docType&&(e=this.crudService.putRequest("api/professionalqualification/edit",this.qualificationForm.value)),e.subscribe(e=>{console.log(e),0===e.code?this.swalService.success(e.message):this.swalService.error("An Error Occured")},e=>{console.log(e),this.swalService.error("An Error Occured")})}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(n.a),a.Tb(c.a),a.Tb(l.a),a.Tb(b.a),a.Tb(r.a),a.Tb(v.f))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-add-qualification"]],decls:33,vars:7,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-10"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","name",1,"col-md-3","col-form-label"],[1,"col-md-9"],["type","text","id","name","formControlName","name","name","name","placeholder","Name",1,"form-control"],["class","row d-flex justify-content-center my-2",4,"ngIf"],["for","file-input",1,"col-md-3","col-form-label"],[1,"col-md-9","my-auto"],["type","file","id","file-input","name","file-input",3,"change"],["for","date-input",1,"col-md-3","col-form-label"],["formControlName","startDate","id","date-input","type","date","name","date-input","placeholder","date",1,"form-control"],["formControlName","endDate","id","date-input","type","date","name","date-input","placeholder","date",1,"form-control"],[1,"card-footer"],["class","btn btn-success mx-3","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-success mx-3",3,"click",4,"ngIf"],[1,"row","d-flex","justify-content-center","my-2"],["role","status",1,"spinner-grow","text-success"],[1,"sr-only"],["role","status",1,"spinner-grow","text-primary"],["role","status",1,"spinner-grow","text-info"],["type","button","disabled","",1,"btn","btn-success","mx-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-success","mx-3",3,"click"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"div",2),a.Zb(3,"div",3),a.Zb(4,"strong"),a.Hc(5),a.kc(6,"titlecase"),a.Yb(),a.Yb(),a.Zb(7,"div",4),a.Zb(8,"form",5),a.hc("ngSubmit",(function(){return t.uploadQualification()})),a.Zb(9,"div",6),a.Zb(10,"label",7),a.Hc(11,"Name"),a.Yb(),a.Zb(12,"div",8),a.Ub(13,"input",9),a.Yb(),a.Yb(),a.Fc(14,L,10,0,"div",10),a.Zb(15,"div",6),a.Zb(16,"label",11),a.Hc(17,"Certificate (Optional)"),a.Yb(),a.Zb(18,"div",12),a.Zb(19,"input",13),a.hc("change",(function(e){return t.getUploadUrl(e)})),a.Yb(),a.Yb(),a.Yb(),a.Zb(20,"div",6),a.Zb(21,"label",14),a.Hc(22,"Start Date"),a.Yb(),a.Zb(23,"div",8),a.Ub(24,"input",15),a.Yb(),a.Yb(),a.Zb(25,"div",6),a.Zb(26,"label",14),a.Hc(27,"End Date"),a.Yb(),a.Zb(28,"div",8),a.Ub(29,"input",16),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(30,"div",17),a.Fc(31,j,3,0,"button",18),a.Fc(32,M,3,3,"button",19),a.Yb(),a.Yb(),a.Yb(),a.Yb()),2&e&&(a.Hb(5),a.Jc("",a.lc(6,5,t.docType)," Qualification"),a.Hb(3),a.qc("formGroup",t.qualificationForm),a.Hb(6),a.qc("ngIf",t.uploadLoading),a.Hb(17),a.qc("ngIf",t.loading),a.Hb(1),a.qc("ngIf",!t.loading))},directives:[v.E,v.p,v.i,v.c,v.o,v.h,o.t],pipes:[o.F],styles:[""]}),e})(),data:{title:"qualification"}}]}];let k=(()=>{class e{}return e.\u0275mod=a.Rb({type:e}),e.\u0275inj=a.Qb({factory:function(t){return new(t||e)},imports:[[r.g.forChild(T)],r.g]}),e})(),A=(()=>{class e{}return e.\u0275mod=a.Rb({type:e}),e.\u0275inj=a.Qb({factory:function(t){return new(t||e)},imports:[[o.c,k,v.y,s.b.forRoot()]]}),e})()}}]);