(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"x9+2":function(t,e,n){"use strict";n.r(e),n.d(e,"PaymentModule",(function(){return R}));var i=n("ofXK"),c=n("tyNb"),o=n("fXoL"),s=n("SiJz"),r=n("rvnR"),b=n("DaGL"),a=n("1LjI");function l(t,e){if(1&t){const t=o.ac();o.Zb(0,"tr"),o.Zb(1,"td"),o.Zb(2,"div"),o.Hc(3),o.kc(4,"date"),o.Yb(),o.Yb(),o.Zb(5,"td"),o.Zb(6,"div"),o.Hc(7),o.Yb(),o.Yb(),o.Zb(8,"td"),o.Zb(9,"div"),o.Hc(10),o.Yb(),o.Yb(),o.Zb(11,"td",10),o.Zb(12,"button",13),o.hc("click",(function(){o.yc(t);const n=e.$implicit;return o.jc().setDocument(n)})),o.Hc(13,"View Receipt"),o.Yb(),o.Yb(),o.Yb()}if(2&t){const t=e.$implicit;o.Hb(3),o.Ic(o.mc(4,3,t.dateCreated,"mediumDate")),o.Hb(4),o.Jc(" ",t.referenceNum," "),o.Hb(3),o.Jc(" ",t.type||"Description not available"," ")}}function p(t,e){1&t&&(o.Zb(0,"div",14),o.Zb(1,"span"),o.Hc(2,"No payments made yet, you can view and download your receipt here after payments."),o.Yb(),o.Yb())}let u=(()=>{class t{constructor(t,e,n,i,c){this.crudService=t,this.utilService=e,this.swalService=n,this.companyService=i,this.router=c,this.loading=!1,this.receipts=[]}ngOnInit(){this.getReceipts()}getReceipts(){this.loading=!0;const t=Number(this.utilService.getUser());this.crudService.getRequest("api/paymentrecept/allByUserId/"+t).subscribe(t=>{console.log(t),this.receipts=t,this.loading=!1},t=>{console.log(t),this.swalService.error("There was an error fetching the documents."),this.loading=!1})}setDocument(t){this.companyService.setDocument(t),this.router.navigate(["/billing/receipt"])}}return t.\u0275fac=function(e){return new(e||t)(o.Tb(s.a),o.Tb(r.a),o.Tb(b.a),o.Tb(a.a),o.Tb(c.c))},t.\u0275cmp=o.Nb({type:t,selectors:[["app-payment"]],decls:26,vars:2,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","d-flex","justify-content-between"],[1,"card-body"],["summary","List of projects","aria-role","table",1,"table","stripped","table-responsive-sm","table-xs-responsive","table-hover","table-outline","mb-0"],["span","1",2,"width","15%"],["span","1",2,"width","20%"],["span","1",2,"width","50%"],[1,"thead-light"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","my-5 text-center",4,"ngIf"],[1,"btn","btn-theme-primary",3,"click"],[1,"my-5","text-center"]],template:function(t,e){1&t&&(o.Zb(0,"div",0),o.Zb(1,"div",1),o.Zb(2,"div",2),o.Zb(3,"div",3),o.Zb(4,"h2"),o.Hc(5,"Payments"),o.Yb(),o.Yb(),o.Zb(6,"div",4),o.Zb(7,"table",5),o.Zb(8,"colgroup"),o.Ub(9,"col",6),o.Ub(10,"col",7),o.Ub(11,"col",8),o.Ub(12,"col",6),o.Yb(),o.Zb(13,"thead",9),o.Zb(14,"tr"),o.Zb(15,"th"),o.Hc(16,"Date"),o.Yb(),o.Zb(17,"th"),o.Hc(18,"Reference"),o.Yb(),o.Zb(19,"th"),o.Hc(20,"Description"),o.Yb(),o.Zb(21,"th",10),o.Hc(22,"Action"),o.Yb(),o.Yb(),o.Yb(),o.Zb(23,"tbody"),o.Fc(24,l,14,6,"tr",11),o.Yb(),o.Yb(),o.Fc(25,p,3,0,"div",12),o.Yb(),o.Yb(),o.Yb(),o.Yb()),2&t&&(o.Hb(24),o.qc("ngForOf",e.receipts),o.Hb(1),o.qc("ngIf",!e.loading&&0===e.receipts.length))},directives:[i.s,i.t],pipes:[i.f],styles:[""]}),t})();var d=n("K3ix"),g=n("AiYy"),h=n("3Pt+");const m=function(){return["/billing/add-subscription"]};function f(t,e){1&t&&(o.Zb(0,"button",13),o.Hc(1," Add Subscription "),o.Yb()),2&t&&o.qc("routerLink",o.sc(1,m))}function y(t,e){if(1&t){const t=o.ac();o.Zb(0,"tr"),o.Zb(1,"td"),o.Zb(2,"div"),o.Hc(3),o.Yb(),o.Yb(),o.Zb(4,"td"),o.Zb(5,"div",14),o.Hc(6),o.Yb(),o.Yb(),o.Zb(7,"td"),o.Zb(8,"div"),o.Hc(9),o.Yb(),o.Yb(),o.Zb(10,"td"),o.Zb(11,"div"),o.Hc(12),o.Yb(),o.Yb(),o.Zb(13,"td",8),o.Zb(14,"button",15),o.hc("click",(function(){o.yc(t);const n=e.$implicit,i=o.jc(),c=o.wc(26);return i.setSub(n,c)})),o.Hc(15,"Upgrade"),o.Yb(),o.Yb(),o.Yb()}if(2&t){const t=e.$implicit,n=o.jc();o.Hb(3),o.Ic(t.category||"-"),o.Hb(2),o.rc("ngClass",n.isActive(t.endDate)?"badge-success":"badge-light"),o.Hb(1),o.Jc(" ",n.isActive(t.endDate)?"active":"expired"," "),o.Hb(3),o.Jc(" ",t.startDate||"-"," "),o.Hb(3),o.Jc(" ",t.endDate||"-"," ")}}function Y(t,e){1&t&&(o.Zb(0,"div",16),o.Ub(1,"i",17),o.Hc(2," fetching... "),o.Yb())}function Z(t,e){1&t&&(o.Zb(0,"div",18),o.Zb(1,"span"),o.Hc(2,"You have not subscribed to any plan yet, you can view your subscriptions here when you subscribe."),o.Yb(),o.Yb())}function v(t,e){if(1&t&&(o.Zb(0,"option",31),o.Hc(1),o.kc(2,"number"),o.Yb()),2&t){const t=e.$implicit;o.qc("value",t.id),o.Hb(1),o.Kc(" ",t.category," (\u20a6 ",o.lc(2,3,t.amount),")")}}const H=function(){return["card","bank"]};function P(t,e){if(1&t){const t=o.ac();o.Zb(0,"div",19),o.Zb(1,"h4",20),o.Hc(2,"Select Plan"),o.Yb(),o.Zb(3,"button",21),o.hc("click",(function(){return o.yc(t),o.jc().modalRef.hide()})),o.Zb(4,"span",22),o.Hc(5,"\xd7"),o.Yb(),o.Yb(),o.Yb(),o.Zb(6,"div",23),o.Zb(7,"div",24),o.Zb(8,"label",25),o.Hc(9,"Plans"),o.Yb(),o.Zb(10,"div",26),o.Zb(11,"select",27),o.hc("change",(function(e){return o.yc(t),o.jc().setnewSub(e.target.value)})),o.Fc(12,v,3,5,"option",28),o.Yb(),o.Yb(),o.Yb(),o.Yb(),o.Zb(13,"div",29),o.Zb(14,"angular4-paystack",30),o.hc("paymentInit",(function(e){return o.yc(t),o.jc().paymentInit(e)}))("close",(function(e){return o.yc(t),o.jc().paymentFailure(e)}))("callback",(function(e){return o.yc(t),o.jc().paymentSuccess(e)})),o.Hc(15," Upgrade "),o.Yb(),o.Yb()}if(2&t){const t=o.jc();o.Hb(12),o.qc("ngForOf",t.subscriptions),o.Hb(2),o.qc("email",t.email)("amount",100*t.amount)("ref",t.ref)("channels",o.sc(5,H))}}let S=(()=>{class t{constructor(t,e,n,i){this.crudService=t,this.utilService=e,this.swal=n,this.modalService=i,this.userSubscriptions=[],this.loading=!1,this.subscriptions=[],this.email=this.utilService.getEmail(),this.ref=this.generateReference(),this.amount=0,this.paymentOptions={PBFPubKey:"FLWPUBK_TEST-a95caf78b6504bde29af398c56b5eeab-X",customer_email:this.utilService.getEmail(),customer_firstname:"Manasseh",customer_lastname:"Omachonu",custom_description:"Payment for goods",amount:5e3,currency:"NGN",customer_phone:"09024878207",txref:this.generateReference()},this.update={newSubscriptionId:0,currentSubscriptionId:0,months:0,userId:0,userSubscriptionId:0}}ngOnInit(){const t=this.utilService.getUser();this.getUserSubscriptions(t),this.getSubscriptionPriviledges()}setSub(t,e){const n=Number(this.utilService.getUser());this.update.userId=n,this.update.currentSubscriptionId=t.subscriptionId,this.update.userSubscriptionId=t.userSubscriptionId,this.update.months=t.months,this.amount=t.amount,this.modalRef=this.modalService.show(e,Object.assign({},{class:"gray modal-lg"}))}setnewSub(t){this.update.newSubscriptionId=Number(t)}getUserSubscriptions(t){this.loading=!0,this.crudService.getRequest("api/usersubscription/findValidSubscribedUserByUserId/"+t).subscribe(t=>{console.log(t),this.loading=!1,this.userSubscriptions=t},t=>{console.log(t),this.loading=!1})}getSubscriptionPriviledges(){this.loading=!0,this.crudService.getRequest("api/subscription/findAll").subscribe(t=>{console.log(t),this.loading=!1,this.subscriptions=t},t=>{console.log(t),this.loading=!1})}isActive(t){return new Date(t)>=new Date}upgradeSubscription(){this.crudService.postRequest("api/usersubscription/upgradeSubscription",this.update).subscribe(t=>{console.log(t),this.swal.success(t.message),this.getUserSubscriptions(this.update.userId)},t=>{console.log(t);const{error:e}=t;this.swal.error((null==e?void 0:e.message)||"An error occured, please try again.")})}generateReference(){let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<15;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return"CA-"+t}paymentFailure(t){console.log("Payment Failed",t)}paymentSuccess(t){console.log("Payment complete",t),this.upgradeSubscription(),this.modalRef.hide()}paymentInit(t){this.paymentInstance=t,console.log("Payment about to begin",this.paymentInstance)}}return t.\u0275fac=function(e){return new(e||t)(o.Tb(s.a),o.Tb(r.a),o.Tb(b.a),o.Tb(d.a))},t.\u0275cmp=o.Nb({type:t,selectors:[["app-subscription"]],decls:27,vars:4,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","d-flex","justify-content-between"],["class","btn bg-theme-primary text-white my-sm-0 col-sm-12 col-md-4",3,"routerLink",4,"ngIf"],[1,"card-body"],["summary","List of projects","aria-role","table",1,"table","stripped","table-responsive-sm","table-xs-responsive","table-hover","table-outline","mb-0"],[1,"thead-light"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","text-center my-5",4,"ngIf"],["class","my-5 text-center",4,"ngIf"],["template",""],[1,"btn","bg-theme-primary","text-white","my-sm-0","col-sm-12","col-md-4",3,"routerLink"],[1,"badge",3,"ngClass"],[1,"btn","btn-theme-primary",3,"click"],[1,"text-center","my-5"],[1,"fa","fa-spinner","fa-spin","mr-2"],[1,"my-5","text-center"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],["for","months",1,"col-md-3","col-form-label"],[1,"col-md-9"],["id","months","name","months",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn","ca-btn-primary",3,"email","amount","ref","channels","paymentInit","close","callback"],[3,"value"]],template:function(t,e){1&t&&(o.Zb(0,"div",0),o.Zb(1,"div",1),o.Zb(2,"div",2),o.Zb(3,"div",3),o.Zb(4,"h2"),o.Hc(5,"Subscriptions"),o.Yb(),o.Fc(6,f,2,2,"button",4),o.Yb(),o.Zb(7,"div",5),o.Zb(8,"table",6),o.Zb(9,"thead",7),o.Zb(10,"tr"),o.Zb(11,"th"),o.Hc(12,"Subscription"),o.Yb(),o.Zb(13,"th"),o.Hc(14,"Status"),o.Yb(),o.Zb(15,"th"),o.Hc(16,"Registration Date"),o.Yb(),o.Zb(17,"th"),o.Hc(18,"Expiry Date"),o.Yb(),o.Zb(19,"th",8),o.Hc(20,"Action"),o.Yb(),o.Yb(),o.Yb(),o.Zb(21,"tbody"),o.Fc(22,y,16,5,"tr",9),o.Yb(),o.Yb(),o.Fc(23,Y,3,0,"div",10),o.Fc(24,Z,3,0,"div",11),o.Yb(),o.Yb(),o.Yb(),o.Yb(),o.Fc(25,P,16,6,"ng-template",null,12,o.Gc)),2&t&&(o.Hb(6),o.qc("ngIf",!e.loading&&0===e.userSubscriptions.length),o.Hb(16),o.qc("ngForOf",e.userSubscriptions),o.Hb(1),o.qc("ngIf",e.loading),o.Hb(1),o.qc("ngIf",!e.loading&&0===e.userSubscriptions.length))},directives:[i.t,i.s,c.d,i.q,g.a,h.t,h.D],pipes:[i.g],styles:[".pricing-list[_ngcontent-%COMP%]{margin:15px 0}.plan-title[_ngcontent-%COMP%]{font-size:1.8rem}.plan-focus[_ngcontent-%COMP%]{transform:scale(1.1)}.plan-focus[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:#007770!important;color:#fff}.plan-focus[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .icon-alt[_ngcontent-%COMP%]{color:#fff}.plan-price[_ngcontent-%COMP%]{text-align:center;color:#007770;padding:2rem}.plan-price[_ngcontent-%COMP%]   .post-price[_ngcontent-%COMP%], .plan-price[_ngcontent-%COMP%]   .pre-price[_ngcontent-%COMP%]{font-size:.9rem}.plan-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:700;font-size:25px}"]}),t})(),C=(()=>{class t{constructor(){this._printStyle=[],this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(t){for(let e in t)t.hasOwnProperty(e)&&this._printStyle.push((e+JSON.stringify(t[e])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(t){let e=function(t){return`<link rel="stylesheet" type="text/css" href="${t}">`};if(-1!==t.indexOf(",")){const n=t.split(",");for(let t of n)this._styleSheetFile=this._styleSheetFile+e(t)}else this._styleSheetFile=e(t)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(t){const e=[],n=document.getElementsByTagName(t);for(let i=0;i<n.length;i++)e.push(n[i].outerHTML);return e.join("\r\n")}getHtmlContents(){let t=document.getElementById(this.printSectionId),e=t.getElementsByTagName("input");for(var n=0;n<e.length;n++)e[n].defaultValue=e[n].value;return t.innerHTML}print(){let t,e,n="",i="";this.useExistingCss&&(n=this.getElementTag("style"),i=this.getElementTag("link")),t=this.getHtmlContents(),e=window.open("","_blank","top=0,left=0,height=auto,width=auto"),e.document.open(),e.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${n}\n          ${i}\n        </head>\n        <body>\n          ${t}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              setTimeout(function() {\n                window.print();\n                setTimeout(function() { window.close(); }, 0);\n              }, ${this.printDelay});\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),e.document.close()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=o.Ob({type:t,selectors:[["button","ngxPrint",""]],hostBindings:function(t,e){1&t&&o.hc("click",(function(){return e.print()}))},inputs:{useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile",printSectionId:"printSectionId",printTitle:"printTitle"}}),t})(),O=(()=>{class t{}return t.\u0275mod=o.Rb({type:t}),t.\u0275inj=o.Qb({factory:function(e){return new(e||t)},imports:[[]]}),t})();function _(t,e){if(1&t&&(o.Zb(0,"div",18),o.Ub(1,"i",19),o.Hc(2),o.Yb()),2&t){const t=e.$implicit;o.Hb(2),o.Jc(" ",t," ")}}const w=function(t){return{"plan-focus":t}},M=function(t){return{"ca-text-primary":t}};function x(t,e){if(1&t){const t=o.ac();o.Zb(0,"div",6),o.Zb(1,"div",7),o.Zb(2,"div",8),o.Zb(3,"div",9),o.Hc(4),o.Yb(),o.Zb(5,"div",10),o.Fc(6,_,3,1,"div",11),o.Yb(),o.Yb(),o.Zb(7,"div",12),o.Zb(8,"div",13),o.Zb(9,"div",14),o.Hc(10,"Starting at"),o.Yb(),o.Zb(11,"div",15),o.Hc(12),o.Yb(),o.Zb(13,"div",16),o.Hc(14,"a month"),o.Yb(),o.Yb(),o.Zb(15,"button",17),o.hc("click",(function(){o.yc(t);const n=e.$implicit;return o.jc().setSubsription(n)})),o.Hc(16," Purchase Plan "),o.Yb(),o.Yb(),o.Yb(),o.Yb()}if(2&t){const t=e.$implicit,n=e.index;o.qc("ngClass",o.tc(5,w,n%2==1)),o.Hb(3),o.qc("ngClass",o.tc(7,M,n%2==0)),o.Hb(1),o.Jc(" ",t.category," "),o.Hb(2),o.qc("ngForOf",t.privileges),o.Hb(6),o.Jc("\u20a6",t.amount,"")}}function I(t,e){1&t&&(o.Zb(0,"div",20),o.Ub(1,"i",21),o.Hc(2," fetching...\n"),o.Yb())}const k=function(){return["card","bank"]},F=[{path:"",component:u},{path:"receipt",component:(()=>{class t{constructor(t,e){this.companyService=t,this.util=e,this.receipt=this.companyService.getDocument(),this.company=this.util.getCompany(),this.user=this.util.getUserObj(),this.today=new Date,console.log(this.company),console.log(this.user)}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Tb(a.a),o.Tb(r.a))},t.\u0275cmp=o.Nb({type:t,selectors:[["app-receipt"]],decls:114,vars:30,consts:[["id","receiptholder",1,"my-5"],[1,"receipt-wrapper"],["id","receipt",1,"effect"],["id","receipt-top"],[1,"logo"],["src","../../../../assets/img/logo/logo-primary.svg","alt","logo","srcset",""],[1,"info"],[1,"mt-2"],[1,"title"],["id","receipt-mid"],[1,"client-info"],[1,"mb-2","py-1","client"],[1,"p-2"],[1,"info","p-2"],[1,"cust"],["id","receipt-bot",1,"py-5"],[1,"payment-info"],[1,"mb-2","py-1","payment-detail"],["id","table",1,"mb-5"],["span","1",2,"width","15%"],["span","1",2,"width","20%"],["span","1",2,"width","45%"],[1,"thead-light"],[1,"tabletitle"],[1,""],[1,"service"],[1,"payment"],[1,"py-3","w-50","mx-auto"],[1,"d-flex","justify-content-center"],["type","button","printTitle","Contraccess Receipt","printSectionId","receipt","ngxPrint","",1,"btn","btn-theme-primary",3,"useExistingCss"]],template:function(t,e){1&t&&(o.Zb(0,"div",0),o.Zb(1,"div",1),o.Zb(2,"div",2),o.Zb(3,"div",3),o.Zb(4,"div",4),o.Ub(5,"img",5),o.Yb(),o.Zb(6,"div",6),o.Zb(7,"p",7),o.Hc(8,"Plot 112, Maitama Zone 2,"),o.Ub(9,"br"),o.Hc(10,"Abuja, Nigeria"),o.Yb(),o.Zb(11,"p"),o.Hc(12,"sales@contraccess.com"),o.Yb(),o.Zb(13,"p"),o.Hc(14,"09024878207"),o.Yb(),o.Yb(),o.Zb(15,"div",8),o.Zb(16,"h1"),o.Hc(17,"Payment Receipt"),o.Yb(),o.Zb(18,"h2"),o.Hc(19),o.Yb(),o.Zb(20,"p",7),o.Hc(21),o.kc(22,"date"),o.Yb(),o.Yb(),o.Yb(),o.Zb(23,"div",9),o.Zb(24,"div",10),o.Zb(25,"div",11),o.Hc(26,"Customer Information"),o.Yb(),o.Zb(27,"div",12),o.Zb(28,"div",13),o.Zb(29,"div",14),o.Zb(30,"h2"),o.Hc(31," Name "),o.Yb(),o.Zb(32,"h2"),o.Zb(33,"strong"),o.Hc(34),o.Yb(),o.Yb(),o.Yb(),o.Zb(35,"div",14),o.Zb(36,"div"),o.Hc(37," Email "),o.Yb(),o.Zb(38,"div"),o.Hc(39),o.Yb(),o.Yb(),o.Yb(),o.Yb(),o.Yb(),o.Yb(),o.Zb(40,"div",15),o.Zb(41,"div",16),o.Zb(42,"div",17),o.Hc(43,"Payment Details"),o.Yb(),o.Yb(),o.Zb(44,"div",18),o.Zb(45,"table"),o.Zb(46,"colgroup"),o.Ub(47,"col",19),o.Ub(48,"col",20),o.Ub(49,"col",21),o.Ub(50,"col",20),o.Yb(),o.Zb(51,"thead",22),o.Zb(52,"tr",23),o.Zb(53,"th",24),o.Zb(54,"h2"),o.Hc(55,"Date"),o.Yb(),o.Yb(),o.Zb(56,"th",24),o.Zb(57,"h2"),o.Hc(58,"Reference"),o.Yb(),o.Yb(),o.Zb(59,"th",24),o.Zb(60,"h2"),o.Hc(61,"Description"),o.Yb(),o.Yb(),o.Zb(62,"th",24),o.Zb(63,"h2"),o.Hc(64,"Amount"),o.Yb(),o.Yb(),o.Yb(),o.Yb(),o.Zb(65,"tr",25),o.Zb(66,"td"),o.Zb(67,"p"),o.Hc(68),o.kc(69,"date"),o.Yb(),o.Yb(),o.Zb(70,"td"),o.Zb(71,"p"),o.Hc(72),o.Yb(),o.Yb(),o.Zb(73,"td"),o.Zb(74,"p"),o.Hc(75),o.Yb(),o.Yb(),o.Zb(76,"td"),o.Zb(77,"p"),o.Hc(78),o.kc(79,"number"),o.Yb(),o.Yb(),o.Yb(),o.Zb(80,"tr",25),o.Ub(81,"td"),o.Ub(82,"td"),o.Zb(83,"td",24),o.Zb(84,"p"),o.Hc(85,"Charges"),o.Yb(),o.Yb(),o.Zb(86,"td",26),o.Zb(87,"p"),o.Hc(88),o.kc(89,"number"),o.Yb(),o.Yb(),o.Yb(),o.Zb(90,"tr",25),o.Ub(91,"td"),o.Ub(92,"td"),o.Zb(93,"td",24),o.Zb(94,"p"),o.Hc(95,"VAT"),o.Yb(),o.Yb(),o.Zb(96,"td",26),o.Zb(97,"p"),o.Hc(98),o.kc(99,"number"),o.Yb(),o.Yb(),o.Yb(),o.Zb(100,"tr",23),o.Ub(101,"td"),o.Ub(102,"td"),o.Zb(103,"td",24),o.Zb(104,"h2"),o.Hc(105,"Total"),o.Yb(),o.Yb(),o.Zb(106,"td",26),o.Zb(107,"h2"),o.Hc(108),o.kc(109,"number"),o.Yb(),o.Yb(),o.Yb(),o.Yb(),o.Yb(),o.Yb(),o.Yb(),o.Zb(110,"div",27),o.Zb(111,"div",28),o.Zb(112,"button",29),o.Hc(113," Print Receipt "),o.Yb(),o.Yb(),o.Yb(),o.Yb(),o.Yb()),2&t&&(o.Hb(19),o.Jc("#",e.receipt.referenceNum,""),o.Hb(2),o.Jc("Date issued: ",o.mc(22,12,e.today,"medium"),""),o.Hb(13),o.Ic(e.company.companyName),o.Hb(5),o.Jc(" ",e.user.email||""," "),o.Hb(29),o.Ic(o.mc(69,15,e.receipt.dateCreated,"mediumDate")),o.Hb(4),o.Ic(e.receipt.referenceNum),o.Hb(3),o.Ic(e.receipt.type),o.Hb(3),o.Jc("\u20a6 ",o.mc(79,18,e.receipt.amount-3e3,"1.2-2"),""),o.Hb(10),o.Jc("\u20a6 ",o.mc(89,21,2250,"1.2-2"),""),o.Hb(10),o.Jc("\u20a6 ",o.mc(99,24,750,"1.2-2"),""),o.Hb(10),o.Jc("\u20a6 ",o.mc(109,27,e.receipt.amount,"1.2-2"),""),o.Hb(4),o.qc("useExistingCss",!0))},directives:[C],pipes:[i.f,i.g],styles:['*[_ngcontent-%COMP%]{margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background:#e0e0e0;font-family:Roboto,sans-serif;background-repeat:repeat-y;background-size:100%}h1[_ngcontent-%COMP%]{font-size:1.5em;color:#222}h2[_ngcontent-%COMP%]{font-size:1em}h3[_ngcontent-%COMP%]{font-size:1.2em;font-weight:300;line-height:2em}p[_ngcontent-%COMP%]{font-size:.7em;color:#666;line-height:1.2em}#receiptholder[_ngcontent-%COMP%]{width:100%;height:100%}.receipt-wrapper[_ngcontent-%COMP%]{position:relative;margin:0 auto;width:650px;background:#fff;border:none;border-radius:10px;background-color:#fff;box-shadow:0 4px 20px rgba(0,0,0,.1)}#receipt[_ngcontent-%COMP%]{background:#fff}#receipt-top[_ngcontent-%COMP%]{min-height:120px;padding:40px}#receipt-mid[_ngcontent-%COMP%]{min-height:120px;margin-top:3 0}#receipt-bot[_ngcontent-%COMP%]{min-height:250px;padding:30px}.logo[_ngcontent-%COMP%]{width:200px}.client-info[_ngcontent-%COMP%]{padding:30px}.client[_ngcontent-%COMP%]{color:#212529;background:#eee;padding-left:10px;font-size:1.2rem}.clientlogo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left;height:40px;width:40px;background-size:40px 40px;border-radius:40px}.title[_ngcontent-%COMP%]{float:right}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:right}.info[_ngcontent-%COMP%]{float:left}.cust[_ngcontent-%COMP%]{color:#666;display:flex}.cust[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child, .cust[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:first-child{padding-right:5rem}.payment-detail[_ngcontent-%COMP%]{color:#212529;background:#eee;padding-left:10px;font-size:1.2rem}#description[_ngcontent-%COMP%]{margin-left:52%}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:5px 0 5px 15px;border:1px solid #eee}.tabletitle[_ngcontent-%COMP%]{padding:10px;background:#eee}.effect[_ngcontent-%COMP%]{position:relative}.effect[_ngcontent-%COMP%]:after, .effect[_ngcontent-%COMP%]:before{z-index:-1;position:absolute;content:"";bottom:15px;left:10px;width:50%;top:80%;max-width:300px;background:#777;box-shadow:0 15px 10px #777;transform:rotate(-3deg)}.effect[_ngcontent-%COMP%]:after{transform:rotate(3deg);right:10px;left:auto}']}),t})()},{path:"subscription",component:S},{path:"add-subscription",component:(()=>{class t{constructor(t,e,n){this.crudService=t,this.utilSevice=e,this.router=n,this.subscriptions=[],this.loading=!1}ngOnInit(){this.getSubscriptionPriviledges()}getSubscriptionPriviledges(){this.loading=!0,this.crudService.getRequest("api/subscription/findAll").subscribe(t=>{console.log(t),this.loading=!1,this.subscriptions=t},t=>{console.log(t),this.loading=!1})}getUserSubscriptions(t){this.crudService.getRequest("/api/usersubscription/findValidSubscribedUserByUserId/"+t).subscribe(t=>{console.log(t),this.userSubscriptions=t},t=>{console.log(t)})}setSubsription(t){this.utilSevice.setSubscription(t),this.router.navigate(["/billing/purchase-subscription"])}}return t.\u0275fac=function(e){return new(e||t)(o.Tb(s.a),o.Tb(r.a),o.Tb(c.c))},t.\u0275cmp=o.Nb({type:t,selectors:[["app-add-subsctription"]],decls:6,vars:2,consts:[[1,"animated","fadeIn","my-5"],[1,"row","dashboard","dashboard__artisan"],[1,"col-md-12"],[1,"row","my-5"],["class","col-md-4",3,"ngClass",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"col-md-4",3,"ngClass"],[1,"card"],[1,"p-3"],[1,"plan-title","text-uppercase","text-center","my-5","font-weight-bold",3,"ngClass"],[1,"pricing"],["class","pricing-list",4,"ngFor","ngForOf"],[1,"card-footer","p-5"],[1,"plan-price"],[1,"pre-price"],[1,"price"],[1,"post-price"],[1,"btn","ca-btn-primary","btn-block",3,"click"],[1,"pricing-list"],[1,"icon-alt","icon-check","mr-2"],[1,"text-center"],[1,"fa","fa-spinner","fa-spin","mr-2"]],template:function(t,e){1&t&&(o.Zb(0,"div",0),o.Zb(1,"div",1),o.Zb(2,"div",2),o.Zb(3,"div",3),o.Fc(4,x,17,9,"div",4),o.Yb(),o.Yb(),o.Yb(),o.Yb(),o.Fc(5,I,3,0,"div",5)),2&t&&(o.Hb(4),o.qc("ngForOf",e.subscriptions),o.Hb(1),o.qc("ngIf",e.loading))},directives:[i.s,i.t,i.q],styles:[".pricing-list[_ngcontent-%COMP%]{margin:15px 0}.plan-title[_ngcontent-%COMP%]{font-size:1.8rem}.plan-focus[_ngcontent-%COMP%]{transform:scale(1.1)}.plan-focus[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:#007770!important;color:#fff}.plan-focus[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .icon-alt[_ngcontent-%COMP%]{color:#fff}.plan-price[_ngcontent-%COMP%]{text-align:center;color:#007770;padding:2rem}.plan-price[_ngcontent-%COMP%]   .post-price[_ngcontent-%COMP%], .plan-price[_ngcontent-%COMP%]   .pre-price[_ngcontent-%COMP%]{font-size:.9rem}.plan-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:700;font-size:25px}"]}),t})()},{path:"purchase-subscription",component:(()=>{class t{constructor(t,e,n,i){this.util=t,this.crud=e,this.swal=n,this.router=i,this.amount=0,this.email=this.util.getEmail(),this.ref=this.generateReference(),this.sub=this.util.getSubscription(),this.paymentOptions={PBFPubKey:"FLWPUBK_TEST-a95caf78b6504bde29af398c56b5eeab-X",customer_email:this.util.getEmail(),customer_firstname:"Manasseh",customer_lastname:"Omachonu",custom_description:"Payment for goods",amount:5e3,currency:"NGN",customer_phone:"09024878207",txref:this.generateReference()},this.subInfo={months:1,subscriptionId:0,userId:0}}ngOnInit(){this.subInfo.subscriptionId=this.sub.id,this.amount=this.sub.amount,this.subInfo.userId=Number(this.util.getUser())}onChange(t){console.log(t),this.amount=this.sub.amount*t}addSubscription(){this.crud.postRequest("api/usersubscription/add",this.subInfo).subscribe(t=>{console.log(t),this.swal.success(t.message),this.router.navigate(["/billing/subscription"])},t=>{console.log(t);const{error:e}=t;this.swal.error((null==e?void 0:e.message)||"An error occured, please try again.")})}generateReference(){let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<15;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return"CA-"+t}paymentFailure(t){console.log("Payment Failed",t)}paymentSuccess(t){console.log("Payment complete",t),this.addSubscription()}paymentInit(t){this.paymentInstance=t,console.log("Payment about to begin",this.paymentInstance)}}return t.\u0275fac=function(e){return new(e||t)(o.Tb(r.a),o.Tb(s.a),o.Tb(b.a),o.Tb(c.c))},t.\u0275cmp=o.Nb({type:t,selectors:[["app-purchase-subscription"]],decls:37,vars:10,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","d-flex","justify-content-between"],[1,"card-body"],[1,"form-horizontal"],[1,"form-group","row"],["for","months",1,"col-md-3","col-form-label"],[1,"col-md-9"],["id","months","name","months",1,"form-control",3,"ngModel","ngModelChange","change"],["value","1"],["value","3"],["value","6"],["value","12"],[1,"card-footer","mb-3"],[1,"btn","ca-btn-primary",3,"email","amount","ref","channels","paymentInit","close","callback"]],template:function(t,e){1&t&&(o.Zb(0,"div",0),o.Zb(1,"div",1),o.Zb(2,"div",2),o.Zb(3,"div",3),o.Zb(4,"h2"),o.Hc(5,"Purchase Subscription"),o.Yb(),o.Yb(),o.Zb(6,"div",4),o.Zb(7,"form",5),o.Zb(8,"div",6),o.Zb(9,"label",7),o.Hc(10,"Plan"),o.Yb(),o.Zb(11,"div",8),o.Zb(12,"div"),o.Hc(13),o.Yb(),o.Yb(),o.Yb(),o.Zb(14,"div",6),o.Zb(15,"label",7),o.Hc(16,"Duration"),o.Yb(),o.Zb(17,"div",8),o.Zb(18,"select",9),o.hc("ngModelChange",(function(t){return e.subInfo.months=t}))("change",(function(t){return e.onChange(t.target.value)})),o.Zb(19,"option",10),o.Hc(20,"1 Month"),o.Yb(),o.Zb(21,"option",11),o.Hc(22,"3 Months"),o.Yb(),o.Zb(23,"option",12),o.Hc(24,"6 Months"),o.Yb(),o.Zb(25,"option",13),o.Hc(26,"1 Year"),o.Yb(),o.Yb(),o.Yb(),o.Yb(),o.Zb(27,"div",6),o.Zb(28,"label",7),o.Hc(29,"Amount"),o.Yb(),o.Zb(30,"div",8),o.Zb(31,"div"),o.Hc(32),o.kc(33,"number"),o.Yb(),o.Yb(),o.Yb(),o.Yb(),o.Yb(),o.Zb(34,"div",14),o.Zb(35,"angular4-paystack",15),o.hc("paymentInit",(function(t){return e.paymentInit(t)}))("close",(function(t){return e.paymentFailure(t)}))("callback",(function(t){return e.paymentSuccess(t)})),o.Hc(36," Make Payment "),o.Yb(),o.Yb(),o.Yb(),o.Yb(),o.Yb()),2&t&&(o.Hb(13),o.Ic(e.sub.category),o.Hb(5),o.qc("ngModel",e.subInfo.months),o.Hb(14),o.Jc(" \u20a6 ",o.lc(33,7,e.amount),""),o.Hb(3),o.qc("email",e.email)("amount",100*e.amount)("ref",e.ref)("channels",o.sc(9,k)))},directives:[h.E,h.p,h.q,h.A,h.o,h.r,h.t,h.D,g.a],pipes:[i.g],styles:[""]}),t})()}];let T=(()=>{class t{}return t.\u0275mod=o.Rb({type:t}),t.\u0275inj=o.Qb({factory:function(e){return new(e||t)},imports:[[c.g.forChild(F)],c.g]}),t})();var U=n("RFI8");let R=(()=>{class t{}return t.\u0275mod=o.Rb({type:t}),t.\u0275inj=o.Qb({factory:function(e){return new(e||t)},imports:[[i.c,T,O,h.k,h.y,d.b.forRoot(),g.b.forRoot("pk_test_961f74cc9467b58c13450983fff659a6bb8a52d3"),U.a.forRoot({key:"FLWPUBK_TEST-a95caf78b6504bde29af398c56b5eeab-X",isTest:!0})]]}),t})()}}]);