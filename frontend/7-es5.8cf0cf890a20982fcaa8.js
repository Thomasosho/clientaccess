function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"C/nz":function(e,t,n){"use strict";n.d(t,"a",(function(){return Z}));var r=n("fXoL"),i=n("SiJz"),c=n("DaGL"),o=n("rvnR"),a=n("tyNb"),b=n("ofXK"),l=n("3Pt+"),s=n("VADE");function d(e,t){1&e&&(r.Zb(0,"div",20),r.Zb(1,"h2"),r.Hc(2,"Procurements"),r.Yb(),r.Yb())}function u(e,t){if(1&e&&(r.Zb(0,"option",21),r.Hc(1),r.Yb()),2&e){var n=t.$implicit;r.qc("value",n),r.Hb(1),r.Ic(n)}}function f(e,t){if(1&e&&(r.Zb(0,"option",21),r.Hc(1),r.Yb()),2&e){var n=t.$implicit;r.qc("value",n.value),r.Hb(1),r.Ic(n.name)}}function p(e,t){if(1&e){var n=r.ac();r.Zb(0,"button",30),r.hc("click",(function(){r.yc(n);var e=r.jc().$implicit;return r.jc().setTender(e,"procure")})),r.Hc(1," Procure Tender "),r.Yb()}}function v(e,t){1&e&&(r.Zb(0,"button",31),r.Hc(1," Procured "),r.Yb())}function h(e,t){1&e&&(r.Zb(0,"button",32),r.Hc(1," Expired "),r.Yb())}function g(e,t){if(1&e){var n=r.ac();r.Zb(0,"tr"),r.Zb(1,"td"),r.Zb(2,"div",22),r.Zb(3,"div",23),r.Zb(4,"h2",24),r.Hc(5),r.Yb(),r.Zb(6,"h3",24),r.Hc(7),r.Yb(),r.Yb(),r.Hc(8),r.Zb(9,"div",25),r.Hc(10),r.kc(11,"date"),r.kc(12,"date"),r.Yb(),r.Yb(),r.Zb(13,"div",23),r.Zb(14,"button",26),r.hc("click",(function(){r.yc(n);var e=t.$implicit;return r.jc().setTender(e)})),r.Hc(15," View Tender "),r.Yb(),r.Fc(16,p,2,0,"button",27),r.Fc(17,v,2,0,"button",28),r.Fc(18,h,2,0,"button",29),r.Yb(),r.Yb(),r.Yb()}if(2&e){var i=t.$implicit,c=r.jc();r.Hb(5),r.Ic(i.mdaName),r.Hb(2),r.Ic(i.title),r.Hb(1),r.Jc(" ",i.collectionOfBidDocument," "),r.Hb(2),r.Kc(" Published: ",r.mc(11,8,i.publishDate,"mediumDate")," | Expires: ",r.mc(12,11,i.expiryDate,"mediumDate")," "),r.Hb(6),r.qc("ngIf",c.checkExpired(i.expiryDate)&&!c.checkProcured(i.id)),r.Hb(1),r.qc("ngIf",c.checkProcured(i.id)),r.Hb(1),r.qc("ngIf",!c.checkExpired(i.expiryDate))}}function m(e,t){1&e&&(r.Zb(0,"div",33),r.Ub(1,"i",34),r.Zb(2,"span"),r.Hc(3,"Fetching Tender..."),r.Yb(),r.Yb())}function y(e,t){1&e&&(r.Zb(0,"div",33),r.Zb(1,"span"),r.Hc(2,"No tender added, add tender to view them here."),r.Yb(),r.Yb())}function Y(e,t){1&e&&(r.Zb(0,"div",33),r.Zb(1,"span"),r.Hc(2,"No matching results."),r.Yb(),r.Yb())}var Z=function(){var e=function(){function e(t,n,r,i){_classCallCheck(this,e),this.crudService=t,this.swalService=n,this.utilService=r,this.router=i,this.isHome=!1,this.allTender=[],this.procured=[],this.filter={addedBy:"",category:"",collectionOfBidDocument:"",title:"",mdaName:"",openingInfo:"",dateAdded:"",expiryDate:"",publishDate:"",openingDate:""}}return _createClass(e,[{key:"ngOnInit",value:function(){this.isHome="/"===this.router.url,this.isHome?this.getPublicPublishedTender():(this.getPublishedTender(),this.getProcured())}},{key:"getYear",value:function(e){var t=(new Date).getFullYear();return _toConsumableArray(Array(e).keys()).map((function(e){return t-e}))}},{key:"getMonths",value:function(){return[{name:"Jan",value:"01"},{name:"Feb",value:"02"},{name:"Mar",value:"03"},{name:"Apr",value:"04"},{name:"May",value:"05"},{name:"Jun",value:"06"},{name:"Jul",value:"07"},{name:"Aug",value:"08"},{name:"Sep",value:"09"},{name:"Oct",value:"10"},{name:"Nov",value:"11"},{name:"Dec",value:"12"}]}},{key:"checkExpired",value:function(e){return!(new Date>new Date(e))}},{key:"checkProcured",value:function(e){return this.procured.filter((function(t){return t.id===e})).length}},{key:"getProcured",value:function(){var e=this;this.loading=!0;var t=this.utilService.getCompany().id;this.crudService.getRequest("api/tenderapplication/allByCompanyProfileId/"+t).subscribe((function(t){e.loading=!1,e.procured=t}),(function(t){e.loading=!1,e.swalService.error("There was an error fetching all tender.")}))}},{key:"getPublishedTender",value:function(){var e=this;this.loading=!0;var t=this.utilService.getToken();this.crudService.getRequestImAuth("api/tender/allPublished",t).subscribe((function(t){e.allTender=t,e.loading=!1}),(function(t){console.log(t),e.loading=!1,e.swalService.error("There was an error fetching all tender.")}))}},{key:"getPublicPublishedTender",value:function(){var e=this;this.loading=!0,this.crudService.getRequestNoAuth("api/tender/allPublishedPublic").subscribe((function(t){e.allTender=t,e.loading=!1}),(function(t){console.log(t),e.loading=!1,e.swalService.error("There was an error fetching all tender.")}))}},{key:"setTender",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"view",n=this.checkProcured(e.id);return e.procured=n,this.utilService.setTender(e),this.router.navigate("procure"===t?["/contractor/procurement/upload/affidavit"]:["/contractor/procurement/view-tender"])}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Tb(i.a),r.Tb(c.a),r.Tb(o.a),r.Tb(a.c))},e.\u0275cmp=r.Nb({type:e,selectors:[["app-procurement"]],decls:36,vars:16,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["class","card-header",4,"ngIf"],[1,"card-body"],[1,"card","search","container","py-3","d-flex"],[1,"searchbar"],["type","text","placeholder","Search...",1,"search-input",3,"ngModel","ngModelChange"],["aria-hidden","true",1,"fa","fa-search"],[1,"d-flex"],[1,"form-group","text-value","d-flex","m-2"],["for","ccyear",1,"mr-1"],["id","ccyear",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["summary","List of countracts","aria-role","table",1,"table","stripped-alt","table-responsive-sm","table-xs-responsive","table-hover","table-outline","mb-0"],[1,"thead-light"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","my-5 text-center",4,"ngIf"],[1,"card-header"],[3,"value"],[1,"text-left"],[1,"text-center","my-2"],[1,"my-1"],[1,"text-center","small","font-weight-bold","text-theme-primary","py-2"],[1,"btn","btn-success","mx-2",3,"click"],["class","btn btn-theme-primary mx-2",3,"click",4,"ngIf"],["class","btn btn-theme-primary disabled mx-2",4,"ngIf"],["class","btn btn-warning disabled",4,"ngIf"],[1,"btn","btn-theme-primary","mx-2",3,"click"],[1,"btn","btn-theme-primary","disabled","mx-2"],[1,"btn","btn-warning","disabled"],[1,"my-5","text-center"],[1,"fa","fa-spinner","fa-spin","mr-2"]],template:function(e,t){1&e&&(r.Zb(0,"div",0),r.Zb(1,"div",1),r.Zb(2,"div",2),r.Fc(3,d,3,0,"div",3),r.Zb(4,"div",4),r.Zb(5,"div",5),r.Zb(6,"div",6),r.Zb(7,"input",7),r.hc("ngModelChange",(function(e){return t.filter.title=e})),r.Yb(),r.Ub(8,"i",8),r.Yb(),r.Zb(9,"div",9),r.Zb(10,"div",10),r.Zb(11,"label",11),r.Hc(12,"Year: "),r.Yb(),r.Zb(13,"select",12),r.hc("ngModelChange",(function(e){return t.filter.publishDate=e})),r.Zb(14,"option",13),r.Hc(15,"---Select Year---"),r.Yb(),r.Fc(16,u,2,2,"option",14),r.Yb(),r.Yb(),r.Zb(17,"div",10),r.Zb(18,"label",11),r.Hc(19,"Month: "),r.Yb(),r.Zb(20,"select",12),r.hc("ngModelChange",(function(e){return t.filter.publishDate=e})),r.Zb(21,"option",13),r.Hc(22,"---Select Month---"),r.Yb(),r.Fc(23,f,2,2,"option",14),r.Yb(),r.Yb(),r.Yb(),r.Yb(),r.Zb(24,"table",15),r.Zb(25,"thead",16),r.Zb(26,"tr",17),r.Zb(27,"th"),r.Hc(28,"Tender"),r.Yb(),r.Yb(),r.Yb(),r.Zb(29,"tbody"),r.Fc(30,g,19,14,"tr",18),r.kc(31,"filterBy"),r.Yb(),r.Yb(),r.Fc(32,m,4,0,"div",19),r.Fc(33,y,3,0,"div",19),r.Fc(34,Y,3,0,"div",19),r.kc(35,"filterBy"),r.Yb(),r.Yb(),r.Yb(),r.Yb()),2&e&&(r.Hb(3),r.qc("ngIf",!t.isHome),r.Hb(4),r.qc("ngModel",t.filter.title),r.Hb(6),r.qc("ngModel",t.filter.publishDate),r.Hb(3),r.qc("ngForOf",t.getYear(5)),r.Hb(4),r.qc("ngModel",t.filter.publishDate),r.Hb(3),r.qc("ngForOf",t.getMonths()),r.Hb(7),r.qc("ngForOf",r.mc(31,10,t.allTender,t.filter)),r.Hb(2),r.qc("ngIf",t.loading),r.Hb(1),r.qc("ngIf",!t.loading&&0===t.allTender.length),r.Hb(1),r.qc("ngIf",!t.loading&&0===r.mc(35,13,t.allTender,t.filter).length))},directives:[b.t,l.c,l.o,l.r,l.A,l.t,l.D,b.s],pipes:[s.a,b.f],styles:[".search[_ngcontent-%COMP%]{justify-content:center;border:1px solid #f3f3f3}.search[_ngcontent-%COMP%], .searchbar[_ngcontent-%COMP%]{display:flex;align-items:center}.searchbar[_ngcontent-%COMP%]{height:40px;background-color:#fff;width:60%;padding:0 20px;border-radius:50px;border:1px solid #eee;cursor:pointer}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:15px;height:38px;width:100%;border:none;font-family:Montserrat,sans-serif;padding:15px}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.searchbar[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-input-placeholder{color:#e0e0e0}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-moz-placeholder, .searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-moz-placeholder{color:#e0e0e0}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-ms-input-placeholder{color:#e0e0e0}"]}),e}()},Cooc:function(e,t,n){"use strict";n.r(t),n.d(t,"ProcurementModule",(function(){return ce}));var r=n("ofXK"),i=n("tyNb"),c=n("C/nz"),o=n("Iab2"),a=n("fXoL"),b=n("SiJz"),l=n("DaGL"),s=n("rvnR");function d(e,t){if(1&e){var n=a.ac();a.Zb(0,"tr"),a.Zb(1,"td"),a.Zb(2,"div"),a.Hc(3),a.Yb(),a.Yb(),a.Zb(4,"td"),a.Zb(5,"div"),a.Hc(6),a.Yb(),a.Yb(),a.Zb(7,"td"),a.Zb(8,"div"),a.Hc(9),a.Yb(),a.Yb(),a.Zb(10,"td"),a.Zb(11,"div"),a.Hc(12),a.Yb(),a.Yb(),a.Zb(13,"td"),a.Zb(14,"div"),a.Hc(15),a.Yb(),a.Yb(),a.Zb(16,"td"),a.Zb(17,"div"),a.Hc(18),a.Yb(),a.Yb(),a.Zb(19,"td",7),a.Zb(20,"button",11),a.hc("click",(function(){a.yc(n);var e=t.$implicit;return a.jc().download(e)})),a.Hc(21,"Download"),a.Yb(),a.Yb(),a.Yb()}if(2&e){var r=t.$implicit;a.Hb(3),a.Jc(" ",r.mdaName," "),a.Hb(3),a.Jc(" ",r.title," "),a.Hb(3),a.Jc(" ",r.category," "),a.Hb(3),a.Jc(" ",r.lotNumber," "),a.Hb(3),a.Jc(" ",r.dateAdded," "),a.Hb(3),a.Jc(" ",r.applicationFee," ")}}function u(e,t){1&e&&(a.Zb(0,"div",12),a.Zb(1,"span"),a.Hc(2,"Fetching tender history..."),a.Yb(),a.Yb())}function f(e,t){1&e&&(a.Zb(0,"div",12),a.Zb(1,"span"),a.Hc(2,"You have not applied for any tender yet, submit an application to view them here."),a.Yb(),a.Yb())}var p,v=((p=function(){function e(t,n,r){_classCallCheck(this,e),this.crudService=t,this.swalService=n,this.utilService=r,this.loading=!1,this.allTender=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.getTenderHistory()}},{key:"getTenderHistory",value:function(){var e=this;this.loading=!0;var t=this.utilService.getCompany().id;this.crudService.getRequest("api/tenderapplication/allByCompanyProfileId/"+t).subscribe((function(t){console.log(t),e.allTender=t,e.loading=!1}),(function(t){console.log(t),e.loading=!1,e.swalService.error("There was an error fetching all tender.")}))}},{key:"download",value:function(e){var t=e.billOfQuantityUrl,n=e.mdaName+" - "+e.category;this.crudService.downloadFile(t).subscribe((function(e){return Object(o.saveAs)(e,n+".pdf")}))}}]),e}()).\u0275fac=function(e){return new(e||p)(a.Tb(b.a),a.Tb(l.a),a.Tb(s.a))},p.\u0275cmp=a.Nb({type:p,selectors:[["app-tender-history"]],decls:28,vars:4,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","d-flex","justify-content-between"],[1,"card-body"],["summary","List of projects","aria-role","table",1,"table","stripped","table-responsive-sm","table-xs-responsive","table-hover","table-outline","mb-0"],[1,"thead-light"],[1,"text-center"],[1,""],[4,"ngFor","ngForOf"],["class","my-5 text-center",4,"ngIf"],[1,"btn","btn-theme-primary",3,"click"],[1,"my-5","text-center"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"div",2),a.Zb(3,"div",3),a.Zb(4,"h2"),a.Hc(5),a.Yb(),a.Yb(),a.Zb(6,"div",4),a.Zb(7,"table",5),a.Zb(8,"thead",6),a.Zb(9,"tr",7),a.Zb(10,"th"),a.Hc(11,"MDA"),a.Yb(),a.Zb(12,"th"),a.Hc(13,"Tender"),a.Yb(),a.Zb(14,"th"),a.Hc(15,"Category"),a.Yb(),a.Zb(16,"th"),a.Hc(17,"Lot Number"),a.Yb(),a.Zb(18,"th"),a.Hc(19,"Application Date"),a.Yb(),a.Zb(20,"th"),a.Hc(21,"Amount"),a.Yb(),a.Zb(22,"th"),a.Hc(23,"Action"),a.Yb(),a.Yb(),a.Yb(),a.Zb(24,"tbody",8),a.Fc(25,d,22,6,"tr",9),a.Yb(),a.Yb(),a.Fc(26,u,3,0,"div",10),a.Fc(27,f,3,0,"div",10),a.Yb(),a.Yb(),a.Yb(),a.Yb()),2&e&&(a.Hb(5),a.Jc("Tender History(",t.allTender.length,")"),a.Hb(20),a.qc("ngForOf",t.allTender),a.Hb(1),a.qc("ngIf",t.loading),a.Hb(1),a.qc("ngIf",!t.loading&&0===t.allTender.length))},directives:[r.s,r.t],styles:[""]}),p);function h(e,t){if(1&e){var n=a.ac();a.Zb(0,"tr"),a.Zb(1,"td"),a.Zb(2,"div"),a.Ub(3,"img",13),a.Yb(),a.Yb(),a.Zb(4,"td"),a.Zb(5,"div"),a.Hc(6),a.Yb(),a.Yb(),a.Zb(7,"td",9),a.Zb(8,"button",14),a.hc("click",(function(){a.yc(n);var e=t.$implicit;return a.jc().download(e)})),a.Hc(9,"Download"),a.Yb(),a.Yb(),a.Yb()}if(2&e){var r=t.$implicit;a.Hb(3),a.qc("src",r.imageUrl,a.Ac),a.Hb(3),a.Jc(" ",r.tender.title||"Description not available"," ")}}function g(e,t){1&e&&(a.Zb(0,"div",15),a.Zb(1,"span"),a.Hc(2,"No documents added, add documents to view them here."),a.Yb(),a.Yb())}var m,y=((m=function(){function e(t,n,r,c,o){var a=this;_classCallCheck(this,e),this.crudService=t,this.utilService=n,this.swalService=r,this.route=c,this.router=o,this.viewType={affidavit:"api/affidavit/allByCompanyId","bank-refferal":"api/bankreferral/allByCompanyId"},this.documents=[],this.docType="",this.getUrl="",this.loading=!1,this.navigationSubscription=this.router.events.subscribe((function(e){var t=a.route.snapshot.params.doc;a.docType=t;var n=a.utilService.getCompany().id;a.getUrl="".concat(a.viewType[t],"/").concat(n),e instanceof i.b&&a.getAllDocuments()}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"getAllDocuments",value:function(){var e=this;this.loading=!0,this.crudService.getRequest(this.getUrl).subscribe((function(t){console.log(t),e.documents=t,e.loading=!1}),(function(t){console.log(t),e.swalService.error("There was an error fetching the documents."),e.loading=!1}))}},{key:"download",value:function(e){var t=e.imageUrl,n=e.dateUploaded,r=t.substr(t.lastIndexOf("."),t.length-1),i=this.docType+" - "+n+r;this.crudService.downloadFile(t).subscribe((function(e){return saveAs(e,""+i)}))}},{key:"ngOnDestroy",value:function(){this.navigationSubscription&&this.navigationSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||m)(a.Tb(b.a),a.Tb(s.a),a.Tb(l.a),a.Tb(i.a),a.Tb(i.c))},m.\u0275cmp=a.Nb({type:m,selectors:[["app-doc-view"]],decls:25,vars:9,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","d-flex","justify-content-between"],[1,"card-body"],["summary","List of projects","aria-role","table",1,"table","stripped","table-responsive-sm","table-xs-responsive","table-hover","table-outline","mb-0"],["span","1",2,"width","20%"],["span","1",2,"width","60%"],[1,"thead-light"],[1,"text-center"],[1,""],[4,"ngFor","ngForOf"],["class","my-5 text-center",4,"ngIf"],["onError","this.src='../../../../assets/img/pdf.png'","width","150","height","150","alt","","srcset","",3,"src"],[1,"btn","btn-theme-primary",3,"click"],[1,"my-5","text-center"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"div",2),a.Zb(3,"div",3),a.Zb(4,"h2"),a.Hc(5),a.kc(6,"titlecase"),a.Yb(),a.Yb(),a.Zb(7,"div",4),a.Zb(8,"table",5),a.Zb(9,"colgroup"),a.Ub(10,"col",6),a.Ub(11,"col",7),a.Ub(12,"col",6),a.Yb(),a.Zb(13,"thead",8),a.Zb(14,"tr",9),a.Zb(15,"th"),a.Hc(16),a.kc(17,"titlecase"),a.Yb(),a.Zb(18,"th"),a.Hc(19,"Corresponding Tender"),a.Yb(),a.Zb(20,"th"),a.Hc(21,"Action"),a.Yb(),a.Yb(),a.Yb(),a.Zb(22,"tbody",10),a.Fc(23,h,10,2,"tr",11),a.Yb(),a.Yb(),a.Fc(24,g,3,0,"div",12),a.Yb(),a.Yb(),a.Yb(),a.Yb()),2&e&&(a.Hb(5),a.Kc("",a.lc(6,5,t.docType),"(",t.documents.length,")"),a.Hb(11),a.Ic(a.lc(17,7,t.docType)),a.Hb(7),a.qc("ngForOf",t.documents),a.Hb(1),a.qc("ngIf",!t.loading&&0===t.documents.length))},directives:[r.s,r.t],pipes:[r.F],styles:[""]}),m),Y=n("1LjI"),Z=n("3Pt+");function H(e,t){if(1&e&&(a.Zb(0,"option",22),a.Hc(1),a.Yb()),2&e){var n=t.$implicit;a.qc("value",n.lotNumber),a.Hb(1),a.Kc("",n.lotNumber," ",n.category?" - "+n.category:"","")}}function w(e,t){if(1&e){var n=a.ac();a.Zb(0,"div",6),a.Zb(1,"label",18),a.Hc(2,"Tender Lot"),a.Yb(),a.Zb(3,"div",8),a.Zb(4,"select",19),a.hc("change",(function(e){return a.yc(n),a.jc().setTenderLot(e.target.value)})),a.Zb(5,"option",20),a.Hc(6,"Select Lot"),a.Yb(),a.Fc(7,H,2,3,"option",21),a.Yb(),a.Yb(),a.Yb()}if(2&e){var r=t.ngIf;a.Hb(7),a.qc("ngForOf",r)}}function k(e,t){1&e&&(a.Zb(0,"div",23),a.Zb(1,"div",24),a.Zb(2,"span",25),a.Hc(3,"Loading..."),a.Yb(),a.Yb(),a.Zb(4,"div",26),a.Zb(5,"span",25),a.Hc(6,"Loading..."),a.Yb(),a.Yb(),a.Zb(7,"div",27),a.Zb(8,"span",25),a.Hc(9,"Loading..."),a.Yb(),a.Yb(),a.Yb())}function T(e,t){1&e&&(a.Zb(0,"button",28),a.Ub(1,"span",29),a.Hc(2," Loading... "),a.Yb())}function S(e,t){if(1&e){var n=a.ac();a.Zb(0,"button",30),a.hc("click",(function(){return a.yc(n),a.jc().uploadDocument()})),a.Hc(1," Upload Bank Refferal (jpg or PDF) "),a.Yb()}if(2&e){var r=a.jc();a.qc("disabled",r.uploadSuccessful)}}function x(e,t){if(1&e){var n=a.ac();a.Zb(0,"button",31),a.hc("click",(function(){return a.yc(n),a.jc().nextProcess()})),a.Hc(1," Proceed "),a.Yb()}}var C,_=((C=function(){function e(t,n,r,i,c){_classCallCheck(this,e),this.crudService=t,this.utilService=n,this.swalService=r,this.companyService=i,this.router=c,this.loading=!1,this.uploadLoading=!1,this.uploadSuccessful=!1,this.tender=this.utilService.getTender()}return _createClass(e,[{key:"ngOnInit",value:function(){this.tender=this.companyService.getTender(),this.lots$=this.getTenderLots(this.tender.id)}},{key:"getTenderLots",value:function(e){return this.crudService.getRequest("api/tenderlot/allByTender/"+e)}},{key:"setTenderLot",value:function(e){this.tender.lotNumber=e,console.log(this.tender)}},{key:"uploadDocument",value:function(){var e=this;if(this.loading=!0,this.fileUrl){var t={imageUrl:this.fileUrl,id:0,projectId:this.tender.id,companyId:Number(this.utilService.getCompany().id)};this.crudService.postRequest("api/bankreferral/add",t).subscribe((function(t){e.loading=!1,e.uploadSuccessful=!0,e.swalService.success("Uploaded Successfully")}),(function(t){console.log(t),e.loading=!1,e.swalService.error(t.message)}))}else this.loading=!1,this.swalService.error("Could not upload file, file path is empty.")}},{key:"getUploadUrl",value:function(e){var t=this;this.uploadLoading=!0;var n=e.target.files[0],r=new FormData;r.append("file",n,n.name),this.crudService.postRequestFile("uploadMe",r).subscribe((function(e){0===e.code?(t.uploadLoading=!1,t.fileUrl=e.message,t.swalService.success("File path saved.")):(t.uploadLoading=!1,t.swalService.error("An error occured"))}),(function(e){console.log(e),t.uploadLoading=!1,t.swalService.error("Could not get file path.")}))}},{key:"nextProcess",value:function(){if(!this.uploadSuccessful)return this.swalService.warning("Please upload the required document then click next to proceed.");this.utilService.setTender(this.tender),this.router.navigate(["/contractor/procurement/summary"])}}]),e}()).\u0275fac=function(e){return new(e||C)(a.Tb(b.a),a.Tb(s.a),a.Tb(l.a),a.Tb(Y.a),a.Tb(i.c))},C.\u0275cmp=a.Nb({type:C,selectors:[["app-doc-upload"]],decls:25,vars:8,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-10"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row"],["for","year",1,"col-md-3","col-form-label"],[1,"col-md-9"],["class","form-group row",4,"ngIf"],["class","row d-flex justify-content-center my-2",4,"ngIf"],["for","file-input",1,"col-md-3","col-form-label"],["type","file","id","file-input","name","file-input",3,"change"],["docUpload",""],[1,"card-footer"],["class","btn btn-success mx-3","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-success mx-3",3,"disabled","click",4,"ngIf"],["type","submit","class","btn btn-theme-primary mx-3",3,"click",4,"ngIf"],["for","lot",1,"col-md-3","col-form-label"],["id","lot","name","lot",1,"form-control",3,"change"],["value","","selected","","disabled","","hidden",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"row","d-flex","justify-content-center","my-2"],["role","status",1,"spinner-grow","text-success"],[1,"sr-only"],["role","status",1,"spinner-grow","text-primary"],["role","status",1,"spinner-grow","text-info"],["type","button","disabled","",1,"btn","btn-success","mx-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-success","mx-3",3,"disabled","click"],["type","submit",1,"btn","btn-theme-primary","mx-3",3,"click"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"div",2),a.Zb(3,"div",3),a.Hc(4,"Upload Bank Refferal"),a.Yb(),a.Zb(5,"div",4),a.Zb(6,"form",5),a.hc("ngSubmit",(function(){return t.uploadDocument()})),a.Zb(7,"div",6),a.Zb(8,"label",7),a.Hc(9,"Tender"),a.Yb(),a.Zb(10,"div",8),a.Hc(11),a.Yb(),a.Yb(),a.Fc(12,w,8,1,"div",9),a.kc(13,"async"),a.Fc(14,k,10,0,"div",10),a.Zb(15,"div",6),a.Zb(16,"label",11),a.Hc(17,"File"),a.Yb(),a.Zb(18,"div",8),a.Zb(19,"input",12,13),a.hc("change",(function(e){return t.getUploadUrl(e)})),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(21,"div",14),a.Fc(22,T,3,0,"button",15),a.Fc(23,S,2,1,"button",16),a.Fc(24,x,2,0,"button",17),a.Yb(),a.Yb(),a.Yb(),a.Yb()),2&e&&(a.Hb(11),a.Jc(" ",t.tender.title," "),a.Hb(1),a.qc("ngIf",a.lc(13,6,t.lots$)),a.Hb(2),a.qc("ngIf",t.uploadLoading),a.Hb(8),a.qc("ngIf",t.loading),a.Hb(1),a.qc("ngIf",!t.loading),a.Hb(1),a.qc("ngIf",!t.loading))},directives:[Z.E,Z.p,Z.q,r.t,Z.t,Z.D,r.s],pipes:[r.b],styles:[""]}),C);function I(e,t){1&e&&(a.Zb(0,"div",16),a.Zb(1,"div",17),a.Zb(2,"span",18),a.Hc(3,"Loading..."),a.Yb(),a.Yb(),a.Zb(4,"div",19),a.Zb(5,"span",18),a.Hc(6,"Loading..."),a.Yb(),a.Yb(),a.Zb(7,"div",20),a.Zb(8,"span",18),a.Hc(9,"Loading..."),a.Yb(),a.Yb(),a.Yb())}function O(e,t){1&e&&(a.Zb(0,"button",21),a.Ub(1,"span",22),a.Hc(2," Loading... "),a.Yb())}function P(e,t){if(1&e){var n=a.ac();a.Zb(0,"button",23),a.hc("click",(function(){return a.yc(n),a.jc().uploadDocument()})),a.Hc(1," Upload Affidavit (jpg or PDF) "),a.Yb()}if(2&e){var r=a.jc();a.qc("disabled",r.uploadSuccessful)}}function F(e,t){if(1&e){var n=a.ac();a.Zb(0,"button",24),a.hc("click",(function(){return a.yc(n),a.jc().nextProcess()})),a.Hc(1," Next "),a.Yb()}}var M,q=((M=function(){function e(t,n,r,i){_classCallCheck(this,e),this.crudService=t,this.utilService=n,this.swalService=r,this.router=i,this.loading=!1,this.uploadLoading=!1,this.uploadSuccessful=!1,this.tender=this.utilService.getTender()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"uploadDocument",value:function(){var e=this;if(this.loading=!0,this.fileUrl){var t={imageUrl:this.fileUrl,id:0,projectId:this.tender.id,companyId:Number(this.utilService.getCompany().id)};this.crudService.postRequest("api/affidavit/add",t).subscribe((function(t){console.log(t),e.loading=!1,e.uploadSuccessful=!0,e.swalService.success("Uploaded Successfully")}),(function(t){console.log(t),e.loading=!1,e.swalService.error(t.message)}))}else this.loading=!1,this.swalService.error("Could not upload file, file path is empty.")}},{key:"getUploadUrl",value:function(e){var t=this;this.uploadLoading=!0;var n=e.target.files[0],r=new FormData;r.append("file",n,n.name),this.crudService.postRequestFile("uploadMe",r).subscribe((function(e){0===e.code?(t.uploadLoading=!1,t.fileUrl=e.message,t.swalService.success("File path saved.")):(t.uploadLoading=!1,t.swalService.error("An error occured"))}),(function(e){console.log(e),t.uploadLoading=!1,t.swalService.error("Could not get file path.")}))}},{key:"nextProcess",value:function(){if(!this.uploadSuccessful)return this.swalService.warning("Please upload the required document then click next to proceed.");this.router.navigate(["/contractor/procurement/upload/bank-refferal"])}}]),e}()).\u0275fac=function(e){return new(e||M)(a.Tb(b.a),a.Tb(s.a),a.Tb(l.a),a.Tb(i.c))},M.\u0275cmp=a.Nb({type:M,selectors:[["app-affidavit"]],decls:22,vars:5,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-10"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row"],["for","year",1,"col-md-3","col-form-label"],[1,"col-md-9"],["class","row d-flex justify-content-center my-2",4,"ngIf"],["for","file-input",1,"col-md-3","col-form-label"],["type","file","id","file-input","name","file-input",3,"change"],[1,"card-footer"],["class","btn btn-success mx-3","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-success mx-3",3,"disabled","click",4,"ngIf"],["type","submit","class","btn btn-theme-primary mx-3",3,"click",4,"ngIf"],[1,"row","d-flex","justify-content-center","my-2"],["role","status",1,"spinner-grow","text-success"],[1,"sr-only"],["role","status",1,"spinner-grow","text-primary"],["role","status",1,"spinner-grow","text-info"],["type","button","disabled","",1,"btn","btn-success","mx-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-success","mx-3",3,"disabled","click"],["type","submit",1,"btn","btn-theme-primary","mx-3",3,"click"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"div",2),a.Zb(3,"div",3),a.Hc(4,"Upload Affidavit"),a.Yb(),a.Zb(5,"div",4),a.Zb(6,"form",5),a.hc("ngSubmit",(function(){return t.uploadDocument()})),a.Zb(7,"div",6),a.Zb(8,"label",7),a.Hc(9,"Tender"),a.Yb(),a.Zb(10,"div",8),a.Hc(11),a.Yb(),a.Yb(),a.Fc(12,I,10,0,"div",9),a.Zb(13,"div",6),a.Zb(14,"label",10),a.Hc(15,"File"),a.Yb(),a.Zb(16,"div",8),a.Zb(17,"input",11),a.hc("change",(function(e){return t.getUploadUrl(e)})),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(18,"div",12),a.Fc(19,O,3,0,"button",13),a.Fc(20,P,2,1,"button",14),a.Fc(21,F,2,0,"button",15),a.Yb(),a.Yb(),a.Yb(),a.Yb()),2&e&&(a.Hb(11),a.Jc(" ",t.tender.title," "),a.Hb(1),a.qc("ngIf",t.uploadLoading),a.Hb(7),a.qc("ngIf",t.loading),a.Hb(1),a.qc("ngIf",!t.loading),a.Hb(1),a.qc("ngIf",!t.loading))},directives:[Z.E,Z.p,Z.q,r.t],styles:[""]}),M);function D(e,t){if(1&e){var n=a.ac();a.Zb(0,"button",18),a.hc("click",(function(){a.yc(n);var e=a.jc(2);return e.setTender(e.tender)})),a.Hc(1," Procure Tender "),a.Yb()}}function A(e,t){1&e&&(a.Zb(0,"button",19),a.Hc(1," Procured "),a.Yb())}function j(e,t){1&e&&(a.Zb(0,"div",29),a.Hc(1," No lots available "),a.Yb())}function L(e,t){if(1&e&&(a.Zb(0,"tr"),a.Zb(1,"td"),a.Zb(2,"div"),a.Hc(3),a.Yb(),a.Yb(),a.Zb(4,"td"),a.Zb(5,"div"),a.Hc(6),a.Yb(),a.Yb(),a.Zb(7,"td"),a.Zb(8,"div"),a.Hc(9),a.Yb(),a.Yb(),a.Yb()),2&e){var n=t.$implicit;a.Hb(3),a.Jc(" ",n.lotNumber," "),a.Hb(3),a.Jc(" ",n.category," "),a.Hb(3),a.Jc(" ",n.description||"Description not available"," ")}}function U(e,t){if(1&e&&(a.Xb(0),a.Zb(1,"div",4),a.Zb(2,"div",5),a.Zb(3,"h4"),a.Hc(4," Tender Lots "),a.Yb(),a.Yb(),a.Zb(5,"div",20),a.Fc(6,j,2,0,"div",21),a.Zb(7,"table",22),a.Zb(8,"colgroup"),a.Ub(9,"col",23),a.Ub(10,"col",24),a.Ub(11,"col",25),a.Yb(),a.Zb(12,"thead",26),a.Zb(13,"tr"),a.Zb(14,"th"),a.Hc(15,"Lot Number"),a.Yb(),a.Zb(16,"th"),a.Hc(17,"Lot Category"),a.Yb(),a.Zb(18,"th"),a.Hc(19,"Lot Description"),a.Yb(),a.Yb(),a.Yb(),a.Zb(20,"tbody",27),a.Fc(21,L,10,3,"tr",28),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Wb()),2&e){var n=t.ngIf;a.Hb(6),a.qc("ngIf",0===n.length),a.Hb(15),a.qc("ngForOf",n)}}function N(e,t){if(1&e&&(a.Xb(0),a.Zb(1,"div",9),a.Zb(2,"div",4),a.Zb(3,"div",6),a.Zb(4,"div",10),a.Zb(5,"div",11),a.Zb(6,"div",2),a.Zb(7,"h3",12),a.Hc(8),a.Yb(),a.Yb(),a.Zb(9,"div",13),a.Zb(10,"div",14),a.Zb(11,"h4"),a.Hc(12," Category "),a.Yb(),a.Zb(13,"p"),a.Hc(14),a.Yb(),a.Yb(),a.Zb(15,"div",14),a.Zb(16,"h4"),a.Hc(17," Date Published "),a.Yb(),a.Zb(18,"p"),a.Hc(19),a.kc(20,"date"),a.Yb(),a.Yb(),a.Zb(21,"div",14),a.Zb(22,"h4"),a.Hc(23," Expiry Date "),a.Yb(),a.Zb(24,"p"),a.Hc(25),a.kc(26,"date"),a.Yb(),a.Yb(),a.Zb(27,"div",14),a.Zb(28,"h4"),a.Hc(29," Application Fee "),a.Yb(),a.Zb(30,"p"),a.Hc(31),a.Yb(),a.Yb(),a.Yb(),a.Zb(32,"div",15),a.Fc(33,D,2,0,"button",16),a.Fc(34,A,2,0,"button",17),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(35,"div",4),a.Zb(36,"div",5),a.Zb(37,"h4"),a.Hc(38," MDA Name "),a.Yb(),a.Yb(),a.Zb(39,"div",6),a.Zb(40,"div",7),a.Zb(41,"p"),a.Hc(42),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(43,"div",4),a.Zb(44,"div",5),a.Zb(45,"h4"),a.Hc(46," Collection of Tender Documents "),a.Yb(),a.Yb(),a.Zb(47,"div",6),a.Zb(48,"div",7),a.Zb(49,"p"),a.Hc(50),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(51,"div",4),a.Zb(52,"div",5),a.Zb(53,"h4"),a.Hc(54," Projects "),a.Yb(),a.Yb(),a.Zb(55,"div",6),a.Zb(56,"div",7),a.Fc(57,U,22,2,"ng-container",3),a.kc(58,"async"),a.Yb(),a.Yb(),a.Yb(),a.Zb(59,"div",4),a.Zb(60,"div",5),a.Zb(61,"h4"),a.Hc(62," Submission Information "),a.Yb(),a.Yb(),a.Zb(63,"div",6),a.Zb(64,"div",7),a.Zb(65,"p"),a.Hc(66),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(67,"div",4),a.Zb(68,"div",5),a.Zb(69,"h4"),a.Hc(70," Closing Date and Opening Information "),a.Yb(),a.Yb(),a.Zb(71,"div",6),a.Zb(72,"div",7),a.Zb(73,"p"),a.Hc(74),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Wb()),2&e){var n=a.jc();a.Hb(8),a.Jc(" ",n.tender.title||"not available"," "),a.Hb(6),a.Ic(n.tender.category||"not available"),a.Hb(5),a.Jc(" ",a.mc(20,12,n.tender.publishDate,"mediumDate")," "),a.Hb(6),a.Jc(" ",a.mc(26,15,n.tender.expiryDate,"mediumDate")," "),a.Hb(6),a.Jc("\u20a6 ",n.tender.applicationFee,""),a.Hb(2),a.qc("ngIf",!n.tender.procured),a.Hb(1),a.qc("ngIf",n.tender.procured),a.Hb(8),a.Jc(" ",n.tender.mdaName||"not available"," "),a.Hb(8),a.Jc(" ",n.tender.collectionOfBidDocument||"not available"," "),a.Hb(7),a.qc("ngIf",a.lc(58,18,n.lots$)),a.Hb(9),a.Jc(" ",n.tender.closingInfo||"not available"," "),a.Hb(8),a.Jc(" ",n.tender.openingInfo||"not available"," ")}}function R(e,t){1&e&&(a.Zb(0,"div",29),a.Hc(1," No requirements available "),a.Yb())}function B(e,t){if(1&e&&(a.Zb(0,"li",33),a.Zb(1,"div"),a.Hc(2),a.Yb(),a.Yb()),2&e){var n=a.jc().$implicit;a.Hb(2),a.Ic(n.requirement)}}function J(e,t){if(1&e&&(a.Zb(0,"div",27),a.Zb(1,"ul",31),a.Fc(2,B,3,1,"li",32),a.Yb(),a.Yb()),2&e){var n=t.$implicit;a.Hb(2),a.qc("ngIf",n.required&&""!==n.requirement)}}function E(e,t){if(1&e&&(a.Xb(0),a.Zb(1,"div",4),a.Zb(2,"div",5),a.Zb(3,"h4"),a.Hc(4," Eligibility Requirements "),a.Yb(),a.Yb(),a.Zb(5,"div",20),a.Fc(6,R,2,0,"div",21),a.Fc(7,J,3,1,"div",30),a.Yb(),a.Yb(),a.Wb()),2&e){var n=t.ngIf;a.Hb(6),a.qc("ngIf",0===n.length),a.Hb(1),a.qc("ngForOf",n)}}function $(e,t){1&e&&(a.Ub(0,"i",34),a.Hc(1," fetching...\n"))}var z,X,W,K,V=((z=function(){function e(t,n,r,i){_classCallCheck(this,e),this.companyService=t,this.util=n,this.router=r,this.crud=i,this.tender={applicationFee:0,billOfQuantityUrl:"",category:"",collectionOfBidDocument:"",closingInfo:"",openingInfo:"",dateAdded:"",disclaimer:"",id:0,expiryDate:"",lotsGroups:"",mdaName:"",notes:"",openingDate:"",publish:null,publishDate:"",title:"",updatedBy:"",procured:0},this.procured=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.tender=this.companyService.getTender(),this.requirements$=this.getTenderRequirements(this.tender.id),this.lots$=this.getTenderLots(this.tender.id)}},{key:"getTenderRequirements",value:function(e){return this.crud.getRequest("api/tenderrequirement/allByTender/"+e)}},{key:"getTenderLots",value:function(e){return this.crud.getRequest("api/tenderlot/allByTender/"+e)}},{key:"setTender",value:function(e){return this.util.setTender(e),this.router.navigate(["/contractor/procurement/upload/affidavit"])}}]),e}()).\u0275fac=function(e){return new(e||z)(a.Tb(Y.a),a.Tb(s.a),a.Tb(i.c),a.Tb(b.a))},z.\u0275cmp=a.Nb({type:z,selectors:[["app-view-tender"]],decls:26,vars:7,consts:[[1,"row"],[4,"ngIf","ngIfElse"],[1,"col-md-12"],[4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-body","p-1"],[1,"p-2"],["loading",""],[1,"col-md-12","order-2","order-md-1"],[1,"card__profile","px-2","py-4","rounded"],[1,"row","tender"],[1,"text-center"],[1,"container","d-flex","m-4"],[1,"col-md-3"],[1,"mx-auto","my-3"],["class","btn btn-theme-primary mx-2",3,"click",4,"ngIf"],["disabled","","class","btn btn-theme-primary mx-2",4,"ngIf"],[1,"btn","btn-theme-primary","mx-2",3,"click"],["disabled","",1,"btn","btn-theme-primary","mx-2"],[1,"card-body","pt-0","px-2"],["class","w-100 p-2",4,"ngIf"],["summary","List of projects","aria-role","table",1,"table","stripped-alt","table-responsive-sm","table-xs-responsive","table-hover","table-outline","mt-2"],["span","1",2,"width","15%"],["span","1",2,"width","20%"],["span","1",2,"width","65%"],[1,"thead-light"],[1,"card__products","p-2"],[4,"ngFor","ngForOf"],[1,"w-100","p-2"],["class","card__products p-2",4,"ngFor","ngForOf"],[1,"row","align-items-center"],["class","pr-5",4,"ngIf"],[1,"pr-5"],[1,"fa","fa-spinner","fa-spin","mr-2"]],template:function(e,t){if(1&e&&(a.Zb(0,"section",0),a.Fc(1,N,75,20,"ng-container",1),a.Yb(),a.Zb(2,"section",0),a.Zb(3,"div",2),a.Fc(4,E,8,2,"ng-container",3),a.kc(5,"async"),a.Yb(),a.Yb(),a.Zb(6,"section",0),a.Zb(7,"div",2),a.Zb(8,"div",4),a.Zb(9,"div",5),a.Zb(10,"h4"),a.Hc(11," Notes "),a.Yb(),a.Yb(),a.Zb(12,"div",6),a.Zb(13,"div",7),a.Zb(14,"p"),a.Hc(15),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(16,"div",4),a.Zb(17,"div",5),a.Zb(18,"h4"),a.Hc(19," Disclaimer "),a.Yb(),a.Yb(),a.Zb(20,"div",6),a.Zb(21,"div",7),a.Zb(22,"p"),a.Hc(23),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Fc(24,$,2,0,"ng-template",null,8,a.Gc)),2&e){var n=a.wc(25);a.Hb(1),a.qc("ngIf",t.tender)("ngIfElse",n),a.Hb(3),a.qc("ngIf",a.lc(5,5,t.requirements$)),a.Hb(11),a.Jc(" ",t.tender.notes||"not available"," "),a.Hb(8),a.Jc(" ",t.tender.disclaimer||"not available"," ")}},directives:[r.t,r.s],pipes:[r.b,r.f],styles:["h4[_ngcontent-%COMP%]{font-size:12px}h4[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}p[_ngcontent-%COMP%]{padding:.5rem;font-size:13px}.card[_ngcontent-%COMP%]{font-size:14px}.card-header[_ngcontent-%COMP%]{border-bottom:1px solid #f3f3f3;margin-bottom:.5em}.card__image[_ngcontent-%COMP%]{border-radius:50%;-o-object-fit:cover;object-fit:cover;margin:auto;width:120px;height:120px;border:2px solid #c74923;overflow:hidden;transition:all .6s ease}.card__image[_ngcontent-%COMP%]:hover{cursor:pointer}.card__image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.4)}.card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:13px;font-weight:bolder;color:#c74923}.card__profile[_ngcontent-%COMP%]{background-color:#fdf8f6;border:1px solid #fbede9}.card__profile[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]{margin-bottom:1em}.card__profile[_ngcontent-%COMP%]:hover{background-color:#fcf1ed}.card__products[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #fbede9}.product__image[_ngcontent-%COMP%]{border-radius:5px;-o-object-fit:cover;object-fit:cover;width:80px;height:80px;border:2px solid #c74923;overflow:hidden;transition:all .6s ease}.product__image[_ngcontent-%COMP%]:hover{cursor:pointer}.product__image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.4)}"]}),z),G=n("mrSG"),Q=n("AiYy"),ee=function(){return["card","bank"]},te=[{path:"",component:c.a},{path:"tender-history",component:v},{path:"document/:doc",component:y},{path:"upload/affidavit",component:q},{path:"upload/bank-refferal",component:_},{path:"view-tender",component:V},{path:"summary",component:(X=function(){function e(t,n,r,i,c){_classCallCheck(this,e),this.crudService=t,this.utilService=n,this.swalService=r,this.companyService=i,this.router=c,this.loading=!1,this.tender=this.utilService.getTender(),this.email=this.utilService.getEmail(),this.ref=this.generateReference(),this.applicationData={companyProfileId:0,id:0,lotNumber:0,tenderId:0}}return _createClass(e,[{key:"ngOnInit",value:function(){this.tender=this.companyService.getTender(),this.applicationData.tenderId=this.tender.id,this.applicationData.lotNumber=this.tender.lotNumber,this.applicationData.companyProfileId=this.utilService.getCompany().id}},{key:"generateReference",value:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<15;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return"CA-"+e}},{key:"paymentFailure",value:function(e){console.log("Payment Failed",e),this.swalService.error("There was an error processing your payment")}},{key:"paymentSuccess",value:function(e){return Object(G.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Payment complete",e),t.t0="success"===e.status,!t.t0){t.next=8;break}return t.next=5,this.logTransaction(e);case 5:return t.next=7,this.tenderApplication();case 7:this.router.navigate(["/contractor/procurement/tender-history"]);case 8:case"end":return t.stop()}}),t,this)})))}},{key:"paymentInit",value:function(e){this.paymentInstance=e,console.log("Payment about to begin",e)}},{key:"logTransaction",value:function(e){var t=e.reference,n=this.tender,r=n.applicationFee,i=n.mdaName,c=n.category,o={amount:r,id:0,referenceNum:t,type:"Payment for ".concat(i," - ").concat(c," - ").concat(this.tender.lotNumber),userId:this.utilService.getUser()};this.crudService.postRequest("api/paymentrecept/add",o).subscribe((function(e){console.log(e)}),(function(e){return console.log(e)}))}},{key:"tenderApplication",value:function(){var e=this;this.crudService.postRequest("api/tenderapplication/add",this.applicationData).subscribe((function(t){console.log(t),0===t.code?e.swalService.success(t.message):e.swalService.error("An Error Occured")}),(function(t){console.log(t),e.loading=!1,e.swalService.error("An Error Occured")}))}}]),e}(),X.\u0275fac=function(e){return new(e||X)(a.Tb(b.a),a.Tb(s.a),a.Tb(l.a),a.Tb(Y.a),a.Tb(i.c))},X.\u0275cmp=a.Nb({type:X,selectors:[["app-summary"]],decls:35,vars:10,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-10"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-horizontal"],[1,"form-group","row"],["for","year",1,"col-md-3","col-form-label"],[1,"col-md-9"],[1,"card-footer"],[1,"btn","btn-theme-primary","mx-3",3,"email","amount","ref","channels","paymentInit","close","callback"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"div",2),a.Zb(3,"div",3),a.Hc(4,"Purchase Summary"),a.Yb(),a.Zb(5,"div",4),a.Zb(6,"div",5),a.Zb(7,"div",6),a.Zb(8,"label",7),a.Hc(9,"Tender"),a.Yb(),a.Zb(10,"div",8),a.Hc(11),a.Yb(),a.Yb(),a.Zb(12,"div",6),a.Zb(13,"label",7),a.Hc(14,"MDA"),a.Yb(),a.Zb(15,"div",8),a.Hc(16),a.Yb(),a.Yb(),a.Zb(17,"div",6),a.Zb(18,"label",7),a.Hc(19,"Category"),a.Yb(),a.Zb(20,"div",8),a.Hc(21),a.Yb(),a.Yb(),a.Zb(22,"div",6),a.Zb(23,"label",7),a.Hc(24,"Lot Number"),a.Yb(),a.Zb(25,"div",8),a.Hc(26),a.Yb(),a.Yb(),a.Zb(27,"div",6),a.Zb(28,"label",7),a.Hc(29,"Amount"),a.Yb(),a.Zb(30,"div",8),a.Hc(31),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(32,"div",9),a.Zb(33,"angular4-paystack",10),a.hc("paymentInit",(function(e){return t.paymentInit(e)}))("close",(function(e){return t.paymentFailure(e)}))("callback",(function(e){return t.paymentSuccess(e)})),a.Hc(34," Make Payment "),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb()),2&e&&(a.Hb(11),a.Jc(" ",t.tender.title," "),a.Hb(5),a.Jc(" ",t.tender.mdaName," "),a.Hb(5),a.Jc(" ",t.tender.category," "),a.Hb(5),a.Jc(" ",t.tender.lotNumber," "),a.Hb(5),a.Jc(" \u20a6 ",t.tender.applicationFee," "),a.Hb(2),a.qc("email",t.email)("amount",100*t.tender.applicationFee)("ref",t.ref)("channels",a.sc(9,ee)))},directives:[Q.a],styles:[""]}),X)}],ne=((W=function e(){_classCallCheck(this,e)}).\u0275mod=a.Rb({type:W}),W.\u0275inj=a.Qb({factory:function(e){return new(e||W)},imports:[[i.g.forChild(te)],i.g]}),W),re=n("RFI8"),ie=n("VADE"),ce=((K=function e(){_classCallCheck(this,e)}).\u0275mod=a.Rb({type:K}),K.\u0275inj=a.Qb({factory:function(e){return new(e||K)},imports:[[r.c,ne,Z.k,Z.y,ie.b,Q.b.forRoot("pk_test_961f74cc9467b58c13450983fff659a6bb8a52d3"),re.a.forRoot({key:"FLWPUBK_TEST-a95caf78b6504bde29af398c56b5eeab-X",isTest:!0})]]}),K)},Iab2:function(e,t,n){var r,i;void 0===(i="function"==typeof(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){o(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,c=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(e,c,o){var a=i.URL||i.webkitURL,b=document.createElement("a");b.download=c=c||e.name||"download",b.rel="noopener","string"==typeof e?(b.href=e,b.origin===location.origin?r(b):n(b.href)?t(e,c,o):r(b,b.target="_blank")):(b.href=a.createObjectURL(e),setTimeout((function(){a.revokeObjectURL(b.href)}),4e4),setTimeout((function(){r(b)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,i,c){if(i=i||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,c),i);else if(n(e))t(e,i,c);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){r(o)}))}}:function(e,n,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var a="application/octet-stream"===e.type,b=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&b||c)&&"undefined"!=typeof FileReader){var s=new FileReader;s.onloadend=function(){var e=s.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},s.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,u=d.createObjectURL(e);o?o.location=u:location.href=u,o=null,setTimeout((function(){d.revokeObjectURL(u)}),4e4)}});i.saveAs=o.saveAs=o,e.exports=o})?r.apply(t,[]):r)||(e.exports=i)},VADE:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));var r=n("fXoL"),i=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"filterByString",value:function(e){return e&&(e=e.toLowerCase()),function(t){return!e||!!t&&-1!==(""+t).toLowerCase().indexOf(e)}}},{key:"filterByBoolean",value:function(e){return function(t){return Boolean(t)===e}}},{key:"filterByObject",value:function(t){var n=this;return function(r){for(var i in t)if("$or"!==i){if(!r||!e.isFoundOnWalking(r,i))return!1;if(!n.isMatching(t[i],e.getValue(r[i])))return!1}else if(!n.filterByOr(t.$or)(e.getValue(r)))return!1;return!0}}},{key:"isMatching",value:function(e,t){switch(typeof e){case"boolean":return this.filterByBoolean(e)(t);case"string":return this.filterByString(e)(t);case"object":return this.filterByObject(e)(t)}return this.filterDefault(e)(t)}},{key:"filterByOr",value:function(e){var t=this;return function(n){for(var r=e.length,i=Array.isArray(n)?function(t){return-1!==n.indexOf(e[t])}:function(r){return t.isMatching(e[r],n)},c=0;c<r;c++)if(i(c))return!0;return!1}}},{key:"filterDefault",value:function(e){return function(t){return void 0===e||e==t}}},{key:"transform",value:function(t,n){if(!t)return t;switch(typeof n){case"boolean":return t.filter(this.filterByBoolean(n));case"string":return e.isNumber(n)?t.filter(this.filterDefault(n)):t.filter(this.filterByString(n));case"object":return t.filter(this.filterByObject(n));case"function":return t.filter(n)}return t.filter(this.filterDefault(n))}}],[{key:"isFoundOnWalking",value:function(e,t){var n=e,r=!1;do{if(n.hasOwnProperty(t)||Object.getOwnPropertyDescriptor(n,t)){r=!0;break}}while(n=Object.getPrototypeOf(n));return r}},{key:"isNumber",value:function(e){return!isNaN(parseInt(e,10))&&isFinite(e)}},{key:"getValue",value:function(e){return"function"==typeof e?e():e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Sb({name:"filterBy",type:e,pure:!1}),e.\u0275prov=r.Pb({token:e,factory:e.\u0275fac}),e}(),c=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=r.Rb({type:e}),e.\u0275inj=r.Qb({factory:function(t){return new(t||e)},providers:[i]}),e}()}}]);