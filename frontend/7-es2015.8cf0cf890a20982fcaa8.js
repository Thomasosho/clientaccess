(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"C/nz":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n("fXoL"),r=n("SiJz"),c=n("DaGL"),o=n("rvnR"),a=n("tyNb"),s=n("ofXK"),b=n("3Pt+"),l=n("VADE");function d(e,t){1&e&&(i.Zb(0,"div",20),i.Zb(1,"h2"),i.Hc(2,"Procurements"),i.Yb(),i.Yb())}function u(e,t){if(1&e&&(i.Zb(0,"option",21),i.Hc(1),i.Yb()),2&e){const e=t.$implicit;i.qc("value",e),i.Hb(1),i.Ic(e)}}function p(e,t){if(1&e&&(i.Zb(0,"option",21),i.Hc(1),i.Yb()),2&e){const e=t.$implicit;i.qc("value",e.value),i.Hb(1),i.Ic(e.name)}}function f(e,t){if(1&e){const e=i.ac();i.Zb(0,"button",30),i.hc("click",(function(){i.yc(e);const t=i.jc().$implicit;return i.jc().setTender(t,"procure")})),i.Hc(1," Procure Tender "),i.Yb()}}function h(e,t){1&e&&(i.Zb(0,"button",31),i.Hc(1," Procured "),i.Yb())}function g(e,t){1&e&&(i.Zb(0,"button",32),i.Hc(1," Expired "),i.Yb())}function m(e,t){if(1&e){const e=i.ac();i.Zb(0,"tr"),i.Zb(1,"td"),i.Zb(2,"div",22),i.Zb(3,"div",23),i.Zb(4,"h2",24),i.Hc(5),i.Yb(),i.Zb(6,"h3",24),i.Hc(7),i.Yb(),i.Yb(),i.Hc(8),i.Zb(9,"div",25),i.Hc(10),i.kc(11,"date"),i.kc(12,"date"),i.Yb(),i.Yb(),i.Zb(13,"div",23),i.Zb(14,"button",26),i.hc("click",(function(){i.yc(e);const n=t.$implicit;return i.jc().setTender(n)})),i.Hc(15," View Tender "),i.Yb(),i.Fc(16,f,2,0,"button",27),i.Fc(17,h,2,0,"button",28),i.Fc(18,g,2,0,"button",29),i.Yb(),i.Yb(),i.Yb()}if(2&e){const e=t.$implicit,n=i.jc();i.Hb(5),i.Ic(e.mdaName),i.Hb(2),i.Ic(e.title),i.Hb(1),i.Jc(" ",e.collectionOfBidDocument," "),i.Hb(2),i.Kc(" Published: ",i.mc(11,8,e.publishDate,"mediumDate")," | Expires: ",i.mc(12,11,e.expiryDate,"mediumDate")," "),i.Hb(6),i.qc("ngIf",n.checkExpired(e.expiryDate)&&!n.checkProcured(e.id)),i.Hb(1),i.qc("ngIf",n.checkProcured(e.id)),i.Hb(1),i.qc("ngIf",!n.checkExpired(e.expiryDate))}}function v(e,t){1&e&&(i.Zb(0,"div",33),i.Ub(1,"i",34),i.Zb(2,"span"),i.Hc(3,"Fetching Tender..."),i.Yb(),i.Yb())}function Y(e,t){1&e&&(i.Zb(0,"div",33),i.Zb(1,"span"),i.Hc(2,"No tender added, add tender to view them here."),i.Yb(),i.Yb())}function Z(e,t){1&e&&(i.Zb(0,"div",33),i.Zb(1,"span"),i.Hc(2,"No matching results."),i.Yb(),i.Yb())}let y=(()=>{class e{constructor(e,t,n,i){this.crudService=e,this.swalService=t,this.utilService=n,this.router=i,this.isHome=!1,this.allTender=[],this.procured=[],this.filter={addedBy:"",category:"",collectionOfBidDocument:"",title:"",mdaName:"",openingInfo:"",dateAdded:"",expiryDate:"",publishDate:"",openingDate:""}}ngOnInit(){this.isHome="/"===this.router.url,this.isHome?this.getPublicPublishedTender():(this.getPublishedTender(),this.getProcured())}getYear(e){const t=(new Date).getFullYear();return[...Array(e).keys()].map(e=>t-e)}getMonths(){return[{name:"Jan",value:"01"},{name:"Feb",value:"02"},{name:"Mar",value:"03"},{name:"Apr",value:"04"},{name:"May",value:"05"},{name:"Jun",value:"06"},{name:"Jul",value:"07"},{name:"Aug",value:"08"},{name:"Sep",value:"09"},{name:"Oct",value:"10"},{name:"Nov",value:"11"},{name:"Dec",value:"12"}]}checkExpired(e){return!(new Date>new Date(e))}checkProcured(e){return this.procured.filter(t=>t.id===e).length}getProcured(){this.loading=!0;const e=this.utilService.getCompany().id;this.crudService.getRequest("api/tenderapplication/allByCompanyProfileId/"+e).subscribe(e=>{this.loading=!1,this.procured=e},e=>{this.loading=!1,this.swalService.error("There was an error fetching all tender.")})}getPublishedTender(){this.loading=!0;const e=this.utilService.getToken();this.crudService.getRequestImAuth("api/tender/allPublished",e).subscribe(e=>{this.allTender=e,this.loading=!1},e=>{console.log(e),this.loading=!1,this.swalService.error("There was an error fetching all tender.")})}getPublicPublishedTender(){this.loading=!0,this.crudService.getRequestNoAuth("api/tender/allPublishedPublic").subscribe(e=>{this.allTender=e,this.loading=!1},e=>{console.log(e),this.loading=!1,this.swalService.error("There was an error fetching all tender.")})}setTender(e,t="view"){const n=this.checkProcured(e.id);return e.procured=n,this.utilService.setTender(e),this.router.navigate("procure"===t?["/contractor/procurement/upload/affidavit"]:["/contractor/procurement/view-tender"])}}return e.\u0275fac=function(t){return new(t||e)(i.Tb(r.a),i.Tb(c.a),i.Tb(o.a),i.Tb(a.c))},e.\u0275cmp=i.Nb({type:e,selectors:[["app-procurement"]],decls:36,vars:16,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["class","card-header",4,"ngIf"],[1,"card-body"],[1,"card","search","container","py-3","d-flex"],[1,"searchbar"],["type","text","placeholder","Search...",1,"search-input",3,"ngModel","ngModelChange"],["aria-hidden","true",1,"fa","fa-search"],[1,"d-flex"],[1,"form-group","text-value","d-flex","m-2"],["for","ccyear",1,"mr-1"],["id","ccyear",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["summary","List of countracts","aria-role","table",1,"table","stripped-alt","table-responsive-sm","table-xs-responsive","table-hover","table-outline","mb-0"],[1,"thead-light"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","my-5 text-center",4,"ngIf"],[1,"card-header"],[3,"value"],[1,"text-left"],[1,"text-center","my-2"],[1,"my-1"],[1,"text-center","small","font-weight-bold","text-theme-primary","py-2"],[1,"btn","btn-success","mx-2",3,"click"],["class","btn btn-theme-primary mx-2",3,"click",4,"ngIf"],["class","btn btn-theme-primary disabled mx-2",4,"ngIf"],["class","btn btn-warning disabled",4,"ngIf"],[1,"btn","btn-theme-primary","mx-2",3,"click"],[1,"btn","btn-theme-primary","disabled","mx-2"],[1,"btn","btn-warning","disabled"],[1,"my-5","text-center"],[1,"fa","fa-spinner","fa-spin","mr-2"]],template:function(e,t){1&e&&(i.Zb(0,"div",0),i.Zb(1,"div",1),i.Zb(2,"div",2),i.Fc(3,d,3,0,"div",3),i.Zb(4,"div",4),i.Zb(5,"div",5),i.Zb(6,"div",6),i.Zb(7,"input",7),i.hc("ngModelChange",(function(e){return t.filter.title=e})),i.Yb(),i.Ub(8,"i",8),i.Yb(),i.Zb(9,"div",9),i.Zb(10,"div",10),i.Zb(11,"label",11),i.Hc(12,"Year: "),i.Yb(),i.Zb(13,"select",12),i.hc("ngModelChange",(function(e){return t.filter.publishDate=e})),i.Zb(14,"option",13),i.Hc(15,"---Select Year---"),i.Yb(),i.Fc(16,u,2,2,"option",14),i.Yb(),i.Yb(),i.Zb(17,"div",10),i.Zb(18,"label",11),i.Hc(19,"Month: "),i.Yb(),i.Zb(20,"select",12),i.hc("ngModelChange",(function(e){return t.filter.publishDate=e})),i.Zb(21,"option",13),i.Hc(22,"---Select Month---"),i.Yb(),i.Fc(23,p,2,2,"option",14),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Zb(24,"table",15),i.Zb(25,"thead",16),i.Zb(26,"tr",17),i.Zb(27,"th"),i.Hc(28,"Tender"),i.Yb(),i.Yb(),i.Yb(),i.Zb(29,"tbody"),i.Fc(30,m,19,14,"tr",18),i.kc(31,"filterBy"),i.Yb(),i.Yb(),i.Fc(32,v,4,0,"div",19),i.Fc(33,Y,3,0,"div",19),i.Fc(34,Z,3,0,"div",19),i.kc(35,"filterBy"),i.Yb(),i.Yb(),i.Yb(),i.Yb()),2&e&&(i.Hb(3),i.qc("ngIf",!t.isHome),i.Hb(4),i.qc("ngModel",t.filter.title),i.Hb(6),i.qc("ngModel",t.filter.publishDate),i.Hb(3),i.qc("ngForOf",t.getYear(5)),i.Hb(4),i.qc("ngModel",t.filter.publishDate),i.Hb(3),i.qc("ngForOf",t.getMonths()),i.Hb(7),i.qc("ngForOf",i.mc(31,10,t.allTender,t.filter)),i.Hb(2),i.qc("ngIf",t.loading),i.Hb(1),i.qc("ngIf",!t.loading&&0===t.allTender.length),i.Hb(1),i.qc("ngIf",!t.loading&&0===i.mc(35,13,t.allTender,t.filter).length))},directives:[s.t,b.c,b.o,b.r,b.A,b.t,b.D,s.s],pipes:[l.a,s.f],styles:[".search[_ngcontent-%COMP%]{justify-content:center;border:1px solid #f3f3f3}.search[_ngcontent-%COMP%], .searchbar[_ngcontent-%COMP%]{display:flex;align-items:center}.searchbar[_ngcontent-%COMP%]{height:40px;background-color:#fff;width:60%;padding:0 20px;border-radius:50px;border:1px solid #eee;cursor:pointer}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:15px;height:38px;width:100%;border:none;font-family:Montserrat,sans-serif;padding:15px}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.searchbar[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-input-placeholder{color:#e0e0e0}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-moz-placeholder, .searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-moz-placeholder{color:#e0e0e0}.searchbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-ms-input-placeholder{color:#e0e0e0}"]}),e})()},Cooc:function(e,t,n){"use strict";n.r(t),n.d(t,"ProcurementModule",(function(){return W}));var i=n("ofXK"),r=n("tyNb"),c=n("C/nz"),o=n("Iab2"),a=n("fXoL"),s=n("SiJz"),b=n("DaGL"),l=n("rvnR");function d(e,t){if(1&e){const e=a.ac();a.Zb(0,"tr"),a.Zb(1,"td"),a.Zb(2,"div"),a.Hc(3),a.Yb(),a.Yb(),a.Zb(4,"td"),a.Zb(5,"div"),a.Hc(6),a.Yb(),a.Yb(),a.Zb(7,"td"),a.Zb(8,"div"),a.Hc(9),a.Yb(),a.Yb(),a.Zb(10,"td"),a.Zb(11,"div"),a.Hc(12),a.Yb(),a.Yb(),a.Zb(13,"td"),a.Zb(14,"div"),a.Hc(15),a.Yb(),a.Yb(),a.Zb(16,"td"),a.Zb(17,"div"),a.Hc(18),a.Yb(),a.Yb(),a.Zb(19,"td",7),a.Zb(20,"button",11),a.hc("click",(function(){a.yc(e);const n=t.$implicit;return a.jc().download(n)})),a.Hc(21,"Download"),a.Yb(),a.Yb(),a.Yb()}if(2&e){const e=t.$implicit;a.Hb(3),a.Jc(" ",e.mdaName," "),a.Hb(3),a.Jc(" ",e.title," "),a.Hb(3),a.Jc(" ",e.category," "),a.Hb(3),a.Jc(" ",e.lotNumber," "),a.Hb(3),a.Jc(" ",e.dateAdded," "),a.Hb(3),a.Jc(" ",e.applicationFee," ")}}function u(e,t){1&e&&(a.Zb(0,"div",12),a.Zb(1,"span"),a.Hc(2,"Fetching tender history..."),a.Yb(),a.Yb())}function p(e,t){1&e&&(a.Zb(0,"div",12),a.Zb(1,"span"),a.Hc(2,"You have not applied for any tender yet, submit an application to view them here."),a.Yb(),a.Yb())}let f=(()=>{class e{constructor(e,t,n){this.crudService=e,this.swalService=t,this.utilService=n,this.loading=!1,this.allTender=[]}ngOnInit(){this.getTenderHistory()}getTenderHistory(){this.loading=!0;const e=this.utilService.getCompany().id;this.crudService.getRequest("api/tenderapplication/allByCompanyProfileId/"+e).subscribe(e=>{console.log(e),this.allTender=e,this.loading=!1},e=>{console.log(e),this.loading=!1,this.swalService.error("There was an error fetching all tender.")})}download(e){const{billOfQuantityUrl:t,mdaName:n,category:i}=e,r=n+" - "+i;this.crudService.downloadFile(t).subscribe(e=>Object(o.saveAs)(e,r+".pdf"))}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(s.a),a.Tb(b.a),a.Tb(l.a))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-tender-history"]],decls:28,vars:4,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","d-flex","justify-content-between"],[1,"card-body"],["summary","List of projects","aria-role","table",1,"table","stripped","table-responsive-sm","table-xs-responsive","table-hover","table-outline","mb-0"],[1,"thead-light"],[1,"text-center"],[1,""],[4,"ngFor","ngForOf"],["class","my-5 text-center",4,"ngIf"],[1,"btn","btn-theme-primary",3,"click"],[1,"my-5","text-center"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"div",2),a.Zb(3,"div",3),a.Zb(4,"h2"),a.Hc(5),a.Yb(),a.Yb(),a.Zb(6,"div",4),a.Zb(7,"table",5),a.Zb(8,"thead",6),a.Zb(9,"tr",7),a.Zb(10,"th"),a.Hc(11,"MDA"),a.Yb(),a.Zb(12,"th"),a.Hc(13,"Tender"),a.Yb(),a.Zb(14,"th"),a.Hc(15,"Category"),a.Yb(),a.Zb(16,"th"),a.Hc(17,"Lot Number"),a.Yb(),a.Zb(18,"th"),a.Hc(19,"Application Date"),a.Yb(),a.Zb(20,"th"),a.Hc(21,"Amount"),a.Yb(),a.Zb(22,"th"),a.Hc(23,"Action"),a.Yb(),a.Yb(),a.Yb(),a.Zb(24,"tbody",8),a.Fc(25,d,22,6,"tr",9),a.Yb(),a.Yb(),a.Fc(26,u,3,0,"div",10),a.Fc(27,p,3,0,"div",10),a.Yb(),a.Yb(),a.Yb(),a.Yb()),2&e&&(a.Hb(5),a.Jc("Tender History(",t.allTender.length,")"),a.Hb(20),a.qc("ngForOf",t.allTender),a.Hb(1),a.qc("ngIf",t.loading),a.Hb(1),a.qc("ngIf",!t.loading&&0===t.allTender.length))},directives:[i.s,i.t],styles:[""]}),e})();function h(e,t){if(1&e){const e=a.ac();a.Zb(0,"tr"),a.Zb(1,"td"),a.Zb(2,"div"),a.Ub(3,"img",13),a.Yb(),a.Yb(),a.Zb(4,"td"),a.Zb(5,"div"),a.Hc(6),a.Yb(),a.Yb(),a.Zb(7,"td",9),a.Zb(8,"button",14),a.hc("click",(function(){a.yc(e);const n=t.$implicit;return a.jc().download(n)})),a.Hc(9,"Download"),a.Yb(),a.Yb(),a.Yb()}if(2&e){const e=t.$implicit;a.Hb(3),a.qc("src",e.imageUrl,a.Ac),a.Hb(3),a.Jc(" ",e.tender.title||"Description not available"," ")}}function g(e,t){1&e&&(a.Zb(0,"div",15),a.Zb(1,"span"),a.Hc(2,"No documents added, add documents to view them here."),a.Yb(),a.Yb())}let m=(()=>{class e{constructor(e,t,n,i,c){this.crudService=e,this.utilService=t,this.swalService=n,this.route=i,this.router=c,this.viewType={affidavit:"api/affidavit/allByCompanyId","bank-refferal":"api/bankreferral/allByCompanyId"},this.documents=[],this.docType="",this.getUrl="",this.loading=!1,this.navigationSubscription=this.router.events.subscribe(e=>{const t=this.route.snapshot.params.doc;this.docType=t;const n=this.utilService.getCompany().id;this.getUrl=`${this.viewType[t]}/${n}`,e instanceof r.b&&this.getAllDocuments()})}ngOnInit(){}getAllDocuments(){this.loading=!0,this.crudService.getRequest(this.getUrl).subscribe(e=>{console.log(e),this.documents=e,this.loading=!1},e=>{console.log(e),this.swalService.error("There was an error fetching the documents."),this.loading=!1})}download(e){const{imageUrl:t,dateUploaded:n}=e,i=t.substr(t.lastIndexOf("."),t.length-1),r=this.docType+" - "+n+i;this.crudService.downloadFile(t).subscribe(e=>saveAs(e,""+r))}ngOnDestroy(){this.navigationSubscription&&this.navigationSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(s.a),a.Tb(l.a),a.Tb(b.a),a.Tb(r.a),a.Tb(r.c))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-doc-view"]],decls:25,vars:9,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","d-flex","justify-content-between"],[1,"card-body"],["summary","List of projects","aria-role","table",1,"table","stripped","table-responsive-sm","table-xs-responsive","table-hover","table-outline","mb-0"],["span","1",2,"width","20%"],["span","1",2,"width","60%"],[1,"thead-light"],[1,"text-center"],[1,""],[4,"ngFor","ngForOf"],["class","my-5 text-center",4,"ngIf"],["onError","this.src='../../../../assets/img/pdf.png'","width","150","height","150","alt","","srcset","",3,"src"],[1,"btn","btn-theme-primary",3,"click"],[1,"my-5","text-center"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"div",2),a.Zb(3,"div",3),a.Zb(4,"h2"),a.Hc(5),a.kc(6,"titlecase"),a.Yb(),a.Yb(),a.Zb(7,"div",4),a.Zb(8,"table",5),a.Zb(9,"colgroup"),a.Ub(10,"col",6),a.Ub(11,"col",7),a.Ub(12,"col",6),a.Yb(),a.Zb(13,"thead",8),a.Zb(14,"tr",9),a.Zb(15,"th"),a.Hc(16),a.kc(17,"titlecase"),a.Yb(),a.Zb(18,"th"),a.Hc(19,"Corresponding Tender"),a.Yb(),a.Zb(20,"th"),a.Hc(21,"Action"),a.Yb(),a.Yb(),a.Yb(),a.Zb(22,"tbody",10),a.Fc(23,h,10,2,"tr",11),a.Yb(),a.Yb(),a.Fc(24,g,3,0,"div",12),a.Yb(),a.Yb(),a.Yb(),a.Yb()),2&e&&(a.Hb(5),a.Kc("",a.lc(6,5,t.docType),"(",t.documents.length,")"),a.Hb(11),a.Ic(a.lc(17,7,t.docType)),a.Hb(7),a.qc("ngForOf",t.documents),a.Hb(1),a.qc("ngIf",!t.loading&&0===t.documents.length))},directives:[i.s,i.t],pipes:[i.F],styles:[""]}),e})();var v=n("1LjI"),Y=n("3Pt+");function Z(e,t){if(1&e&&(a.Zb(0,"option",22),a.Hc(1),a.Yb()),2&e){const e=t.$implicit;a.qc("value",e.lotNumber),a.Hb(1),a.Kc("",e.lotNumber," ",e.category?" - "+e.category:"","")}}function y(e,t){if(1&e){const e=a.ac();a.Zb(0,"div",6),a.Zb(1,"label",18),a.Hc(2,"Tender Lot"),a.Yb(),a.Zb(3,"div",8),a.Zb(4,"select",19),a.hc("change",(function(t){return a.yc(e),a.jc().setTenderLot(t.target.value)})),a.Zb(5,"option",20),a.Hc(6,"Select Lot"),a.Yb(),a.Fc(7,Z,2,3,"option",21),a.Yb(),a.Yb(),a.Yb()}if(2&e){const e=t.ngIf;a.Hb(7),a.qc("ngForOf",e)}}function H(e,t){1&e&&(a.Zb(0,"div",23),a.Zb(1,"div",24),a.Zb(2,"span",25),a.Hc(3,"Loading..."),a.Yb(),a.Yb(),a.Zb(4,"div",26),a.Zb(5,"span",25),a.Hc(6,"Loading..."),a.Yb(),a.Yb(),a.Zb(7,"div",27),a.Zb(8,"span",25),a.Hc(9,"Loading..."),a.Yb(),a.Yb(),a.Yb())}function w(e,t){1&e&&(a.Zb(0,"button",28),a.Ub(1,"span",29),a.Hc(2," Loading... "),a.Yb())}function x(e,t){if(1&e){const e=a.ac();a.Zb(0,"button",30),a.hc("click",(function(){return a.yc(e),a.jc().uploadDocument()})),a.Hc(1," Upload Bank Refferal (jpg or PDF) "),a.Yb()}if(2&e){const e=a.jc();a.qc("disabled",e.uploadSuccessful)}}function S(e,t){if(1&e){const e=a.ac();a.Zb(0,"button",31),a.hc("click",(function(){return a.yc(e),a.jc().nextProcess()})),a.Hc(1," Proceed "),a.Yb()}}let T=(()=>{class e{constructor(e,t,n,i,r){this.crudService=e,this.utilService=t,this.swalService=n,this.companyService=i,this.router=r,this.loading=!1,this.uploadLoading=!1,this.uploadSuccessful=!1,this.tender=this.utilService.getTender()}ngOnInit(){this.tender=this.companyService.getTender(),this.lots$=this.getTenderLots(this.tender.id)}getTenderLots(e){return this.crudService.getRequest("api/tenderlot/allByTender/"+e)}setTenderLot(e){this.tender.lotNumber=e,console.log(this.tender)}uploadDocument(){if(this.loading=!0,this.fileUrl){const e={imageUrl:this.fileUrl,id:0,projectId:this.tender.id,companyId:Number(this.utilService.getCompany().id)};this.crudService.postRequest("api/bankreferral/add",e).subscribe(e=>{this.loading=!1,this.uploadSuccessful=!0,this.swalService.success("Uploaded Successfully")},e=>{console.log(e),this.loading=!1,this.swalService.error(e.message)})}else this.loading=!1,this.swalService.error("Could not upload file, file path is empty.")}getUploadUrl(e){this.uploadLoading=!0;const t=e.target.files[0],n=new FormData;n.append("file",t,t.name),this.crudService.postRequestFile("uploadMe",n).subscribe(e=>{0===e.code?(this.uploadLoading=!1,this.fileUrl=e.message,this.swalService.success("File path saved.")):(this.uploadLoading=!1,this.swalService.error("An error occured"))},e=>{console.log(e),this.uploadLoading=!1,this.swalService.error("Could not get file path.")})}nextProcess(){if(!this.uploadSuccessful)return this.swalService.warning("Please upload the required document then click next to proceed.");this.utilService.setTender(this.tender),this.router.navigate(["/contractor/procurement/summary"])}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(s.a),a.Tb(l.a),a.Tb(b.a),a.Tb(v.a),a.Tb(r.c))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-doc-upload"]],decls:25,vars:8,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-10"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row"],["for","year",1,"col-md-3","col-form-label"],[1,"col-md-9"],["class","form-group row",4,"ngIf"],["class","row d-flex justify-content-center my-2",4,"ngIf"],["for","file-input",1,"col-md-3","col-form-label"],["type","file","id","file-input","name","file-input",3,"change"],["docUpload",""],[1,"card-footer"],["class","btn btn-success mx-3","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-success mx-3",3,"disabled","click",4,"ngIf"],["type","submit","class","btn btn-theme-primary mx-3",3,"click",4,"ngIf"],["for","lot",1,"col-md-3","col-form-label"],["id","lot","name","lot",1,"form-control",3,"change"],["value","","selected","","disabled","","hidden",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"row","d-flex","justify-content-center","my-2"],["role","status",1,"spinner-grow","text-success"],[1,"sr-only"],["role","status",1,"spinner-grow","text-primary"],["role","status",1,"spinner-grow","text-info"],["type","button","disabled","",1,"btn","btn-success","mx-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-success","mx-3",3,"disabled","click"],["type","submit",1,"btn","btn-theme-primary","mx-3",3,"click"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"div",2),a.Zb(3,"div",3),a.Hc(4,"Upload Bank Refferal"),a.Yb(),a.Zb(5,"div",4),a.Zb(6,"form",5),a.hc("ngSubmit",(function(){return t.uploadDocument()})),a.Zb(7,"div",6),a.Zb(8,"label",7),a.Hc(9,"Tender"),a.Yb(),a.Zb(10,"div",8),a.Hc(11),a.Yb(),a.Yb(),a.Fc(12,y,8,1,"div",9),a.kc(13,"async"),a.Fc(14,H,10,0,"div",10),a.Zb(15,"div",6),a.Zb(16,"label",11),a.Hc(17,"File"),a.Yb(),a.Zb(18,"div",8),a.Zb(19,"input",12,13),a.hc("change",(function(e){return t.getUploadUrl(e)})),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(21,"div",14),a.Fc(22,w,3,0,"button",15),a.Fc(23,x,2,1,"button",16),a.Fc(24,S,2,0,"button",17),a.Yb(),a.Yb(),a.Yb(),a.Yb()),2&e&&(a.Hb(11),a.Jc(" ",t.tender.title," "),a.Hb(1),a.qc("ngIf",a.lc(13,6,t.lots$)),a.Hb(2),a.qc("ngIf",t.uploadLoading),a.Hb(8),a.qc("ngIf",t.loading),a.Hb(1),a.qc("ngIf",!t.loading),a.Hb(1),a.qc("ngIf",!t.loading))},directives:[Y.E,Y.p,Y.q,i.t,Y.t,Y.D,i.s],pipes:[i.b],styles:[""]}),e})();function I(e,t){1&e&&(a.Zb(0,"div",16),a.Zb(1,"div",17),a.Zb(2,"span",18),a.Hc(3,"Loading..."),a.Yb(),a.Yb(),a.Zb(4,"div",19),a.Zb(5,"span",18),a.Hc(6,"Loading..."),a.Yb(),a.Yb(),a.Zb(7,"div",20),a.Zb(8,"span",18),a.Hc(9,"Loading..."),a.Yb(),a.Yb(),a.Yb())}function O(e,t){1&e&&(a.Zb(0,"button",21),a.Ub(1,"span",22),a.Hc(2," Loading... "),a.Yb())}function F(e,t){if(1&e){const e=a.ac();a.Zb(0,"button",23),a.hc("click",(function(){return a.yc(e),a.jc().uploadDocument()})),a.Hc(1," Upload Affidavit (jpg or PDF) "),a.Yb()}if(2&e){const e=a.jc();a.qc("disabled",e.uploadSuccessful)}}function P(e,t){if(1&e){const e=a.ac();a.Zb(0,"button",24),a.hc("click",(function(){return a.yc(e),a.jc().nextProcess()})),a.Hc(1," Next "),a.Yb()}}let k=(()=>{class e{constructor(e,t,n,i){this.crudService=e,this.utilService=t,this.swalService=n,this.router=i,this.loading=!1,this.uploadLoading=!1,this.uploadSuccessful=!1,this.tender=this.utilService.getTender()}ngOnInit(){}uploadDocument(){if(this.loading=!0,this.fileUrl){const e={imageUrl:this.fileUrl,id:0,projectId:this.tender.id,companyId:Number(this.utilService.getCompany().id)};this.crudService.postRequest("api/affidavit/add",e).subscribe(e=>{console.log(e),this.loading=!1,this.uploadSuccessful=!0,this.swalService.success("Uploaded Successfully")},e=>{console.log(e),this.loading=!1,this.swalService.error(e.message)})}else this.loading=!1,this.swalService.error("Could not upload file, file path is empty.")}getUploadUrl(e){this.uploadLoading=!0;const t=e.target.files[0],n=new FormData;n.append("file",t,t.name),this.crudService.postRequestFile("uploadMe",n).subscribe(e=>{0===e.code?(this.uploadLoading=!1,this.fileUrl=e.message,this.swalService.success("File path saved.")):(this.uploadLoading=!1,this.swalService.error("An error occured"))},e=>{console.log(e),this.uploadLoading=!1,this.swalService.error("Could not get file path.")})}nextProcess(){if(!this.uploadSuccessful)return this.swalService.warning("Please upload the required document then click next to proceed.");this.router.navigate(["/contractor/procurement/upload/bank-refferal"])}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(s.a),a.Tb(l.a),a.Tb(b.a),a.Tb(r.c))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-affidavit"]],decls:22,vars:5,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-10"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-horizontal",3,"ngSubmit"],[1,"form-group","row"],["for","year",1,"col-md-3","col-form-label"],[1,"col-md-9"],["class","row d-flex justify-content-center my-2",4,"ngIf"],["for","file-input",1,"col-md-3","col-form-label"],["type","file","id","file-input","name","file-input",3,"change"],[1,"card-footer"],["class","btn btn-success mx-3","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-success mx-3",3,"disabled","click",4,"ngIf"],["type","submit","class","btn btn-theme-primary mx-3",3,"click",4,"ngIf"],[1,"row","d-flex","justify-content-center","my-2"],["role","status",1,"spinner-grow","text-success"],[1,"sr-only"],["role","status",1,"spinner-grow","text-primary"],["role","status",1,"spinner-grow","text-info"],["type","button","disabled","",1,"btn","btn-success","mx-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-success","mx-3",3,"disabled","click"],["type","submit",1,"btn","btn-theme-primary","mx-3",3,"click"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"div",2),a.Zb(3,"div",3),a.Hc(4,"Upload Affidavit"),a.Yb(),a.Zb(5,"div",4),a.Zb(6,"form",5),a.hc("ngSubmit",(function(){return t.uploadDocument()})),a.Zb(7,"div",6),a.Zb(8,"label",7),a.Hc(9,"Tender"),a.Yb(),a.Zb(10,"div",8),a.Hc(11),a.Yb(),a.Yb(),a.Fc(12,I,10,0,"div",9),a.Zb(13,"div",6),a.Zb(14,"label",10),a.Hc(15,"File"),a.Yb(),a.Zb(16,"div",8),a.Zb(17,"input",11),a.hc("change",(function(e){return t.getUploadUrl(e)})),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(18,"div",12),a.Fc(19,O,3,0,"button",13),a.Fc(20,F,2,1,"button",14),a.Fc(21,P,2,0,"button",15),a.Yb(),a.Yb(),a.Yb(),a.Yb()),2&e&&(a.Hb(11),a.Jc(" ",t.tender.title," "),a.Hb(1),a.qc("ngIf",t.uploadLoading),a.Hb(7),a.qc("ngIf",t.loading),a.Hb(1),a.qc("ngIf",!t.loading),a.Hb(1),a.qc("ngIf",!t.loading))},directives:[Y.E,Y.p,Y.q,i.t],styles:[""]}),e})();function M(e,t){if(1&e){const e=a.ac();a.Zb(0,"button",18),a.hc("click",(function(){a.yc(e);const t=a.jc(2);return t.setTender(t.tender)})),a.Hc(1," Procure Tender "),a.Yb()}}function q(e,t){1&e&&(a.Zb(0,"button",19),a.Hc(1," Procured "),a.Yb())}function C(e,t){1&e&&(a.Zb(0,"div",29),a.Hc(1," No lots available "),a.Yb())}function D(e,t){if(1&e&&(a.Zb(0,"tr"),a.Zb(1,"td"),a.Zb(2,"div"),a.Hc(3),a.Yb(),a.Yb(),a.Zb(4,"td"),a.Zb(5,"div"),a.Hc(6),a.Yb(),a.Yb(),a.Zb(7,"td"),a.Zb(8,"div"),a.Hc(9),a.Yb(),a.Yb(),a.Yb()),2&e){const e=t.$implicit;a.Hb(3),a.Jc(" ",e.lotNumber," "),a.Hb(3),a.Jc(" ",e.category," "),a.Hb(3),a.Jc(" ",e.description||"Description not available"," ")}}function _(e,t){if(1&e&&(a.Xb(0),a.Zb(1,"div",4),a.Zb(2,"div",5),a.Zb(3,"h4"),a.Hc(4," Tender Lots "),a.Yb(),a.Yb(),a.Zb(5,"div",20),a.Fc(6,C,2,0,"div",21),a.Zb(7,"table",22),a.Zb(8,"colgroup"),a.Ub(9,"col",23),a.Ub(10,"col",24),a.Ub(11,"col",25),a.Yb(),a.Zb(12,"thead",26),a.Zb(13,"tr"),a.Zb(14,"th"),a.Hc(15,"Lot Number"),a.Yb(),a.Zb(16,"th"),a.Hc(17,"Lot Category"),a.Yb(),a.Zb(18,"th"),a.Hc(19,"Lot Description"),a.Yb(),a.Yb(),a.Yb(),a.Zb(20,"tbody",27),a.Fc(21,D,10,3,"tr",28),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Wb()),2&e){const e=t.ngIf;a.Hb(6),a.qc("ngIf",0===e.length),a.Hb(15),a.qc("ngForOf",e)}}function j(e,t){if(1&e&&(a.Xb(0),a.Zb(1,"div",9),a.Zb(2,"div",4),a.Zb(3,"div",6),a.Zb(4,"div",10),a.Zb(5,"div",11),a.Zb(6,"div",2),a.Zb(7,"h3",12),a.Hc(8),a.Yb(),a.Yb(),a.Zb(9,"div",13),a.Zb(10,"div",14),a.Zb(11,"h4"),a.Hc(12," Category "),a.Yb(),a.Zb(13,"p"),a.Hc(14),a.Yb(),a.Yb(),a.Zb(15,"div",14),a.Zb(16,"h4"),a.Hc(17," Date Published "),a.Yb(),a.Zb(18,"p"),a.Hc(19),a.kc(20,"date"),a.Yb(),a.Yb(),a.Zb(21,"div",14),a.Zb(22,"h4"),a.Hc(23," Expiry Date "),a.Yb(),a.Zb(24,"p"),a.Hc(25),a.kc(26,"date"),a.Yb(),a.Yb(),a.Zb(27,"div",14),a.Zb(28,"h4"),a.Hc(29," Application Fee "),a.Yb(),a.Zb(30,"p"),a.Hc(31),a.Yb(),a.Yb(),a.Yb(),a.Zb(32,"div",15),a.Fc(33,M,2,0,"button",16),a.Fc(34,q,2,0,"button",17),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(35,"div",4),a.Zb(36,"div",5),a.Zb(37,"h4"),a.Hc(38," MDA Name "),a.Yb(),a.Yb(),a.Zb(39,"div",6),a.Zb(40,"div",7),a.Zb(41,"p"),a.Hc(42),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(43,"div",4),a.Zb(44,"div",5),a.Zb(45,"h4"),a.Hc(46," Collection of Tender Documents "),a.Yb(),a.Yb(),a.Zb(47,"div",6),a.Zb(48,"div",7),a.Zb(49,"p"),a.Hc(50),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(51,"div",4),a.Zb(52,"div",5),a.Zb(53,"h4"),a.Hc(54," Projects "),a.Yb(),a.Yb(),a.Zb(55,"div",6),a.Zb(56,"div",7),a.Fc(57,_,22,2,"ng-container",3),a.kc(58,"async"),a.Yb(),a.Yb(),a.Yb(),a.Zb(59,"div",4),a.Zb(60,"div",5),a.Zb(61,"h4"),a.Hc(62," Submission Information "),a.Yb(),a.Yb(),a.Zb(63,"div",6),a.Zb(64,"div",7),a.Zb(65,"p"),a.Hc(66),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(67,"div",4),a.Zb(68,"div",5),a.Zb(69,"h4"),a.Hc(70," Closing Date and Opening Information "),a.Yb(),a.Yb(),a.Zb(71,"div",6),a.Zb(72,"div",7),a.Zb(73,"p"),a.Hc(74),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Wb()),2&e){const e=a.jc();a.Hb(8),a.Jc(" ",e.tender.title||"not available"," "),a.Hb(6),a.Ic(e.tender.category||"not available"),a.Hb(5),a.Jc(" ",a.mc(20,12,e.tender.publishDate,"mediumDate")," "),a.Hb(6),a.Jc(" ",a.mc(26,15,e.tender.expiryDate,"mediumDate")," "),a.Hb(6),a.Jc("\u20a6 ",e.tender.applicationFee,""),a.Hb(2),a.qc("ngIf",!e.tender.procured),a.Hb(1),a.qc("ngIf",e.tender.procured),a.Hb(8),a.Jc(" ",e.tender.mdaName||"not available"," "),a.Hb(8),a.Jc(" ",e.tender.collectionOfBidDocument||"not available"," "),a.Hb(7),a.qc("ngIf",a.lc(58,18,e.lots$)),a.Hb(9),a.Jc(" ",e.tender.closingInfo||"not available"," "),a.Hb(8),a.Jc(" ",e.tender.openingInfo||"not available"," ")}}function L(e,t){1&e&&(a.Zb(0,"div",29),a.Hc(1," No requirements available "),a.Yb())}function U(e,t){if(1&e&&(a.Zb(0,"li",33),a.Zb(1,"div"),a.Hc(2),a.Yb(),a.Yb()),2&e){const e=a.jc().$implicit;a.Hb(2),a.Ic(e.requirement)}}function A(e,t){if(1&e&&(a.Zb(0,"div",27),a.Zb(1,"ul",31),a.Fc(2,U,3,1,"li",32),a.Yb(),a.Yb()),2&e){const e=t.$implicit;a.Hb(2),a.qc("ngIf",e.required&&""!==e.requirement)}}function N(e,t){if(1&e&&(a.Xb(0),a.Zb(1,"div",4),a.Zb(2,"div",5),a.Zb(3,"h4"),a.Hc(4," Eligibility Requirements "),a.Yb(),a.Yb(),a.Zb(5,"div",20),a.Fc(6,L,2,0,"div",21),a.Fc(7,A,3,1,"div",30),a.Yb(),a.Yb(),a.Wb()),2&e){const e=t.ngIf;a.Hb(6),a.qc("ngIf",0===e.length),a.Hb(1),a.qc("ngForOf",e)}}function R(e,t){1&e&&(a.Ub(0,"i",34),a.Hc(1," fetching...\n"))}let B=(()=>{class e{constructor(e,t,n,i){this.companyService=e,this.util=t,this.router=n,this.crud=i,this.tender={applicationFee:0,billOfQuantityUrl:"",category:"",collectionOfBidDocument:"",closingInfo:"",openingInfo:"",dateAdded:"",disclaimer:"",id:0,expiryDate:"",lotsGroups:"",mdaName:"",notes:"",openingDate:"",publish:null,publishDate:"",title:"",updatedBy:"",procured:0},this.procured=[]}ngOnInit(){this.tender=this.companyService.getTender(),this.requirements$=this.getTenderRequirements(this.tender.id),this.lots$=this.getTenderLots(this.tender.id)}getTenderRequirements(e){return this.crud.getRequest("api/tenderrequirement/allByTender/"+e)}getTenderLots(e){return this.crud.getRequest("api/tenderlot/allByTender/"+e)}setTender(e){return this.util.setTender(e),this.router.navigate(["/contractor/procurement/upload/affidavit"])}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(v.a),a.Tb(l.a),a.Tb(r.c),a.Tb(s.a))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-view-tender"]],decls:26,vars:7,consts:[[1,"row"],[4,"ngIf","ngIfElse"],[1,"col-md-12"],[4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-body","p-1"],[1,"p-2"],["loading",""],[1,"col-md-12","order-2","order-md-1"],[1,"card__profile","px-2","py-4","rounded"],[1,"row","tender"],[1,"text-center"],[1,"container","d-flex","m-4"],[1,"col-md-3"],[1,"mx-auto","my-3"],["class","btn btn-theme-primary mx-2",3,"click",4,"ngIf"],["disabled","","class","btn btn-theme-primary mx-2",4,"ngIf"],[1,"btn","btn-theme-primary","mx-2",3,"click"],["disabled","",1,"btn","btn-theme-primary","mx-2"],[1,"card-body","pt-0","px-2"],["class","w-100 p-2",4,"ngIf"],["summary","List of projects","aria-role","table",1,"table","stripped-alt","table-responsive-sm","table-xs-responsive","table-hover","table-outline","mt-2"],["span","1",2,"width","15%"],["span","1",2,"width","20%"],["span","1",2,"width","65%"],[1,"thead-light"],[1,"card__products","p-2"],[4,"ngFor","ngForOf"],[1,"w-100","p-2"],["class","card__products p-2",4,"ngFor","ngForOf"],[1,"row","align-items-center"],["class","pr-5",4,"ngIf"],[1,"pr-5"],[1,"fa","fa-spinner","fa-spin","mr-2"]],template:function(e,t){if(1&e&&(a.Zb(0,"section",0),a.Fc(1,j,75,20,"ng-container",1),a.Yb(),a.Zb(2,"section",0),a.Zb(3,"div",2),a.Fc(4,N,8,2,"ng-container",3),a.kc(5,"async"),a.Yb(),a.Yb(),a.Zb(6,"section",0),a.Zb(7,"div",2),a.Zb(8,"div",4),a.Zb(9,"div",5),a.Zb(10,"h4"),a.Hc(11," Notes "),a.Yb(),a.Yb(),a.Zb(12,"div",6),a.Zb(13,"div",7),a.Zb(14,"p"),a.Hc(15),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(16,"div",4),a.Zb(17,"div",5),a.Zb(18,"h4"),a.Hc(19," Disclaimer "),a.Yb(),a.Yb(),a.Zb(20,"div",6),a.Zb(21,"div",7),a.Zb(22,"p"),a.Hc(23),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Fc(24,R,2,0,"ng-template",null,8,a.Gc)),2&e){const e=a.wc(25);a.Hb(1),a.qc("ngIf",t.tender)("ngIfElse",e),a.Hb(3),a.qc("ngIf",a.lc(5,5,t.requirements$)),a.Hb(11),a.Jc(" ",t.tender.notes||"not available"," "),a.Hb(8),a.Jc(" ",t.tender.disclaimer||"not available"," ")}},directives:[i.t,i.s],pipes:[i.b,i.f],styles:["h4[_ngcontent-%COMP%]{font-size:12px}h4[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}p[_ngcontent-%COMP%]{padding:.5rem;font-size:13px}.card[_ngcontent-%COMP%]{font-size:14px}.card-header[_ngcontent-%COMP%]{border-bottom:1px solid #f3f3f3;margin-bottom:.5em}.card__image[_ngcontent-%COMP%]{border-radius:50%;-o-object-fit:cover;object-fit:cover;margin:auto;width:120px;height:120px;border:2px solid #c74923;overflow:hidden;transition:all .6s ease}.card__image[_ngcontent-%COMP%]:hover{cursor:pointer}.card__image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.4)}.card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:13px;font-weight:bolder;color:#c74923}.card__profile[_ngcontent-%COMP%]{background-color:#fdf8f6;border:1px solid #fbede9}.card__profile[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]{margin-bottom:1em}.card__profile[_ngcontent-%COMP%]:hover{background-color:#fcf1ed}.card__products[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #fbede9}.product__image[_ngcontent-%COMP%]{border-radius:5px;-o-object-fit:cover;object-fit:cover;width:80px;height:80px;border:2px solid #c74923;overflow:hidden;transition:all .6s ease}.product__image[_ngcontent-%COMP%]:hover{cursor:pointer}.product__image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.4)}"]}),e})();var J=n("mrSG"),E=n("AiYy");const $=function(){return["card","bank"]},z=[{path:"",component:c.a},{path:"tender-history",component:f},{path:"document/:doc",component:m},{path:"upload/affidavit",component:k},{path:"upload/bank-refferal",component:T},{path:"view-tender",component:B},{path:"summary",component:(()=>{class e{constructor(e,t,n,i,r){this.crudService=e,this.utilService=t,this.swalService=n,this.companyService=i,this.router=r,this.loading=!1,this.tender=this.utilService.getTender(),this.email=this.utilService.getEmail(),this.ref=this.generateReference(),this.applicationData={companyProfileId:0,id:0,lotNumber:0,tenderId:0}}ngOnInit(){this.tender=this.companyService.getTender(),this.applicationData.tenderId=this.tender.id,this.applicationData.lotNumber=this.tender.lotNumber,this.applicationData.companyProfileId=this.utilService.getCompany().id}generateReference(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<15;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return"CA-"+e}paymentFailure(e){console.log("Payment Failed",e),this.swalService.error("There was an error processing your payment")}paymentSuccess(e){return Object(J.a)(this,void 0,void 0,(function*(){console.log("Payment complete",e),"success"===e.status&&(yield this.logTransaction(e),yield this.tenderApplication(),this.router.navigate(["/contractor/procurement/tender-history"]))}))}paymentInit(e){this.paymentInstance=e,console.log("Payment about to begin",e)}logTransaction({reference:e}){const{applicationFee:t,mdaName:n,category:i}=this.tender,r={amount:t,id:0,referenceNum:e,type:`Payment for ${n} - ${i} - ${this.tender.lotNumber}`,userId:this.utilService.getUser()};this.crudService.postRequest("api/paymentrecept/add",r).subscribe(e=>{console.log(e)},e=>console.log(e))}tenderApplication(){this.crudService.postRequest("api/tenderapplication/add",this.applicationData).subscribe(e=>{console.log(e),0===e.code?this.swalService.success(e.message):this.swalService.error("An Error Occured")},e=>{console.log(e),this.loading=!1,this.swalService.error("An Error Occured")})}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(s.a),a.Tb(l.a),a.Tb(b.a),a.Tb(v.a),a.Tb(r.c))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-summary"]],decls:35,vars:10,consts:[[1,"row","d-flex","justify-content-center"],[1,"col-md-10"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-horizontal"],[1,"form-group","row"],["for","year",1,"col-md-3","col-form-label"],[1,"col-md-9"],[1,"card-footer"],[1,"btn","btn-theme-primary","mx-3",3,"email","amount","ref","channels","paymentInit","close","callback"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"div",2),a.Zb(3,"div",3),a.Hc(4,"Purchase Summary"),a.Yb(),a.Zb(5,"div",4),a.Zb(6,"div",5),a.Zb(7,"div",6),a.Zb(8,"label",7),a.Hc(9,"Tender"),a.Yb(),a.Zb(10,"div",8),a.Hc(11),a.Yb(),a.Yb(),a.Zb(12,"div",6),a.Zb(13,"label",7),a.Hc(14,"MDA"),a.Yb(),a.Zb(15,"div",8),a.Hc(16),a.Yb(),a.Yb(),a.Zb(17,"div",6),a.Zb(18,"label",7),a.Hc(19,"Category"),a.Yb(),a.Zb(20,"div",8),a.Hc(21),a.Yb(),a.Yb(),a.Zb(22,"div",6),a.Zb(23,"label",7),a.Hc(24,"Lot Number"),a.Yb(),a.Zb(25,"div",8),a.Hc(26),a.Yb(),a.Yb(),a.Zb(27,"div",6),a.Zb(28,"label",7),a.Hc(29,"Amount"),a.Yb(),a.Zb(30,"div",8),a.Hc(31),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(32,"div",9),a.Zb(33,"angular4-paystack",10),a.hc("paymentInit",(function(e){return t.paymentInit(e)}))("close",(function(e){return t.paymentFailure(e)}))("callback",(function(e){return t.paymentSuccess(e)})),a.Hc(34," Make Payment "),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb()),2&e&&(a.Hb(11),a.Jc(" ",t.tender.title," "),a.Hb(5),a.Jc(" ",t.tender.mdaName," "),a.Hb(5),a.Jc(" ",t.tender.category," "),a.Hb(5),a.Jc(" ",t.tender.lotNumber," "),a.Hb(5),a.Jc(" \u20a6 ",t.tender.applicationFee," "),a.Hb(2),a.qc("email",t.email)("amount",100*t.tender.applicationFee)("ref",t.ref)("channels",a.sc(9,$)))},directives:[E.a],styles:[""]}),e})()}];let X=(()=>{class e{}return e.\u0275mod=a.Rb({type:e}),e.\u0275inj=a.Qb({factory:function(t){return new(t||e)},imports:[[r.g.forChild(z)],r.g]}),e})();var K=n("RFI8"),V=n("VADE");let W=(()=>{class e{}return e.\u0275mod=a.Rb({type:e}),e.\u0275inj=a.Qb({factory:function(t){return new(t||e)},imports:[[i.c,X,Y.k,Y.y,V.b,E.b.forRoot("pk_test_961f74cc9467b58c13450983fff659a6bb8a52d3"),K.a.forRoot({key:"FLWPUBK_TEST-a95caf78b6504bde29af398c56b5eeab-X",isTest:!0})]]}),e})()},Iab2:function(e,t,n){var i,r;void 0===(r="function"==typeof(i=function(){"use strict";function t(e,t,n){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){o(i.response,t,n)},i.onerror=function(){console.error("could not download file")},i.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,c=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(e,c,o){var a=r.URL||r.webkitURL,s=document.createElement("a");s.download=c=c||e.name||"download",s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?i(s):n(s.href)?t(e,c,o):i(s,s.target="_blank")):(s.href=a.createObjectURL(e),setTimeout((function(){a.revokeObjectURL(s.href)}),4e4),setTimeout((function(){i(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,r,c){if(r=r||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,c),r);else if(n(e))t(e,r,c);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){i(o)}))}}:function(e,n,i,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,i);var a="application/octet-stream"===e.type,s=/constructor/i.test(r.HTMLElement)||r.safari,b=/CriOS\/[\d]+/.test(navigator.userAgent);if((b||a&&s||c)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=b?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},l.readAsDataURL(e)}else{var d=r.URL||r.webkitURL,u=d.createObjectURL(e);o?o.location=u:location.href=u,o=null,setTimeout((function(){d.revokeObjectURL(u)}),4e4)}});r.saveAs=o.saveAs=o,e.exports=o})?i.apply(t,[]):i)||(e.exports=r)},VADE:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return r}));var i=n("fXoL");let r=(()=>{class e{static isFoundOnWalking(e,t){let n=e,i=!1;do{if(n.hasOwnProperty(t)||Object.getOwnPropertyDescriptor(n,t)){i=!0;break}}while(n=Object.getPrototypeOf(n));return i}static isNumber(e){return!isNaN(parseInt(e,10))&&isFinite(e)}static getValue(e){return"function"==typeof e?e():e}filterByString(e){return e&&(e=e.toLowerCase()),t=>!e||!!t&&-1!==(""+t).toLowerCase().indexOf(e)}filterByBoolean(e){return t=>Boolean(t)===e}filterByObject(t){return n=>{for(const i in t)if("$or"!==i){if(!n||!e.isFoundOnWalking(n,i))return!1;if(!this.isMatching(t[i],e.getValue(n[i])))return!1}else if(!this.filterByOr(t.$or)(e.getValue(n)))return!1;return!0}}isMatching(e,t){switch(typeof e){case"boolean":return this.filterByBoolean(e)(t);case"string":return this.filterByString(e)(t);case"object":return this.filterByObject(e)(t)}return this.filterDefault(e)(t)}filterByOr(e){return t=>{const n=e.length,i=Array.isArray(t)?n=>-1!==t.indexOf(e[n]):n=>this.isMatching(e[n],t);for(let e=0;e<n;e++)if(i(e))return!0;return!1}}filterDefault(e){return t=>void 0===e||e==t}transform(t,n){if(!t)return t;switch(typeof n){case"boolean":return t.filter(this.filterByBoolean(n));case"string":return e.isNumber(n)?t.filter(this.filterDefault(n)):t.filter(this.filterByString(n));case"object":return t.filter(this.filterByObject(n));case"function":return t.filter(n)}return t.filter(this.filterDefault(n))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Sb({name:"filterBy",type:e,pure:!1}),e.\u0275prov=i.Pb({token:e,factory:e.\u0275fac}),e})(),c=(()=>{class e{}return e.\u0275mod=i.Rb({type:e}),e.\u0275inj=i.Qb({factory:function(t){return new(t||e)},providers:[r]}),e})()}}]);